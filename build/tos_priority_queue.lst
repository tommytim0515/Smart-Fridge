ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"tos_priority_queue.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.prio_q_pool_mgr_init,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	prio_q_pool_mgr_init:
  24              	.LVL0:
  25              	.LFB114:
  26              		.file 1 "..//kernel/core/tos_priority_queue.c"
   1:..//kernel/core/tos_priority_queue.c **** /*----------------------------------------------------------------------------
   2:..//kernel/core/tos_priority_queue.c ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/tos_priority_queue.c ****  * available.
   4:..//kernel/core/tos_priority_queue.c ****  *
   5:..//kernel/core/tos_priority_queue.c ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/tos_priority_queue.c ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/tos_priority_queue.c ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/tos_priority_queue.c ****  *
   9:..//kernel/core/tos_priority_queue.c ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/tos_priority_queue.c ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/tos_priority_queue.c ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/tos_priority_queue.c ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/tos_priority_queue.c ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/tos_priority_queue.c ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/tos_priority_queue.c ****  * within TencentOS.
  16:..//kernel/core/tos_priority_queue.c ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/tos_priority_queue.c **** 
  18:..//kernel/core/tos_priority_queue.c **** #include "tos_k.h"
  19:..//kernel/core/tos_priority_queue.c **** 
  20:..//kernel/core/tos_priority_queue.c **** __STATIC_INLINE__ void prio_q_item_copy_to(k_prio_q_t *prio_q, void *item_out, size_t *item_size, p
  21:..//kernel/core/tos_priority_queue.c **** {
  22:..//kernel/core/tos_priority_queue.c ****     memcpy(item_out, PRIO_Q_THE_ITEM(prio_q, slot), prio_q->item_size);
  23:..//kernel/core/tos_priority_queue.c ****     if (item_size) {
  24:..//kernel/core/tos_priority_queue.c ****         *item_size = prio_q->item_size;
  25:..//kernel/core/tos_priority_queue.c ****     }
  26:..//kernel/core/tos_priority_queue.c **** }
  27:..//kernel/core/tos_priority_queue.c **** 
  28:..//kernel/core/tos_priority_queue.c **** __STATIC_INLINE__ void prio_q_item_copy_from(k_prio_q_t *prio_q, void *item_in, prio_q_slot_t slot)
  29:..//kernel/core/tos_priority_queue.c **** {
  30:..//kernel/core/tos_priority_queue.c ****     memcpy(PRIO_Q_THE_ITEM(prio_q, slot), item_in, prio_q->item_size);
  31:..//kernel/core/tos_priority_queue.c **** }
  32:..//kernel/core/tos_priority_queue.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 2


  33:..//kernel/core/tos_priority_queue.c **** __STATIC_INLINE__ void prio_q_item_increase(k_prio_q_t *prio_q)
  34:..//kernel/core/tos_priority_queue.c **** {
  35:..//kernel/core/tos_priority_queue.c ****     ++prio_q->total;
  36:..//kernel/core/tos_priority_queue.c **** }
  37:..//kernel/core/tos_priority_queue.c **** 
  38:..//kernel/core/tos_priority_queue.c **** __STATIC_INLINE__ void prio_q_item_decrease(k_prio_q_t *prio_q)
  39:..//kernel/core/tos_priority_queue.c **** {
  40:..//kernel/core/tos_priority_queue.c ****     --prio_q->total;
  41:..//kernel/core/tos_priority_queue.c **** }
  42:..//kernel/core/tos_priority_queue.c **** 
  43:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_pool_mgr_init(prio_q_pool_mgr_t *pool_mgr, prio_q_pool_mgr_ent_t *pool_mgr_e
  44:..//kernel/core/tos_priority_queue.c **** {
  27              		.loc 1 44 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  45:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t i;
  32              		.loc 1 45 5 view .LVU1
  46:..//kernel/core/tos_priority_queue.c **** 
  47:..//kernel/core/tos_priority_queue.c ****     pool_mgr->first_free            = (prio_q_slot_t)0u;
  33              		.loc 1 47 5 view .LVU2
  34              		.loc 1 47 37 is_stmt 0 view .LVU3
  35 0000 0023     		movs	r3, #0
  36 0002 0380     		strh	r3, [r0]	@ movhi
  48:..//kernel/core/tos_priority_queue.c ****     pool_mgr->pool_mgr_ent_array    = pool_mgr_ent_array;
  37              		.loc 1 48 5 is_stmt 1 view .LVU4
  38              		.loc 1 48 37 is_stmt 0 view .LVU5
  39 0004 4160     		str	r1, [r0, #4]
  49:..//kernel/core/tos_priority_queue.c **** 
  50:..//kernel/core/tos_priority_queue.c ****     for (i = 0; i < item_cnt; ++i) {
  40              		.loc 1 50 5 is_stmt 1 view .LVU6
  41              	.LVL1:
  42              	.L2:
  43              		.loc 1 50 5 is_stmt 0 discriminator 1 view .LVU7
  44 0006 9342     		cmp	r3, r2
  45 0008 04D2     		bcs	.L4
  51:..//kernel/core/tos_priority_queue.c ****         pool_mgr_ent_array[i].next = i + 1;
  46              		.loc 1 51 9 is_stmt 1 discriminator 3 view .LVU8
  47              		.loc 1 51 27 is_stmt 0 discriminator 3 view .LVU9
  48 000a 5800     		lsls	r0, r3, #1
  49              		.loc 1 51 40 discriminator 3 view .LVU10
  50 000c 0133     		adds	r3, r3, #1
  51              	.LVL2:
  52              		.loc 1 51 40 discriminator 3 view .LVU11
  53 000e 9BB2     		uxth	r3, r3
  54              		.loc 1 51 36 discriminator 3 view .LVU12
  55 0010 0B52     		strh	r3, [r1, r0]	@ movhi
  56              	.LVL3:
  57              		.loc 1 51 36 discriminator 3 view .LVU13
  58 0012 F8E7     		b	.L2
  59              	.L4:
  52:..//kernel/core/tos_priority_queue.c ****     }
  53:..//kernel/core/tos_priority_queue.c ****     pool_mgr_ent_array[item_cnt - 1].next = PRIO_Q_POOL_SLOT_INVALID;
  60              		.loc 1 53 5 is_stmt 1 view .LVU14
  61              		.loc 1 53 23 is_stmt 0 view .LVU15
  62 0014 02F10042 		add	r2, r2, #-2147483648
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 3


  63              	.LVL4:
  64              		.loc 1 53 23 view .LVU16
  65 0018 013A     		subs	r2, r2, #1
  66              	.LVL5:
  67              		.loc 1 53 43 view .LVU17
  68 001a 4FF6FF73 		movw	r3, #65535
  69              	.LVL6:
  70              		.loc 1 53 43 view .LVU18
  71 001e 21F81230 		strh	r3, [r1, r2, lsl #1]	@ movhi
  54:..//kernel/core/tos_priority_queue.c **** }
  72              		.loc 1 54 1 view .LVU19
  73 0022 7047     		bx	lr
  74              		.cfi_endproc
  75              	.LFE114:
  77              		.section	.text.prio_q_pool_mgr_reset,"ax",%progbits
  78              		.align	1
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  82              		.fpu softvfp
  84              	prio_q_pool_mgr_reset:
  85              	.LVL7:
  86              	.LFB115:
  55:..//kernel/core/tos_priority_queue.c **** 
  56:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_pool_mgr_reset(prio_q_pool_mgr_t *pool_mgr, size_t item_cnt)
  57:..//kernel/core/tos_priority_queue.c **** {
  87              		.loc 1 57 1 is_stmt 1 view -0
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              		@ link register save eliminated.
  58:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t i;
  92              		.loc 1 58 5 view .LVU21
  59:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_ent_t *pool_mgr_ent_array;
  93              		.loc 1 59 5 view .LVU22
  60:..//kernel/core/tos_priority_queue.c **** 
  61:..//kernel/core/tos_priority_queue.c ****     pool_mgr->first_free    = (prio_q_slot_t)0u;
  94              		.loc 1 61 5 view .LVU23
  95              		.loc 1 61 29 is_stmt 0 view .LVU24
  96 0000 0023     		movs	r3, #0
  97 0002 0380     		strh	r3, [r0]	@ movhi
  62:..//kernel/core/tos_priority_queue.c ****     pool_mgr_ent_array      = pool_mgr->pool_mgr_ent_array;
  98              		.loc 1 62 5 is_stmt 1 view .LVU25
  99              		.loc 1 62 29 is_stmt 0 view .LVU26
 100 0004 4068     		ldr	r0, [r0, #4]
 101              	.LVL8:
  63:..//kernel/core/tos_priority_queue.c **** 
  64:..//kernel/core/tos_priority_queue.c ****     for (i = 0; i < item_cnt; ++i) {
 102              		.loc 1 64 5 is_stmt 1 view .LVU27
 103              	.L6:
 104              		.loc 1 64 5 is_stmt 0 discriminator 1 view .LVU28
 105 0006 8B42     		cmp	r3, r1
 106 0008 04D2     		bcs	.L8
  65:..//kernel/core/tos_priority_queue.c ****         pool_mgr_ent_array[i].next = i + 1;
 107              		.loc 1 65 9 is_stmt 1 discriminator 3 view .LVU29
 108              		.loc 1 65 27 is_stmt 0 discriminator 3 view .LVU30
 109 000a 5A00     		lsls	r2, r3, #1
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 4


 110              		.loc 1 65 40 discriminator 3 view .LVU31
 111 000c 0133     		adds	r3, r3, #1
 112              	.LVL9:
 113              		.loc 1 65 40 discriminator 3 view .LVU32
 114 000e 9BB2     		uxth	r3, r3
 115              		.loc 1 65 36 discriminator 3 view .LVU33
 116 0010 8352     		strh	r3, [r0, r2]	@ movhi
 117              	.LVL10:
 118              		.loc 1 65 36 discriminator 3 view .LVU34
 119 0012 F8E7     		b	.L6
 120              	.L8:
  66:..//kernel/core/tos_priority_queue.c ****     }
  67:..//kernel/core/tos_priority_queue.c ****     pool_mgr_ent_array[item_cnt - 1].next = PRIO_Q_POOL_SLOT_INVALID;
 121              		.loc 1 67 5 is_stmt 1 view .LVU35
 122              		.loc 1 67 23 is_stmt 0 view .LVU36
 123 0014 01F10041 		add	r1, r1, #-2147483648
 124              	.LVL11:
 125              		.loc 1 67 23 view .LVU37
 126 0018 0139     		subs	r1, r1, #1
 127              	.LVL12:
 128              		.loc 1 67 43 view .LVU38
 129 001a 4FF6FF73 		movw	r3, #65535
 130              	.LVL13:
 131              		.loc 1 67 43 view .LVU39
 132 001e 20F81130 		strh	r3, [r0, r1, lsl #1]	@ movhi
  68:..//kernel/core/tos_priority_queue.c **** }
 133              		.loc 1 68 1 view .LVU40
 134 0022 7047     		bx	lr
 135              		.cfi_endproc
 136              	.LFE115:
 138              		.section	.text.prio_q_pool_mgr_deinit,"ax",%progbits
 139              		.align	1
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 143              		.fpu softvfp
 145              	prio_q_pool_mgr_deinit:
 146              	.LVL14:
 147              	.LFB116:
  69:..//kernel/core/tos_priority_queue.c **** 
  70:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_pool_mgr_deinit(prio_q_pool_mgr_t *pool_mgr)
  71:..//kernel/core/tos_priority_queue.c **** {
 148              		.loc 1 71 1 is_stmt 1 view -0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 0
 151              		@ frame_needed = 0, uses_anonymous_args = 0
 152              		@ link register save eliminated.
  72:..//kernel/core/tos_priority_queue.c ****     pool_mgr->first_free            = (prio_q_slot_t)0u;
 153              		.loc 1 72 5 view .LVU42
 154              		.loc 1 72 37 is_stmt 0 view .LVU43
 155 0000 0023     		movs	r3, #0
 156 0002 0380     		strh	r3, [r0]	@ movhi
  73:..//kernel/core/tos_priority_queue.c ****     pool_mgr->pool_mgr_ent_array    = K_NULL;
 157              		.loc 1 73 5 is_stmt 1 view .LVU44
 158              		.loc 1 73 37 is_stmt 0 view .LVU45
 159 0004 4360     		str	r3, [r0, #4]
  74:..//kernel/core/tos_priority_queue.c **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 5


 160              		.loc 1 74 1 view .LVU46
 161 0006 7047     		bx	lr
 162              		.cfi_endproc
 163              	.LFE116:
 165              		.section	.text.prio_q_mgr_entry_cmp,"ax",%progbits
 166              		.align	1
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu softvfp
 172              	prio_q_mgr_entry_cmp:
 173              	.LVL15:
 174              	.LFB117:
  75:..//kernel/core/tos_priority_queue.c **** 
  76:..//kernel/core/tos_priority_queue.c **** __STATIC__ int prio_q_mgr_entry_cmp(void *first, void *second)
  77:..//kernel/core/tos_priority_queue.c **** {
 175              		.loc 1 77 1 is_stmt 1 view -0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
 179              		@ link register save eliminated.
  78:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t *first_entry, *second_entry;
 180              		.loc 1 78 5 view .LVU48
  79:..//kernel/core/tos_priority_queue.c **** 
  80:..//kernel/core/tos_priority_queue.c ****     first_entry     = (prio_q_prio_mgr_ent_t *)first;
 181              		.loc 1 80 5 view .LVU49
  81:..//kernel/core/tos_priority_queue.c ****     second_entry    = (prio_q_prio_mgr_ent_t *)second;
 182              		.loc 1 81 5 view .LVU50
  82:..//kernel/core/tos_priority_queue.c **** 
  83:..//kernel/core/tos_priority_queue.c ****     // numerically bigger, actually smaller, we build a minimal binary heap here
  84:..//kernel/core/tos_priority_queue.c ****     if (first_entry->priority < second_entry->priority) {
 183              		.loc 1 84 5 view .LVU51
 184              		.loc 1 84 20 is_stmt 0 view .LVU52
 185 0000 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 186              		.loc 1 84 45 view .LVU53
 187 0002 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 188              		.loc 1 84 8 view .LVU54
 189 0004 9A42     		cmp	r2, r3
 190 0006 01D3     		bcc	.L12
  85:..//kernel/core/tos_priority_queue.c ****         return K_TRUE;
  86:..//kernel/core/tos_priority_queue.c ****     }
  87:..//kernel/core/tos_priority_queue.c ****     return K_FALSE;
 191              		.loc 1 87 12 view .LVU55
 192 0008 0020     		movs	r0, #0
 193              	.LVL16:
 194              		.loc 1 87 12 view .LVU56
 195 000a 7047     		bx	lr
 196              	.LVL17:
 197              	.L12:
  85:..//kernel/core/tos_priority_queue.c ****         return K_TRUE;
 198              		.loc 1 85 16 view .LVU57
 199 000c 0120     		movs	r0, #1
 200              	.LVL18:
  88:..//kernel/core/tos_priority_queue.c **** }
 201              		.loc 1 88 1 view .LVU58
 202 000e 7047     		bx	lr
 203              		.cfi_endproc
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 6


 204              	.LFE117:
 206              		.section	.text.prio_q_pool_mgr_slot_alloc,"ax",%progbits
 207              		.align	1
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 211              		.fpu softvfp
 213              	prio_q_pool_mgr_slot_alloc:
 214              	.LVL19:
 215              	.LFB121:
  89:..//kernel/core/tos_priority_queue.c **** 
  90:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_prio_mgr_init(prio_q_prio_mgr_t *prio_mgr, prio_q_prio_mgr_ent_t *prio_mgr_e
  91:..//kernel/core/tos_priority_queue.c **** {
  92:..//kernel/core/tos_priority_queue.c ****     prio_mgr->prio_mgr_ent_pool = prio_mgr_ent_pool;
  93:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_create(&prio_mgr->prio_mgr_bin_heap, prio_mgr_ent_pool, item_cnt, sizeof(prio_q_pr
  94:..//kernel/core/tos_priority_queue.c **** }
  95:..//kernel/core/tos_priority_queue.c **** 
  96:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_prio_mgr_reset(prio_q_prio_mgr_t *prio_mgr)
  97:..//kernel/core/tos_priority_queue.c **** {
  98:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_flush(&prio_mgr->prio_mgr_bin_heap);
  99:..//kernel/core/tos_priority_queue.c **** }
 100:..//kernel/core/tos_priority_queue.c **** 
 101:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_prio_mgr_deinit(prio_q_prio_mgr_t *prio_mgr)
 102:..//kernel/core/tos_priority_queue.c **** {
 103:..//kernel/core/tos_priority_queue.c ****     prio_mgr->prio_mgr_ent_pool = K_NULL;
 104:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_destroy(&prio_mgr->prio_mgr_bin_heap);
 105:..//kernel/core/tos_priority_queue.c **** }
 106:..//kernel/core/tos_priority_queue.c **** 
 107:..//kernel/core/tos_priority_queue.c **** __STATIC__ prio_q_slot_t prio_q_pool_mgr_slot_alloc(prio_q_pool_mgr_t *pool_mgr)
 108:..//kernel/core/tos_priority_queue.c **** {
 216              		.loc 1 108 1 is_stmt 1 view -0
 217              		.cfi_startproc
 218              		@ args = 0, pretend = 0, frame = 0
 219              		@ frame_needed = 0, uses_anonymous_args = 0
 220              		@ link register save eliminated.
 109:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t fresh;
 221              		.loc 1 109 5 view .LVU60
 110:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_ent_t *first_free;
 222              		.loc 1 110 5 view .LVU61
 111:..//kernel/core/tos_priority_queue.c **** 
 112:..//kernel/core/tos_priority_queue.c ****     if (pool_mgr->first_free == PRIO_Q_POOL_SLOT_INVALID) {
 223              		.loc 1 112 5 view .LVU62
 224              		.loc 1 112 17 is_stmt 0 view .LVU63
 225 0000 0388     		ldrh	r3, [r0]
 226              		.loc 1 112 8 view .LVU64
 227 0002 4FF6FF72 		movw	r2, #65535
 228 0006 9342     		cmp	r3, r2
 229 0008 03D0     		beq	.L14
 113:..//kernel/core/tos_priority_queue.c ****         return PRIO_Q_POOL_SLOT_INVALID;
 114:..//kernel/core/tos_priority_queue.c ****     }
 115:..//kernel/core/tos_priority_queue.c **** 
 116:..//kernel/core/tos_priority_queue.c ****     fresh = pool_mgr->first_free;
 230              		.loc 1 116 5 is_stmt 1 view .LVU65
 231              	.LVL20:
 117:..//kernel/core/tos_priority_queue.c ****     first_free = &pool_mgr->pool_mgr_ent_array[pool_mgr->first_free];
 232              		.loc 1 117 5 view .LVU66
 233              		.loc 1 117 27 is_stmt 0 view .LVU67
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 7


 234 000a 4268     		ldr	r2, [r0, #4]
 235              	.LVL21:
 118:..//kernel/core/tos_priority_queue.c ****     pool_mgr->first_free = first_free->next;
 236              		.loc 1 118 5 is_stmt 1 view .LVU68
 237              		.loc 1 118 38 is_stmt 0 view .LVU69
 238 000c 32F81320 		ldrh	r2, [r2, r3, lsl #1]
 239              	.LVL22:
 240              		.loc 1 118 26 view .LVU70
 241 0010 0280     		strh	r2, [r0]	@ movhi
 119:..//kernel/core/tos_priority_queue.c **** 
 120:..//kernel/core/tos_priority_queue.c ****     return fresh;
 242              		.loc 1 120 5 is_stmt 1 view .LVU71
 243              	.LVL23:
 244              	.L14:
 121:..//kernel/core/tos_priority_queue.c **** }
 245              		.loc 1 121 1 is_stmt 0 view .LVU72
 246 0012 1846     		mov	r0, r3
 247              	.LVL24:
 248              		.loc 1 121 1 view .LVU73
 249 0014 7047     		bx	lr
 250              		.cfi_endproc
 251              	.LFE121:
 253              		.section	.text.prio_q_pool_mgr_slot_free,"ax",%progbits
 254              		.align	1
 255              		.syntax unified
 256              		.thumb
 257              		.thumb_func
 258              		.fpu softvfp
 260              	prio_q_pool_mgr_slot_free:
 261              	.LVL25:
 262              	.LFB122:
 122:..//kernel/core/tos_priority_queue.c **** 
 123:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_pool_mgr_slot_free(prio_q_pool_mgr_t *pool_mgr, prio_q_slot_t slot)
 124:..//kernel/core/tos_priority_queue.c **** {
 263              		.loc 1 124 1 is_stmt 1 view -0
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 0
 266              		@ frame_needed = 0, uses_anonymous_args = 0
 267              		@ link register save eliminated.
 125:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_ent_t *slot_entry;
 268              		.loc 1 125 5 view .LVU75
 126:..//kernel/core/tos_priority_queue.c **** 
 127:..//kernel/core/tos_priority_queue.c ****     slot_entry = &pool_mgr->pool_mgr_ent_array[slot];
 269              		.loc 1 127 5 view .LVU76
 270              		.loc 1 127 27 is_stmt 0 view .LVU77
 271 0000 4368     		ldr	r3, [r0, #4]
 272              	.LVL26:
 128:..//kernel/core/tos_priority_queue.c ****     slot_entry->next = pool_mgr->first_free;
 273              		.loc 1 128 5 is_stmt 1 view .LVU78
 274              		.loc 1 128 32 is_stmt 0 view .LVU79
 275 0002 0288     		ldrh	r2, [r0]
 276              		.loc 1 128 22 view .LVU80
 277 0004 23F81120 		strh	r2, [r3, r1, lsl #1]	@ movhi
 129:..//kernel/core/tos_priority_queue.c ****     pool_mgr->first_free = slot;
 278              		.loc 1 129 5 is_stmt 1 view .LVU81
 279              		.loc 1 129 26 is_stmt 0 view .LVU82
 280 0008 0180     		strh	r1, [r0]	@ movhi
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 8


 130:..//kernel/core/tos_priority_queue.c **** }
 281              		.loc 1 130 1 view .LVU83
 282 000a 7047     		bx	lr
 283              		.cfi_endproc
 284              	.LFE122:
 286              		.section	.text.prio_q_prio_mgr_init,"ax",%progbits
 287              		.align	1
 288              		.syntax unified
 289              		.thumb
 290              		.thumb_func
 291              		.fpu softvfp
 293              	prio_q_prio_mgr_init:
 294              	.LVL27:
 295              	.LFB118:
  91:..//kernel/core/tos_priority_queue.c ****     prio_mgr->prio_mgr_ent_pool = prio_mgr_ent_pool;
 296              		.loc 1 91 1 is_stmt 1 view -0
 297              		.cfi_startproc
 298              		@ args = 0, pretend = 0, frame = 0
 299              		@ frame_needed = 0, uses_anonymous_args = 0
  91:..//kernel/core/tos_priority_queue.c ****     prio_mgr->prio_mgr_ent_pool = prio_mgr_ent_pool;
 300              		.loc 1 91 1 is_stmt 0 view .LVU85
 301 0000 00B5     		push	{lr}
 302              	.LCFI0:
 303              		.cfi_def_cfa_offset 4
 304              		.cfi_offset 14, -4
 305 0002 83B0     		sub	sp, sp, #12
 306              	.LCFI1:
 307              		.cfi_def_cfa_offset 16
  92:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_create(&prio_mgr->prio_mgr_bin_heap, prio_mgr_ent_pool, item_cnt, sizeof(prio_q_pr
 308              		.loc 1 92 5 is_stmt 1 view .LVU86
  92:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_create(&prio_mgr->prio_mgr_bin_heap, prio_mgr_ent_pool, item_cnt, sizeof(prio_q_pr
 309              		.loc 1 92 33 is_stmt 0 view .LVU87
 310 0004 8161     		str	r1, [r0, #24]
  93:..//kernel/core/tos_priority_queue.c **** }
 311              		.loc 1 93 5 is_stmt 1 view .LVU88
 312 0006 044B     		ldr	r3, .L18
 313 0008 0093     		str	r3, [sp]
 314 000a 0423     		movs	r3, #4
 315 000c FFF7FEFF 		bl	tos_bin_heap_create
 316              	.LVL28:
  94:..//kernel/core/tos_priority_queue.c **** 
 317              		.loc 1 94 1 is_stmt 0 view .LVU89
 318 0010 03B0     		add	sp, sp, #12
 319              	.LCFI2:
 320              		.cfi_def_cfa_offset 4
 321              		@ sp needed
 322 0012 5DF804FB 		ldr	pc, [sp], #4
 323              	.L19:
 324 0016 00BF     		.align	2
 325              	.L18:
 326 0018 00000000 		.word	prio_q_mgr_entry_cmp
 327              		.cfi_endproc
 328              	.LFE118:
 330              		.section	.text.prio_q_prio_mgr_deinit,"ax",%progbits
 331              		.align	1
 332              		.syntax unified
 333              		.thumb
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 9


 334              		.thumb_func
 335              		.fpu softvfp
 337              	prio_q_prio_mgr_deinit:
 338              	.LVL29:
 339              	.LFB120:
 102:..//kernel/core/tos_priority_queue.c ****     prio_mgr->prio_mgr_ent_pool = K_NULL;
 340              		.loc 1 102 1 is_stmt 1 view -0
 341              		.cfi_startproc
 342              		@ args = 0, pretend = 0, frame = 0
 343              		@ frame_needed = 0, uses_anonymous_args = 0
 102:..//kernel/core/tos_priority_queue.c ****     prio_mgr->prio_mgr_ent_pool = K_NULL;
 344              		.loc 1 102 1 is_stmt 0 view .LVU91
 345 0000 08B5     		push	{r3, lr}
 346              	.LCFI3:
 347              		.cfi_def_cfa_offset 8
 348              		.cfi_offset 3, -8
 349              		.cfi_offset 14, -4
 103:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_destroy(&prio_mgr->prio_mgr_bin_heap);
 350              		.loc 1 103 5 is_stmt 1 view .LVU92
 103:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_destroy(&prio_mgr->prio_mgr_bin_heap);
 351              		.loc 1 103 33 is_stmt 0 view .LVU93
 352 0002 0022     		movs	r2, #0
 353 0004 8261     		str	r2, [r0, #24]
 104:..//kernel/core/tos_priority_queue.c **** }
 354              		.loc 1 104 5 is_stmt 1 view .LVU94
 355 0006 FFF7FEFF 		bl	tos_bin_heap_destroy
 356              	.LVL30:
 105:..//kernel/core/tos_priority_queue.c **** 
 357              		.loc 1 105 1 is_stmt 0 view .LVU95
 358 000a 08BD     		pop	{r3, pc}
 359              		.cfi_endproc
 360              	.LFE120:
 362              		.section	.text.prio_q_do_dequeue,"ax",%progbits
 363              		.align	1
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 367              		.fpu softvfp
 369              	prio_q_do_dequeue:
 370              	.LVL31:
 371              	.LFB131:
 131:..//kernel/core/tos_priority_queue.c **** 
 132:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_prio_mgr_slot_enqueue(prio_q_prio_mgr_t *prio_mgr, prio_q_slot_t slot, k_pri
 133:..//kernel/core/tos_priority_queue.c **** {
 134:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
 135:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t prio_mgr_entry;
 136:..//kernel/core/tos_priority_queue.c **** 
 137:..//kernel/core/tos_priority_queue.c ****     prio_mgr_entry.priority = prio;
 138:..//kernel/core/tos_priority_queue.c ****     prio_mgr_entry.slot     = slot;
 139:..//kernel/core/tos_priority_queue.c **** 
 140:..//kernel/core/tos_priority_queue.c ****     err = tos_bin_heap_push(&prio_mgr->prio_mgr_bin_heap, &prio_mgr_entry, sizeof(prio_q_prio_mgr_e
 141:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 142:..//kernel/core/tos_priority_queue.c **** }
 143:..//kernel/core/tos_priority_queue.c **** 
 144:..//kernel/core/tos_priority_queue.c **** __STATIC__ prio_q_slot_t prio_q_prio_mgr_slot_dequeue(prio_q_prio_mgr_t *prio_mgr, k_prio_t *prio)
 145:..//kernel/core/tos_priority_queue.c **** {
 146:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 10


 147:..//kernel/core/tos_priority_queue.c ****     size_t dummy;
 148:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t prio_mgr_entry;
 149:..//kernel/core/tos_priority_queue.c **** 
 150:..//kernel/core/tos_priority_queue.c ****     err = tos_bin_heap_pop(&prio_mgr->prio_mgr_bin_heap, &prio_mgr_entry, &dummy);
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 152:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 153:..//kernel/core/tos_priority_queue.c **** 
 154:..//kernel/core/tos_priority_queue.c ****     if (prio) {
 155:..//kernel/core/tos_priority_queue.c ****         *prio = prio_mgr_entry.priority;
 156:..//kernel/core/tos_priority_queue.c ****     }
 157:..//kernel/core/tos_priority_queue.c **** 
 158:..//kernel/core/tos_priority_queue.c ****     return prio_mgr_entry.slot;
 159:..//kernel/core/tos_priority_queue.c **** }
 160:..//kernel/core/tos_priority_queue.c **** 
 161:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_create(k_prio_q_t *prio_q, void *mgr_array, void *pool, size_t item_cnt,
 162:..//kernel/core/tos_priority_queue.c **** {
 163:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_ent_t *pool_mgr_ent_array;
 164:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t *prio_mgr_ent_pool;
 165:..//kernel/core/tos_priority_queue.c **** 
 166:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 167:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(mgr_array);
 168:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(pool);
 169:..//kernel/core/tos_priority_queue.c **** 
 170:..//kernel/core/tos_priority_queue.c ****     pool_mgr_ent_array  = (prio_q_pool_mgr_ent_t *)mgr_array;
 171:..//kernel/core/tos_priority_queue.c ****     prio_mgr_ent_pool   = (prio_q_prio_mgr_ent_t *)((uint8_t *)mgr_array + PRIO_Q_POOL_MGR_ENT_ARRA
 172:..//kernel/core/tos_priority_queue.c **** 
 173:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_init(&prio_q->pool_mgr, pool_mgr_ent_array, item_cnt);
 174:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_init(&prio_q->prio_mgr, prio_mgr_ent_pool, item_cnt);
 175:..//kernel/core/tos_priority_queue.c **** 
 176:..//kernel/core/tos_priority_queue.c ****     prio_q->total       = 0;
 177:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = item_size;
 178:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = item_cnt;
 179:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = (uint8_t *)mgr_array;
 180:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = (uint8_t *)pool;
 181:..//kernel/core/tos_priority_queue.c **** 
 182:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_INIT(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 183:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_set_static(&prio_q->knl_obj);
 184:..//kernel/core/tos_priority_queue.c **** 
 185:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 186:..//kernel/core/tos_priority_queue.c **** }
 187:..//kernel/core/tos_priority_queue.c **** 
 188:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_destroy(k_prio_q_t *prio_q)
 189:..//kernel/core/tos_priority_queue.c **** {
 190:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 191:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 192:..//kernel/core/tos_priority_queue.c **** 
 193:..//kernel/core/tos_priority_queue.c ****     if (!knl_object_alloc_is_static(&prio_q->knl_obj)) {
 194:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 195:..//kernel/core/tos_priority_queue.c ****     }
 196:..//kernel/core/tos_priority_queue.c **** 
 197:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_deinit(&prio_q->pool_mgr);
 198:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_deinit(&prio_q->prio_mgr);
 199:..//kernel/core/tos_priority_queue.c **** 
 200:..//kernel/core/tos_priority_queue.c ****     prio_q->total       = 0;
 201:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = 0;
 202:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = 0;
 203:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = K_NULL;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 11


 204:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = K_NULL;
 205:..//kernel/core/tos_priority_queue.c **** 
 206:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_DEINIT(prio_q);
 207:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_reset(&prio_q->knl_obj);
 208:..//kernel/core/tos_priority_queue.c **** 
 209:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 210:..//kernel/core/tos_priority_queue.c **** }
 211:..//kernel/core/tos_priority_queue.c **** 
 212:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_create_dyn(k_prio_q_t *prio_q, size_t item_cnt, size_t item_size)
 213:..//kernel/core/tos_priority_queue.c **** {
 214:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
 215:..//kernel/core/tos_priority_queue.c ****     void *mgr_pool, *data_pool;
 216:..//kernel/core/tos_priority_queue.c **** 
 217:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 218:..//kernel/core/tos_priority_queue.c **** 
 219:..//kernel/core/tos_priority_queue.c ****     mgr_pool = tos_mmheap_alloc(TOS_PRIO_Q_MGR_ARRAY_SIZE(item_cnt));
 220:..//kernel/core/tos_priority_queue.c ****     if (!mgr_pool) {
 221:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 222:..//kernel/core/tos_priority_queue.c ****     }
 223:..//kernel/core/tos_priority_queue.c **** 
 224:..//kernel/core/tos_priority_queue.c ****     data_pool = tos_mmheap_alloc(item_cnt * item_size);
 225:..//kernel/core/tos_priority_queue.c ****     if (!data_pool) {
 226:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(mgr_pool);
 227:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 228:..//kernel/core/tos_priority_queue.c ****     }
 229:..//kernel/core/tos_priority_queue.c **** 
 230:..//kernel/core/tos_priority_queue.c ****     err = tos_prio_q_create(prio_q, mgr_pool, data_pool, item_cnt, item_size);
 231:..//kernel/core/tos_priority_queue.c ****     if (err != K_ERR_NONE) {
 232:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(data_pool);
 233:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(mgr_pool);
 234:..//kernel/core/tos_priority_queue.c ****     }
 235:..//kernel/core/tos_priority_queue.c **** 
 236:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_set_dynamic(&prio_q->knl_obj);
 237:..//kernel/core/tos_priority_queue.c **** 
 238:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 239:..//kernel/core/tos_priority_queue.c **** }
 240:..//kernel/core/tos_priority_queue.c **** 
 241:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_destroy_dyn(k_prio_q_t *prio_q)
 242:..//kernel/core/tos_priority_queue.c **** {
 243:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 244:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 245:..//kernel/core/tos_priority_queue.c **** 
 246:..//kernel/core/tos_priority_queue.c ****     if (!knl_object_alloc_is_dynamic(&prio_q->knl_obj)) {
 247:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 248:..//kernel/core/tos_priority_queue.c ****     }
 249:..//kernel/core/tos_priority_queue.c **** 
 250:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_deinit(&prio_q->pool_mgr);
 251:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_deinit(&prio_q->prio_mgr);
 252:..//kernel/core/tos_priority_queue.c **** 
 253:..//kernel/core/tos_priority_queue.c ****     tos_mmheap_free(prio_q->mgr_pool);
 254:..//kernel/core/tos_priority_queue.c ****     tos_mmheap_free(prio_q->data_pool);
 255:..//kernel/core/tos_priority_queue.c **** 
 256:..//kernel/core/tos_priority_queue.c ****     prio_q->total       = 0;
 257:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = 0;
 258:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = 0;
 259:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = K_NULL;
 260:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = K_NULL;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 12


 261:..//kernel/core/tos_priority_queue.c **** 
 262:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_DEINIT(prio_q);
 263:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_reset(&prio_q->knl_obj);
 264:..//kernel/core/tos_priority_queue.c **** 
 265:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 266:..//kernel/core/tos_priority_queue.c **** }
 267:..//kernel/core/tos_priority_queue.c **** 
 268:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_do_enqueue(k_prio_q_t *prio_q, void *item, prio_q_slot_t slot, k_prio_t prio
 269:..//kernel/core/tos_priority_queue.c **** {
 270:..//kernel/core/tos_priority_queue.c ****     prio_q_item_copy_from(prio_q, item, slot);
 271:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_slot_enqueue(&prio_q->prio_mgr, slot, prio);
 272:..//kernel/core/tos_priority_queue.c ****     prio_q_item_increase(prio_q);
 273:..//kernel/core/tos_priority_queue.c **** }
 274:..//kernel/core/tos_priority_queue.c **** 
 275:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_enqueue(k_prio_q_t *prio_q, void *item, size_t item_size, k_prio_t prio)
 276:..//kernel/core/tos_priority_queue.c **** {
 277:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 278:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t the_slot;
 279:..//kernel/core/tos_priority_queue.c **** 
 280:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 281:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 282:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 283:..//kernel/core/tos_priority_queue.c **** 
 284:..//kernel/core/tos_priority_queue.c ****     if (item_size != prio_q->item_size) {
 285:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_ITEM_SIZE_NOT_MATCH;
 286:..//kernel/core/tos_priority_queue.c ****     }
 287:..//kernel/core/tos_priority_queue.c **** 
 288:..//kernel/core/tos_priority_queue.c ****     if (tos_prio_q_is_full(prio_q)) {
 289:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_FULL;
 290:..//kernel/core/tos_priority_queue.c ****     }
 291:..//kernel/core/tos_priority_queue.c **** 
 292:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_DISABLE();
 293:..//kernel/core/tos_priority_queue.c **** 
 294:..//kernel/core/tos_priority_queue.c ****     the_slot = prio_q_pool_mgr_slot_alloc(&prio_q->pool_mgr);
 295:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(the_slot != PRIO_Q_POOL_SLOT_INVALID);
 296:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 297:..//kernel/core/tos_priority_queue.c **** 
 298:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 299:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 300:..//kernel/core/tos_priority_queue.c **** }
 301:..//kernel/core/tos_priority_queue.c **** 
 302:..//kernel/core/tos_priority_queue.c **** __STATIC__ void prio_q_do_dequeue(k_prio_q_t *prio_q, void *item, size_t *item_size, prio_q_slot_t 
 303:..//kernel/core/tos_priority_queue.c **** {
 372              		.loc 1 303 1 is_stmt 1 view -0
 373              		.cfi_startproc
 374              		@ args = 0, pretend = 0, frame = 0
 375              		@ frame_needed = 0, uses_anonymous_args = 0
 376              		.loc 1 303 1 is_stmt 0 view .LVU97
 377 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 378              	.LCFI4:
 379              		.cfi_def_cfa_offset 24
 380              		.cfi_offset 3, -24
 381              		.cfi_offset 4, -20
 382              		.cfi_offset 5, -16
 383              		.cfi_offset 6, -12
 384              		.cfi_offset 7, -8
 385              		.cfi_offset 14, -4
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 13


 386 0002 0446     		mov	r4, r0
 387 0004 0F46     		mov	r7, r1
 388 0006 1646     		mov	r6, r2
 389 0008 1D46     		mov	r5, r3
 304:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_slot_free(&prio_q->pool_mgr, slot);
 390              		.loc 1 304 5 is_stmt 1 view .LVU98
 391 000a 1946     		mov	r1, r3
 392              	.LVL32:
 393              		.loc 1 304 5 is_stmt 0 view .LVU99
 394 000c 0430     		adds	r0, r0, #4
 395              	.LVL33:
 396              		.loc 1 304 5 view .LVU100
 397 000e FFF7FEFF 		bl	prio_q_pool_mgr_slot_free
 398              	.LVL34:
 305:..//kernel/core/tos_priority_queue.c ****     prio_q_item_copy_to(prio_q, item, item_size, slot);
 399              		.loc 1 305 5 is_stmt 1 view .LVU101
 400              	.LBB42:
 401              	.LBI42:
  20:..//kernel/core/tos_priority_queue.c **** {
 402              		.loc 1 20 24 view .LVU102
 403              	.LBB43:
  22:..//kernel/core/tos_priority_queue.c ****     if (item_size) {
 404              		.loc 1 22 5 view .LVU103
  22:..//kernel/core/tos_priority_queue.c ****     if (item_size) {
 405              		.loc 1 22 22 is_stmt 0 view .LVU104
 406 0012 A16B     		ldr	r1, [r4, #56]
 407 0014 E36A     		ldr	r3, [r4, #44]
  22:..//kernel/core/tos_priority_queue.c ****     if (item_size) {
 408              		.loc 1 22 5 view .LVU105
 409 0016 1A46     		mov	r2, r3
 410 0018 03FB0511 		mla	r1, r3, r5, r1
 411 001c 3846     		mov	r0, r7
 412 001e FFF7FEFF 		bl	memcpy
 413              	.LVL35:
  23:..//kernel/core/tos_priority_queue.c ****         *item_size = prio_q->item_size;
 414              		.loc 1 23 5 is_stmt 1 view .LVU106
  23:..//kernel/core/tos_priority_queue.c ****         *item_size = prio_q->item_size;
 415              		.loc 1 23 8 is_stmt 0 view .LVU107
 416 0022 0EB1     		cbz	r6, .L23
  24:..//kernel/core/tos_priority_queue.c ****     }
 417              		.loc 1 24 9 is_stmt 1 view .LVU108
  24:..//kernel/core/tos_priority_queue.c ****     }
 418              		.loc 1 24 28 is_stmt 0 view .LVU109
 419 0024 E36A     		ldr	r3, [r4, #44]
  24:..//kernel/core/tos_priority_queue.c ****     }
 420              		.loc 1 24 20 view .LVU110
 421 0026 3360     		str	r3, [r6]
 422              	.L23:
 423              	.LVL36:
  24:..//kernel/core/tos_priority_queue.c ****     }
 424              		.loc 1 24 20 view .LVU111
 425              	.LBE43:
 426              	.LBE42:
 306:..//kernel/core/tos_priority_queue.c ****     prio_q_item_decrease(prio_q);
 427              		.loc 1 306 5 is_stmt 1 view .LVU112
 428              	.LBB44:
 429              	.LBI44:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 14


  38:..//kernel/core/tos_priority_queue.c **** {
 430              		.loc 1 38 24 view .LVU113
 431              	.LBB45:
  40:..//kernel/core/tos_priority_queue.c **** }
 432              		.loc 1 40 5 view .LVU114
  40:..//kernel/core/tos_priority_queue.c **** }
 433              		.loc 1 40 13 is_stmt 0 view .LVU115
 434 0028 A36A     		ldr	r3, [r4, #40]
  40:..//kernel/core/tos_priority_queue.c **** }
 435              		.loc 1 40 5 view .LVU116
 436 002a 013B     		subs	r3, r3, #1
 437 002c A362     		str	r3, [r4, #40]
 438              	.LVL37:
  40:..//kernel/core/tos_priority_queue.c **** }
 439              		.loc 1 40 5 view .LVU117
 440              	.LBE45:
 441              	.LBE44:
 307:..//kernel/core/tos_priority_queue.c **** }
 442              		.loc 1 307 1 view .LVU118
 443 002e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 444              		.loc 1 307 1 view .LVU119
 445              		.cfi_endproc
 446              	.LFE131:
 448              		.section	.text.prio_q_prio_mgr_slot_enqueue,"ax",%progbits
 449              		.align	1
 450              		.syntax unified
 451              		.thumb
 452              		.thumb_func
 453              		.fpu softvfp
 455              	prio_q_prio_mgr_slot_enqueue:
 456              	.LVL38:
 457              	.LFB123:
 133:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
 458              		.loc 1 133 1 is_stmt 1 view -0
 459              		.cfi_startproc
 460              		@ args = 0, pretend = 0, frame = 8
 461              		@ frame_needed = 0, uses_anonymous_args = 0
 133:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
 462              		.loc 1 133 1 is_stmt 0 view .LVU121
 463 0000 00B5     		push	{lr}
 464              	.LCFI5:
 465              		.cfi_def_cfa_offset 4
 466              		.cfi_offset 14, -4
 467 0002 83B0     		sub	sp, sp, #12
 468              	.LCFI6:
 469              		.cfi_def_cfa_offset 16
 134:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t prio_mgr_entry;
 470              		.loc 1 134 5 is_stmt 1 view .LVU122
 135:..//kernel/core/tos_priority_queue.c **** 
 471              		.loc 1 135 5 view .LVU123
 137:..//kernel/core/tos_priority_queue.c ****     prio_mgr_entry.slot     = slot;
 472              		.loc 1 137 5 view .LVU124
 137:..//kernel/core/tos_priority_queue.c ****     prio_mgr_entry.slot     = slot;
 473              		.loc 1 137 29 is_stmt 0 view .LVU125
 474 0004 8DF80420 		strb	r2, [sp, #4]
 138:..//kernel/core/tos_priority_queue.c **** 
 475              		.loc 1 138 5 is_stmt 1 view .LVU126
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 15


 138:..//kernel/core/tos_priority_queue.c **** 
 476              		.loc 1 138 29 is_stmt 0 view .LVU127
 477 0008 ADF80610 		strh	r1, [sp, #6]	@ movhi
 140:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 478              		.loc 1 140 5 is_stmt 1 view .LVU128
 140:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 479              		.loc 1 140 11 is_stmt 0 view .LVU129
 480 000c 0422     		movs	r2, #4
 481              	.LVL39:
 140:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 482              		.loc 1 140 11 view .LVU130
 483 000e 0DEB0201 		add	r1, sp, r2
 484              	.LVL40:
 140:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 485              		.loc 1 140 11 view .LVU131
 486 0012 FFF7FEFF 		bl	tos_bin_heap_push
 487              	.LVL41:
 141:..//kernel/core/tos_priority_queue.c **** }
 488              		.loc 1 141 5 is_stmt 1 view .LVU132
 489 0016 10B9     		cbnz	r0, .L29
 142:..//kernel/core/tos_priority_queue.c **** 
 490              		.loc 1 142 1 is_stmt 0 view .LVU133
 491 0018 03B0     		add	sp, sp, #12
 492              	.LCFI7:
 493              		.cfi_remember_state
 494              		.cfi_def_cfa_offset 4
 495              		@ sp needed
 496 001a 5DF804FB 		ldr	pc, [sp], #4
 497              	.L29:
 498              	.LCFI8:
 499              		.cfi_restore_state
 141:..//kernel/core/tos_priority_queue.c **** }
 500              		.loc 1 141 5 is_stmt 1 discriminator 1 view .LVU134
 501 001e 8D22     		movs	r2, #141
 502 0020 0549     		ldr	r1, .L30
 503 0022 0648     		ldr	r0, .L30+4
 504              	.LVL42:
 141:..//kernel/core/tos_priority_queue.c **** }
 505              		.loc 1 141 5 is_stmt 0 discriminator 1 view .LVU135
 506 0024 FFF7FEFF 		bl	printf
 507              	.LVL43:
 141:..//kernel/core/tos_priority_queue.c **** }
 508              		.loc 1 141 5 is_stmt 1 discriminator 1 view .LVU136
 509 0028 0A20     		movs	r0, #10
 510 002a FFF7FEFF 		bl	putchar
 511              	.LVL44:
 141:..//kernel/core/tos_priority_queue.c **** }
 512              		.loc 1 141 5 discriminator 1 view .LVU137
 141:..//kernel/core/tos_priority_queue.c **** }
 513              		.loc 1 141 5 discriminator 1 view .LVU138
 514 002e FFF7FEFF 		bl	tos_knl_sched_lock
 515              	.LVL45:
 141:..//kernel/core/tos_priority_queue.c **** }
 516              		.loc 1 141 5 discriminator 1 view .LVU139
 517 0032 FFF7FEFF 		bl	tos_cpu_int_disable
 518              	.LVL46:
 519              	.L27:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 16


 141:..//kernel/core/tos_priority_queue.c **** }
 520              		.loc 1 141 5 discriminator 1 view .LVU140
 141:..//kernel/core/tos_priority_queue.c **** }
 521              		.loc 1 141 5 discriminator 1 view .LVU141
 522 0036 FEE7     		b	.L27
 523              	.L31:
 524              		.align	2
 525              	.L30:
 526 0038 00000000 		.word	.LANCHOR0
 527 003c 00000000 		.word	.LC0
 528              		.cfi_endproc
 529              	.LFE123:
 531              		.section	.text.prio_q_do_enqueue,"ax",%progbits
 532              		.align	1
 533              		.syntax unified
 534              		.thumb
 535              		.thumb_func
 536              		.fpu softvfp
 538              	prio_q_do_enqueue:
 539              	.LVL47:
 540              	.LFB129:
 269:..//kernel/core/tos_priority_queue.c ****     prio_q_item_copy_from(prio_q, item, slot);
 541              		.loc 1 269 1 view -0
 542              		.cfi_startproc
 543              		@ args = 0, pretend = 0, frame = 0
 544              		@ frame_needed = 0, uses_anonymous_args = 0
 269:..//kernel/core/tos_priority_queue.c ****     prio_q_item_copy_from(prio_q, item, slot);
 545              		.loc 1 269 1 is_stmt 0 view .LVU143
 546 0000 70B5     		push	{r4, r5, r6, lr}
 547              	.LCFI9:
 548              		.cfi_def_cfa_offset 16
 549              		.cfi_offset 4, -16
 550              		.cfi_offset 5, -12
 551              		.cfi_offset 6, -8
 552              		.cfi_offset 14, -4
 553 0002 0446     		mov	r4, r0
 554 0004 1546     		mov	r5, r2
 555 0006 1E46     		mov	r6, r3
 270:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_slot_enqueue(&prio_q->prio_mgr, slot, prio);
 556              		.loc 1 270 5 is_stmt 1 view .LVU144
 557              	.LVL48:
 558              	.LBB46:
 559              	.LBI46:
  28:..//kernel/core/tos_priority_queue.c **** {
 560              		.loc 1 28 24 view .LVU145
 561              	.LBB47:
  30:..//kernel/core/tos_priority_queue.c **** }
 562              		.loc 1 30 5 view .LVU146
  30:..//kernel/core/tos_priority_queue.c **** }
 563              		.loc 1 30 12 is_stmt 0 view .LVU147
 564 0008 806B     		ldr	r0, [r0, #56]
 565              	.LVL49:
  30:..//kernel/core/tos_priority_queue.c **** }
 566              		.loc 1 30 12 view .LVU148
 567 000a E36A     		ldr	r3, [r4, #44]
 568              	.LVL50:
  30:..//kernel/core/tos_priority_queue.c **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 17


 569              		.loc 1 30 5 view .LVU149
 570 000c 1A46     		mov	r2, r3
 571              	.LVL51:
  30:..//kernel/core/tos_priority_queue.c **** }
 572              		.loc 1 30 5 view .LVU150
 573 000e 03FB0500 		mla	r0, r3, r5, r0
 574 0012 FFF7FEFF 		bl	memcpy
 575              	.LVL52:
  30:..//kernel/core/tos_priority_queue.c **** }
 576              		.loc 1 30 5 view .LVU151
 577              	.LBE47:
 578              	.LBE46:
 271:..//kernel/core/tos_priority_queue.c ****     prio_q_item_increase(prio_q);
 579              		.loc 1 271 5 is_stmt 1 view .LVU152
 580 0016 3246     		mov	r2, r6
 581 0018 2946     		mov	r1, r5
 582 001a 04F10C00 		add	r0, r4, #12
 583 001e FFF7FEFF 		bl	prio_q_prio_mgr_slot_enqueue
 584              	.LVL53:
 272:..//kernel/core/tos_priority_queue.c **** }
 585              		.loc 1 272 5 view .LVU153
 586              	.LBB48:
 587              	.LBI48:
  33:..//kernel/core/tos_priority_queue.c **** {
 588              		.loc 1 33 24 view .LVU154
 589              	.LBB49:
  35:..//kernel/core/tos_priority_queue.c **** }
 590              		.loc 1 35 5 view .LVU155
  35:..//kernel/core/tos_priority_queue.c **** }
 591              		.loc 1 35 13 is_stmt 0 view .LVU156
 592 0022 A36A     		ldr	r3, [r4, #40]
  35:..//kernel/core/tos_priority_queue.c **** }
 593              		.loc 1 35 5 view .LVU157
 594 0024 0133     		adds	r3, r3, #1
 595 0026 A362     		str	r3, [r4, #40]
 596              	.LVL54:
  35:..//kernel/core/tos_priority_queue.c **** }
 597              		.loc 1 35 5 view .LVU158
 598              	.LBE49:
 599              	.LBE48:
 273:..//kernel/core/tos_priority_queue.c **** 
 600              		.loc 1 273 1 view .LVU159
 601 0028 70BD     		pop	{r4, r5, r6, pc}
 273:..//kernel/core/tos_priority_queue.c **** 
 602              		.loc 1 273 1 view .LVU160
 603              		.cfi_endproc
 604              	.LFE129:
 606              		.section	.text.prio_q_prio_mgr_slot_dequeue,"ax",%progbits
 607              		.align	1
 608              		.syntax unified
 609              		.thumb
 610              		.thumb_func
 611              		.fpu softvfp
 613              	prio_q_prio_mgr_slot_dequeue:
 614              	.LVL55:
 615              	.LFB124:
 145:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 18


 616              		.loc 1 145 1 is_stmt 1 view -0
 617              		.cfi_startproc
 618              		@ args = 0, pretend = 0, frame = 8
 619              		@ frame_needed = 0, uses_anonymous_args = 0
 145:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
 620              		.loc 1 145 1 is_stmt 0 view .LVU162
 621 0000 10B5     		push	{r4, lr}
 622              	.LCFI10:
 623              		.cfi_def_cfa_offset 8
 624              		.cfi_offset 4, -8
 625              		.cfi_offset 14, -4
 626 0002 82B0     		sub	sp, sp, #8
 627              	.LCFI11:
 628              		.cfi_def_cfa_offset 16
 629 0004 0C46     		mov	r4, r1
 146:..//kernel/core/tos_priority_queue.c ****     size_t dummy;
 630              		.loc 1 146 5 is_stmt 1 view .LVU163
 147:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t prio_mgr_entry;
 631              		.loc 1 147 5 view .LVU164
 148:..//kernel/core/tos_priority_queue.c **** 
 632              		.loc 1 148 5 view .LVU165
 150:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 633              		.loc 1 150 5 view .LVU166
 150:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 634              		.loc 1 150 11 is_stmt 0 view .LVU167
 635 0006 01AA     		add	r2, sp, #4
 636 0008 6946     		mov	r1, sp
 637              	.LVL56:
 150:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(err == K_ERR_NONE);
 638              		.loc 1 150 11 view .LVU168
 639 000a FFF7FEFF 		bl	tos_bin_heap_pop
 640              	.LVL57:
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 641              		.loc 1 151 5 is_stmt 1 view .LVU169
 642 000e 50B9     		cbnz	r0, .L41
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 643              		.loc 1 151 34 discriminator 2 view .LVU170
 152:..//kernel/core/tos_priority_queue.c **** 
 644              		.loc 1 152 5 discriminator 2 view .LVU171
 645 0010 019B     		ldr	r3, [sp, #4]
 646 0012 042B     		cmp	r3, #4
 647 0014 14D1     		bne	.L42
 152:..//kernel/core/tos_priority_queue.c **** 
 648              		.loc 1 152 55 discriminator 2 view .LVU172
 154:..//kernel/core/tos_priority_queue.c ****         *prio = prio_mgr_entry.priority;
 649              		.loc 1 154 5 discriminator 2 view .LVU173
 154:..//kernel/core/tos_priority_queue.c ****         *prio = prio_mgr_entry.priority;
 650              		.loc 1 154 8 is_stmt 0 discriminator 2 view .LVU174
 651 0016 14B1     		cbz	r4, .L39
 155:..//kernel/core/tos_priority_queue.c ****     }
 652              		.loc 1 155 9 is_stmt 1 view .LVU175
 155:..//kernel/core/tos_priority_queue.c ****     }
 653              		.loc 1 155 31 is_stmt 0 view .LVU176
 654 0018 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 155:..//kernel/core/tos_priority_queue.c ****     }
 655              		.loc 1 155 15 view .LVU177
 656 001c 2370     		strb	r3, [r4]
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 19


 657              	.L39:
 158:..//kernel/core/tos_priority_queue.c **** }
 658              		.loc 1 158 5 is_stmt 1 view .LVU178
 159:..//kernel/core/tos_priority_queue.c **** 
 659              		.loc 1 159 1 is_stmt 0 view .LVU179
 660 001e BDF80200 		ldrh	r0, [sp, #2]
 661              	.LVL58:
 159:..//kernel/core/tos_priority_queue.c **** 
 662              		.loc 1 159 1 view .LVU180
 663 0022 02B0     		add	sp, sp, #8
 664              	.LCFI12:
 665              		.cfi_remember_state
 666              		.cfi_def_cfa_offset 8
 667              		@ sp needed
 668 0024 10BD     		pop	{r4, pc}
 669              	.LVL59:
 670              	.L41:
 671              	.LCFI13:
 672              		.cfi_restore_state
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 673              		.loc 1 151 5 is_stmt 1 discriminator 1 view .LVU181
 674 0026 9722     		movs	r2, #151
 675 0028 0C49     		ldr	r1, .L43
 676 002a 0D48     		ldr	r0, .L43+4
 677              	.LVL60:
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 678              		.loc 1 151 5 is_stmt 0 discriminator 1 view .LVU182
 679 002c FFF7FEFF 		bl	printf
 680              	.LVL61:
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 681              		.loc 1 151 5 is_stmt 1 discriminator 1 view .LVU183
 682 0030 0A20     		movs	r0, #10
 683 0032 FFF7FEFF 		bl	putchar
 684              	.LVL62:
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 685              		.loc 1 151 5 discriminator 1 view .LVU184
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 686              		.loc 1 151 5 discriminator 1 view .LVU185
 687 0036 FFF7FEFF 		bl	tos_knl_sched_lock
 688              	.LVL63:
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 689              		.loc 1 151 5 discriminator 1 view .LVU186
 690 003a FFF7FEFF 		bl	tos_cpu_int_disable
 691              	.LVL64:
 692              	.L36:
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 693              		.loc 1 151 5 discriminator 1 view .LVU187
 151:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(dummy == sizeof(prio_q_prio_mgr_ent_t));
 694              		.loc 1 151 5 discriminator 1 view .LVU188
 695 003e FEE7     		b	.L36
 696              	.LVL65:
 697              	.L42:
 152:..//kernel/core/tos_priority_queue.c **** 
 698              		.loc 1 152 5 discriminator 1 view .LVU189
 699 0040 9822     		movs	r2, #152
 700 0042 0649     		ldr	r1, .L43
 701 0044 0648     		ldr	r0, .L43+4
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 20


 702              	.LVL66:
 152:..//kernel/core/tos_priority_queue.c **** 
 703              		.loc 1 152 5 is_stmt 0 discriminator 1 view .LVU190
 704 0046 FFF7FEFF 		bl	printf
 705              	.LVL67:
 152:..//kernel/core/tos_priority_queue.c **** 
 706              		.loc 1 152 5 is_stmt 1 discriminator 1 view .LVU191
 707 004a 0A20     		movs	r0, #10
 708 004c FFF7FEFF 		bl	putchar
 709              	.LVL68:
 152:..//kernel/core/tos_priority_queue.c **** 
 710              		.loc 1 152 5 discriminator 1 view .LVU192
 152:..//kernel/core/tos_priority_queue.c **** 
 711              		.loc 1 152 5 discriminator 1 view .LVU193
 712 0050 FFF7FEFF 		bl	tos_knl_sched_lock
 713              	.LVL69:
 152:..//kernel/core/tos_priority_queue.c **** 
 714              		.loc 1 152 5 discriminator 1 view .LVU194
 715 0054 FFF7FEFF 		bl	tos_cpu_int_disable
 716              	.LVL70:
 717              	.L38:
 152:..//kernel/core/tos_priority_queue.c **** 
 718              		.loc 1 152 5 discriminator 2 view .LVU195
 152:..//kernel/core/tos_priority_queue.c **** 
 719              		.loc 1 152 5 discriminator 2 view .LVU196
 720 0058 FEE7     		b	.L38
 721              	.L44:
 722 005a 00BF     		.align	2
 723              	.L43:
 724 005c 00000000 		.word	.LANCHOR1
 725 0060 00000000 		.word	.LC0
 726              		.cfi_endproc
 727              	.LFE124:
 729              		.section	.text.prio_q_prio_mgr_reset,"ax",%progbits
 730              		.align	1
 731              		.syntax unified
 732              		.thumb
 733              		.thumb_func
 734              		.fpu softvfp
 736              	prio_q_prio_mgr_reset:
 737              	.LVL71:
 738              	.LFB119:
  97:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_flush(&prio_mgr->prio_mgr_bin_heap);
 739              		.loc 1 97 1 view -0
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 0
 742              		@ frame_needed = 0, uses_anonymous_args = 0
  97:..//kernel/core/tos_priority_queue.c ****     tos_bin_heap_flush(&prio_mgr->prio_mgr_bin_heap);
 743              		.loc 1 97 1 is_stmt 0 view .LVU198
 744 0000 08B5     		push	{r3, lr}
 745              	.LCFI14:
 746              		.cfi_def_cfa_offset 8
 747              		.cfi_offset 3, -8
 748              		.cfi_offset 14, -4
  98:..//kernel/core/tos_priority_queue.c **** }
 749              		.loc 1 98 5 is_stmt 1 view .LVU199
 750 0002 FFF7FEFF 		bl	tos_bin_heap_flush
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 21


 751              	.LVL72:
  99:..//kernel/core/tos_priority_queue.c **** 
 752              		.loc 1 99 1 is_stmt 0 view .LVU200
 753 0006 08BD     		pop	{r3, pc}
 754              		.cfi_endproc
 755              	.LFE119:
 757              		.section	.text.tos_prio_q_create,"ax",%progbits
 758              		.align	1
 759              		.global	tos_prio_q_create
 760              		.syntax unified
 761              		.thumb
 762              		.thumb_func
 763              		.fpu softvfp
 765              	tos_prio_q_create:
 766              	.LVL73:
 767              	.LFB125:
 162:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_ent_t *pool_mgr_ent_array;
 768              		.loc 1 162 1 is_stmt 1 view -0
 769              		.cfi_startproc
 770              		@ args = 4, pretend = 0, frame = 0
 771              		@ frame_needed = 0, uses_anonymous_args = 0
 163:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_ent_t *prio_mgr_ent_pool;
 772              		.loc 1 163 5 view .LVU202
 164:..//kernel/core/tos_priority_queue.c **** 
 773              		.loc 1 164 5 view .LVU203
 166:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(mgr_array);
 774              		.loc 1 166 5 view .LVU204
 166:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(mgr_array);
 775              		.loc 1 166 5 view .LVU205
 776 0000 08B3     		cbz	r0, .L49
 162:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_ent_t *pool_mgr_ent_array;
 777              		.loc 1 162 1 is_stmt 0 view .LVU206
 778 0002 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 779              	.LCFI15:
 780              		.cfi_def_cfa_offset 24
 781              		.cfi_offset 4, -24
 782              		.cfi_offset 5, -20
 783              		.cfi_offset 6, -16
 784              		.cfi_offset 7, -12
 785              		.cfi_offset 8, -8
 786              		.cfi_offset 14, -4
 787 0006 0446     		mov	r4, r0
 167:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(pool);
 788              		.loc 1 167 5 is_stmt 1 view .LVU207
 167:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(pool);
 789              		.loc 1 167 5 view .LVU208
 790 0008 01B3     		cbz	r1, .L50
 168:..//kernel/core/tos_priority_queue.c **** 
 791              		.loc 1 168 5 view .LVU209
 168:..//kernel/core/tos_priority_queue.c **** 
 792              		.loc 1 168 5 view .LVU210
 793 000a 12B3     		cbz	r2, .L51
 794 000c 1E46     		mov	r6, r3
 795 000e 1746     		mov	r7, r2
 796 0010 0D46     		mov	r5, r1
 170:..//kernel/core/tos_priority_queue.c ****     prio_mgr_ent_pool   = (prio_q_prio_mgr_ent_t *)((uint8_t *)mgr_array + PRIO_Q_POOL_MGR_ENT_ARRA
 797              		.loc 1 170 5 view .LVU211
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 22


 798              	.LVL74:
 171:..//kernel/core/tos_priority_queue.c **** 
 799              		.loc 1 171 5 view .LVU212
 171:..//kernel/core/tos_priority_queue.c **** 
 800              		.loc 1 171 25 is_stmt 0 view .LVU213
 801 0012 01EB4308 		add	r8, r1, r3, lsl #1
 802              	.LVL75:
 173:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_init(&prio_q->prio_mgr, prio_mgr_ent_pool, item_cnt);
 803              		.loc 1 173 5 is_stmt 1 view .LVU214
 804 0016 1A46     		mov	r2, r3
 805              	.LVL76:
 173:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_init(&prio_q->prio_mgr, prio_mgr_ent_pool, item_cnt);
 806              		.loc 1 173 5 is_stmt 0 view .LVU215
 807 0018 0430     		adds	r0, r0, #4
 808              	.LVL77:
 173:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_init(&prio_q->prio_mgr, prio_mgr_ent_pool, item_cnt);
 809              		.loc 1 173 5 view .LVU216
 810 001a FFF7FEFF 		bl	prio_q_pool_mgr_init
 811              	.LVL78:
 174:..//kernel/core/tos_priority_queue.c **** 
 812              		.loc 1 174 5 is_stmt 1 view .LVU217
 813 001e 3246     		mov	r2, r6
 814 0020 4146     		mov	r1, r8
 815 0022 04F10C00 		add	r0, r4, #12
 816 0026 FFF7FEFF 		bl	prio_q_prio_mgr_init
 817              	.LVL79:
 176:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = item_size;
 818              		.loc 1 176 5 view .LVU218
 176:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = item_size;
 819              		.loc 1 176 25 is_stmt 0 view .LVU219
 820 002a 0020     		movs	r0, #0
 821 002c A062     		str	r0, [r4, #40]
 177:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = item_cnt;
 822              		.loc 1 177 5 is_stmt 1 view .LVU220
 177:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = item_cnt;
 823              		.loc 1 177 25 is_stmt 0 view .LVU221
 824 002e 069B     		ldr	r3, [sp, #24]
 825 0030 E362     		str	r3, [r4, #44]
 178:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = (uint8_t *)mgr_array;
 826              		.loc 1 178 5 is_stmt 1 view .LVU222
 178:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = (uint8_t *)mgr_array;
 827              		.loc 1 178 25 is_stmt 0 view .LVU223
 828 0032 2663     		str	r6, [r4, #48]
 179:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = (uint8_t *)pool;
 829              		.loc 1 179 5 is_stmt 1 view .LVU224
 179:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = (uint8_t *)pool;
 830              		.loc 1 179 25 is_stmt 0 view .LVU225
 831 0034 6563     		str	r5, [r4, #52]
 180:..//kernel/core/tos_priority_queue.c **** 
 832              		.loc 1 180 5 is_stmt 1 view .LVU226
 180:..//kernel/core/tos_priority_queue.c **** 
 833              		.loc 1 180 25 is_stmt 0 view .LVU227
 834 0036 A763     		str	r7, [r4, #56]
 182:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_set_static(&prio_q->knl_obj);
 835              		.loc 1 182 5 is_stmt 1 view .LVU228
 836              	.LVL80:
 837              	.LBB50:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 23


 838              	.LBI50:
 839              		.file 2 "..//kernel/core/include/tos_sys.h"
   1:..//kernel/core/include/tos_sys.h **** /*----------------------------------------------------------------------------
   2:..//kernel/core/include/tos_sys.h ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/include/tos_sys.h ****  * available.
   4:..//kernel/core/include/tos_sys.h ****  *
   5:..//kernel/core/include/tos_sys.h ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/include/tos_sys.h ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/include/tos_sys.h ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/include/tos_sys.h ****  *
   9:..//kernel/core/include/tos_sys.h ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/include/tos_sys.h ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/include/tos_sys.h ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/include/tos_sys.h ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/include/tos_sys.h ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/include/tos_sys.h ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/include/tos_sys.h ****  * within TencentOS.
  16:..//kernel/core/include/tos_sys.h ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/include/tos_sys.h **** 
  18:..//kernel/core/include/tos_sys.h **** #ifndef _TOS_SYS_H_
  19:..//kernel/core/include/tos_sys.h **** #define  _TOS_SYS_H_
  20:..//kernel/core/include/tos_sys.h **** 
  21:..//kernel/core/include/tos_sys.h **** __CDECLS_BEGIN
  22:..//kernel/core/include/tos_sys.h **** 
  23:..//kernel/core/include/tos_sys.h **** #define K_NESTING_LIMIT_IRQ             (k_nesting_t)250u
  24:..//kernel/core/include/tos_sys.h **** #define K_NESTING_LIMIT_SCHED_LOCK      (k_nesting_t)250u
  25:..//kernel/core/include/tos_sys.h **** 
  26:..//kernel/core/include/tos_sys.h **** typedef enum knl_state_en {
  27:..//kernel/core/include/tos_sys.h ****     KNL_STATE_STOPPED,
  28:..//kernel/core/include/tos_sys.h ****     KNL_STATE_RUNNING,
  29:..//kernel/core/include/tos_sys.h **** } knl_state_t;
  30:..//kernel/core/include/tos_sys.h **** 
  31:..//kernel/core/include/tos_sys.h **** // some kind of magic number, mainly for identifing whether the object is initialized, or whether u
  32:..//kernel/core/include/tos_sys.h **** typedef enum knl_obj_type_en {
  33:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_NONE                           = 0x0000,
  34:..//kernel/core/include/tos_sys.h **** 
  35:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BINARY_HEAP                    = 0xDAD0,
  36:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BITMAP                         = 0xDAD1,
  37:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_CHAR_FIFO                      = 0xDAD2,
  38:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MMBLK_POOL                     = 0xDAD3,
  39:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MSG_QUEUE                      = 0xDAD4,
  40:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_QUEUE                 = 0xDAD5,
  41:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_RING_QUEUE                     = 0xDAD6,
  42:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_STOPWATCH                      = 0xDAD7,
  43:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_TASK                           = 0xDAD8,
  44:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_TIMER                          = 0xDAD9,
  45:..//kernel/core/include/tos_sys.h **** 
  46:..//kernel/core/include/tos_sys.h ****     // ipc object
  47:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BARRIER                        = 0x0BEE,
  48:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_COMPLETION                     = 0x1BEE,
  49:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_COUNTDOWNLATCH                 = 0x2BEE,
  50:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_EVENT                          = 0x3BEE,
  51:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MAIL_QUEUE                     = 0x4BEE,
  52:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MESSAGE_QUEUE                  = 0x5BEE,
  53:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MUTEX                          = 0x6BEE,
  54:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE            = 0x7BEE,
  55:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_MESSAGE_QUEUE         = 0x8BEE,
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 24


  56:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_RWLOCK                         = 0x9BEE,
  57:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_SEMAPHORE                      = 0xABEE,
  58:..//kernel/core/include/tos_sys.h **** } knl_obj_type_t;
  59:..//kernel/core/include/tos_sys.h **** 
  60:..//kernel/core/include/tos_sys.h **** typedef enum knl_obj_alloc_type_en {
  61:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_NONE,
  62:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_STATIC,
  63:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_DYNAMIC,
  64:..//kernel/core/include/tos_sys.h **** } knl_obj_alloc_type_t;
  65:..//kernel/core/include/tos_sys.h **** 
  66:..//kernel/core/include/tos_sys.h **** typedef struct knl_object_st {
  67:..//kernel/core/include/tos_sys.h ****     knl_obj_alloc_type_t    alloc_type; /* is dynamic allocated(using tos_mmheap) or static memory?
  68:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_OBJECT_VERIFY_EN > 0u
  69:..//kernel/core/include/tos_sys.h ****     knl_obj_type_t          type;
  70:..//kernel/core/include/tos_sys.h **** #endif
  71:..//kernel/core/include/tos_sys.h **** } knl_obj_t;
  72:..//kernel/core/include/tos_sys.h **** 
  73:..//kernel/core/include/tos_sys.h **** /**
  74:..//kernel/core/include/tos_sys.h ****  * @brief Initialize the kernel.
  75:..//kernel/core/include/tos_sys.h ****  * initialize the tos tiny kernel.
  76:..//kernel/core/include/tos_sys.h ****  *
  77:..//kernel/core/include/tos_sys.h ****  * @attention None
  78:..//kernel/core/include/tos_sys.h ****  *
  79:..//kernel/core/include/tos_sys.h ****  * @param   None
  80:..//kernel/core/include/tos_sys.h ****  *
  81:..//kernel/core/include/tos_sys.h ****  * @return  errcode
  82:..//kernel/core/include/tos_sys.h ****  * @retval  Non-#K_ERR_NONE               return failed.
  83:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_NONE                   return successfully.
  84:..//kernel/core/include/tos_sys.h ****  */
  85:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_init(void);
  86:..//kernel/core/include/tos_sys.h **** 
  87:..//kernel/core/include/tos_sys.h **** /**
  88:..//kernel/core/include/tos_sys.h ****  * @brief Start the kernel.
  89:..//kernel/core/include/tos_sys.h ****  * get the kernel start to run, which means start the multitask scheduling.
  90:..//kernel/core/include/tos_sys.h ****  *
  91:..//kernel/core/include/tos_sys.h ****  * @attention None
  92:..//kernel/core/include/tos_sys.h ****  *
  93:..//kernel/core/include/tos_sys.h ****  * @param   None
  94:..//kernel/core/include/tos_sys.h ****  *
  95:..//kernel/core/include/tos_sys.h ****  * @return  errcode
  96:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_KNL_RUNNING            the kernel is already running.
  97:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_NONE                   return successfully.
  98:..//kernel/core/include/tos_sys.h ****  */
  99:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_start(void);
 100:..//kernel/core/include/tos_sys.h **** 
 101:..//kernel/core/include/tos_sys.h **** /**
 102:..//kernel/core/include/tos_sys.h ****  * @brief Get the kernel state.
 103:..//kernel/core/include/tos_sys.h ****  * whether the kernel is running.
 104:..//kernel/core/include/tos_sys.h ****  *
 105:..//kernel/core/include/tos_sys.h ****  * @attention None
 106:..//kernel/core/include/tos_sys.h ****  *
 107:..//kernel/core/include/tos_sys.h ****  * @param   None
 108:..//kernel/core/include/tos_sys.h ****  *
 109:..//kernel/core/include/tos_sys.h ****  * @return  whether the kernel is running.
 110:..//kernel/core/include/tos_sys.h ****  * @retval  Non-0                           the kernel is running.
 111:..//kernel/core/include/tos_sys.h ****  * @retval  0                               the kernel is not running.
 112:..//kernel/core/include/tos_sys.h ****  */
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 25


 113:..//kernel/core/include/tos_sys.h **** __API__ int     tos_knl_is_running(void);
 114:..//kernel/core/include/tos_sys.h **** 
 115:..//kernel/core/include/tos_sys.h **** /**
 116:..//kernel/core/include/tos_sys.h ****  * @brief Kernel enter the interrupt.
 117:..//kernel/core/include/tos_sys.h ****  * this function should be called in the entrance of a interrupt handler.
 118:..//kernel/core/include/tos_sys.h ****  *
 119:..//kernel/core/include/tos_sys.h ****  * @attention None
 120:..//kernel/core/include/tos_sys.h ****  *
 121:..//kernel/core/include/tos_sys.h ****  * @param   None
 122:..//kernel/core/include/tos_sys.h ****  *
 123:..//kernel/core/include/tos_sys.h ****  * @return  None
 124:..//kernel/core/include/tos_sys.h ****  */
 125:..//kernel/core/include/tos_sys.h **** __API__ void    tos_knl_irq_enter(void);
 126:..//kernel/core/include/tos_sys.h **** 
 127:..//kernel/core/include/tos_sys.h **** /**
 128:..//kernel/core/include/tos_sys.h ****  * @brief Kernel exit the interrupt.
 129:..//kernel/core/include/tos_sys.h ****  * this function should be called in the exit of a interrupt handler.
 130:..//kernel/core/include/tos_sys.h ****  *
 131:..//kernel/core/include/tos_sys.h ****  * @attention None
 132:..//kernel/core/include/tos_sys.h ****  *
 133:..//kernel/core/include/tos_sys.h ****  * @param   None
 134:..//kernel/core/include/tos_sys.h ****  *
 135:..//kernel/core/include/tos_sys.h ****  * @return  None
 136:..//kernel/core/include/tos_sys.h ****  */
 137:..//kernel/core/include/tos_sys.h **** __API__ void    tos_knl_irq_leave(void);
 138:..//kernel/core/include/tos_sys.h **** 
 139:..//kernel/core/include/tos_sys.h **** /**
 140:..//kernel/core/include/tos_sys.h ****  * @brief Lock the scheduler.
 141:..//kernel/core/include/tos_sys.h ****  * prevent the kernel from performing task schedule.
 142:..//kernel/core/include/tos_sys.h ****  *
 143:..//kernel/core/include/tos_sys.h ****  * @attention None
 144:..//kernel/core/include/tos_sys.h ****  *
 145:..//kernel/core/include/tos_sys.h ****  * @param   None
 146:..//kernel/core/include/tos_sys.h ****  *
 147:..//kernel/core/include/tos_sys.h ****  * @return  errcode
 148:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_KNL_NOT_RUNNING         the kernel is not running.
 149:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_LOCK_NESTING_OVERFLOW   the schedule lock nesting is overflow.
 150:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_NONE                    return successfully.
 151:..//kernel/core/include/tos_sys.h ****  */
 152:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_sched_lock(void);
 153:..//kernel/core/include/tos_sys.h **** 
 154:..//kernel/core/include/tos_sys.h **** /**
 155:..//kernel/core/include/tos_sys.h ****  * @brief Unlock the scheduler.
 156:..//kernel/core/include/tos_sys.h ****  * re-enable the task schedule.
 157:..//kernel/core/include/tos_sys.h ****  *
 158:..//kernel/core/include/tos_sys.h ****  * @attention None
 159:..//kernel/core/include/tos_sys.h ****  *
 160:..//kernel/core/include/tos_sys.h ****  * @param   None
 161:..//kernel/core/include/tos_sys.h ****  *
 162:..//kernel/core/include/tos_sys.h ****  * @return  errcode
 163:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_KNL_NOT_RUNNING         the kernel is not running.
 164:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_SCHED_NOT_LOCKED        the scheduler is not locked.
 165:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_NONE                    return successfully.
 166:..//kernel/core/include/tos_sys.h ****  */
 167:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_sched_unlock(void);
 168:..//kernel/core/include/tos_sys.h **** 
 169:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_TICKLESS_EN > 0u
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 26


 170:..//kernel/core/include/tos_sys.h **** __KNL__ k_tick_t knl_next_expires_get(void);
 171:..//kernel/core/include/tos_sys.h **** #endif
 172:..//kernel/core/include/tos_sys.h **** 
 173:..//kernel/core/include/tos_sys.h **** __KNL__ void    knl_sched(void);
 174:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_sched_locked(void);
 175:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_inirq(void);
 176:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_idle(k_task_t *task);
 177:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_self(k_task_t *task);
 178:..//kernel/core/include/tos_sys.h **** __KNL__ k_err_t knl_idle_init(void);
 179:..//kernel/core/include/tos_sys.h **** 
 180:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_OBJECT_VERIFY_EN > 0u
 181:..//kernel/core/include/tos_sys.h **** 
 182:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_verify(knl_obj_t *knl_obj, knl_obj_type_t type)
 183:..//kernel/core/include/tos_sys.h **** {
 184:..//kernel/core/include/tos_sys.h ****     return knl_obj->type == type;
 185:..//kernel/core/include/tos_sys.h **** }
 186:..//kernel/core/include/tos_sys.h **** 
 187:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_init(knl_obj_t *knl_obj, knl_obj_type_t type)
 840              		.loc 2 187 32 view .LVU229
 841              	.LBB51:
 188:..//kernel/core/include/tos_sys.h **** {
 189:..//kernel/core/include/tos_sys.h ****     knl_obj->type = type;
 842              		.loc 2 189 5 view .LVU230
 843              		.loc 2 189 19 is_stmt 0 view .LVU231
 844 0038 4DF6D523 		movw	r3, #56021
 845 003c 6380     		strh	r3, [r4, #2]	@ movhi
 846              	.LVL81:
 847              		.loc 2 189 19 view .LVU232
 848              	.LBE51:
 849              	.LBE50:
 183:..//kernel/core/tos_priority_queue.c **** 
 850              		.loc 1 183 5 is_stmt 1 view .LVU233
 851              	.LBB52:
 852              	.LBI52:
 190:..//kernel/core/include/tos_sys.h **** }
 191:..//kernel/core/include/tos_sys.h **** 
 192:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_deinit(knl_obj_t *knl_obj)
 193:..//kernel/core/include/tos_sys.h **** {
 194:..//kernel/core/include/tos_sys.h ****     knl_obj->type = KNL_OBJ_TYPE_NONE;
 195:..//kernel/core/include/tos_sys.h **** }
 196:..//kernel/core/include/tos_sys.h **** 
 197:..//kernel/core/include/tos_sys.h **** #endif
 198:..//kernel/core/include/tos_sys.h **** 
 199:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_alloc_reset(knl_obj_t *knl_obj)
 200:..//kernel/core/include/tos_sys.h **** {
 201:..//kernel/core/include/tos_sys.h ****     knl_obj->alloc_type = KNL_OBJ_ALLOC_TYPE_NONE;
 202:..//kernel/core/include/tos_sys.h **** }
 203:..//kernel/core/include/tos_sys.h **** 
 204:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_alloc_set_dynamic(knl_obj_t *knl_obj)
 205:..//kernel/core/include/tos_sys.h **** {
 206:..//kernel/core/include/tos_sys.h ****     knl_obj->alloc_type = KNL_OBJ_ALLOC_TYPE_DYNAMIC;
 207:..//kernel/core/include/tos_sys.h **** }
 208:..//kernel/core/include/tos_sys.h **** 
 209:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_alloc_set_static(knl_obj_t *knl_obj)
 853              		.loc 2 209 32 view .LVU234
 854              	.LBB53:
 210:..//kernel/core/include/tos_sys.h **** {
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 27


 211:..//kernel/core/include/tos_sys.h ****     knl_obj->alloc_type = KNL_OBJ_ALLOC_TYPE_STATIC;
 855              		.loc 2 211 5 view .LVU235
 856              		.loc 2 211 25 is_stmt 0 view .LVU236
 857 003e 0123     		movs	r3, #1
 858 0040 2370     		strb	r3, [r4]
 859              	.LVL82:
 860              		.loc 2 211 25 view .LVU237
 861              	.LBE53:
 862              	.LBE52:
 185:..//kernel/core/tos_priority_queue.c **** }
 863              		.loc 1 185 5 is_stmt 1 view .LVU238
 864              	.L48:
 186:..//kernel/core/tos_priority_queue.c **** 
 865              		.loc 1 186 1 is_stmt 0 view .LVU239
 866 0042 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 867              	.LVL83:
 868              	.L49:
 869              	.LCFI16:
 870              		.cfi_def_cfa_offset 0
 871              		.cfi_restore 4
 872              		.cfi_restore 5
 873              		.cfi_restore 6
 874              		.cfi_restore 7
 875              		.cfi_restore 8
 876              		.cfi_restore 14
 166:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(mgr_array);
 877              		.loc 1 166 5 view .LVU240
 878 0046 40F24C40 		movw	r0, #1100
 879              	.LVL84:
 186:..//kernel/core/tos_priority_queue.c **** 
 880              		.loc 1 186 1 view .LVU241
 881 004a 7047     		bx	lr
 882              	.LVL85:
 883              	.L50:
 884              	.LCFI17:
 885              		.cfi_def_cfa_offset 24
 886              		.cfi_offset 4, -24
 887              		.cfi_offset 5, -20
 888              		.cfi_offset 6, -16
 889              		.cfi_offset 7, -12
 890              		.cfi_offset 8, -8
 891              		.cfi_offset 14, -4
 167:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(pool);
 892              		.loc 1 167 5 view .LVU242
 893 004c 40F24C40 		movw	r0, #1100
 894              	.LVL86:
 167:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(pool);
 895              		.loc 1 167 5 view .LVU243
 896 0050 F7E7     		b	.L48
 897              	.LVL87:
 898              	.L51:
 168:..//kernel/core/tos_priority_queue.c **** 
 899              		.loc 1 168 5 view .LVU244
 900 0052 40F24C40 		movw	r0, #1100
 901              	.LVL88:
 168:..//kernel/core/tos_priority_queue.c **** 
 902              		.loc 1 168 5 view .LVU245
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 28


 903 0056 F4E7     		b	.L48
 904              		.cfi_endproc
 905              	.LFE125:
 907              		.section	.text.tos_prio_q_destroy,"ax",%progbits
 908              		.align	1
 909              		.global	tos_prio_q_destroy
 910              		.syntax unified
 911              		.thumb
 912              		.thumb_func
 913              		.fpu softvfp
 915              	tos_prio_q_destroy:
 916              	.LVL89:
 917              	.LFB126:
 189:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 918              		.loc 1 189 1 is_stmt 1 view -0
 919              		.cfi_startproc
 920              		@ args = 0, pretend = 0, frame = 0
 921              		@ frame_needed = 0, uses_anonymous_args = 0
 190:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 922              		.loc 1 190 5 view .LVU247
 190:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 923              		.loc 1 190 5 view .LVU248
 924 0000 E0B1     		cbz	r0, .L58
 189:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 925              		.loc 1 189 1 is_stmt 0 view .LVU249
 926 0002 10B5     		push	{r4, lr}
 927              	.LCFI18:
 928              		.cfi_def_cfa_offset 8
 929              		.cfi_offset 4, -8
 930              		.cfi_offset 14, -4
 931 0004 0446     		mov	r4, r0
 191:..//kernel/core/tos_priority_queue.c **** 
 932              		.loc 1 191 5 is_stmt 1 view .LVU250
 191:..//kernel/core/tos_priority_queue.c **** 
 933              		.loc 1 191 5 view .LVU251
 934              	.LVL90:
 935              	.LBB54:
 936              	.LBI54:
 182:..//kernel/core/include/tos_sys.h **** {
 937              		.loc 2 182 31 view .LVU252
 938              	.LBB55:
 184:..//kernel/core/include/tos_sys.h **** }
 939              		.loc 2 184 5 view .LVU253
 184:..//kernel/core/include/tos_sys.h **** }
 940              		.loc 2 184 19 is_stmt 0 view .LVU254
 941 0006 4288     		ldrh	r2, [r0, #2]
 942              	.LVL91:
 184:..//kernel/core/include/tos_sys.h **** }
 943              		.loc 2 184 19 view .LVU255
 944              	.LBE55:
 945              	.LBE54:
 191:..//kernel/core/tos_priority_queue.c **** 
 946              		.loc 1 191 5 view .LVU256
 947 0008 4DF6D523 		movw	r3, #56021
 948 000c 9A42     		cmp	r2, r3
 949 000e 18D1     		bne	.L59
 193:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 29


 950              		.loc 1 193 5 is_stmt 1 view .LVU257
 951              	.LVL92:
 952              	.LBB56:
 953              	.LBI56:
 212:..//kernel/core/include/tos_sys.h **** }
 213:..//kernel/core/include/tos_sys.h **** 
 214:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_alloc_is_dynamic(knl_obj_t *knl_obj)
 215:..//kernel/core/include/tos_sys.h **** {
 216:..//kernel/core/include/tos_sys.h ****     return knl_obj->alloc_type == KNL_OBJ_ALLOC_TYPE_DYNAMIC;
 217:..//kernel/core/include/tos_sys.h **** }
 218:..//kernel/core/include/tos_sys.h **** 
 219:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_alloc_is_static(knl_obj_t *knl_obj)
 954              		.loc 2 219 31 view .LVU258
 955              	.LBB57:
 220:..//kernel/core/include/tos_sys.h **** {
 221:..//kernel/core/include/tos_sys.h ****     return knl_obj->alloc_type == KNL_OBJ_ALLOC_TYPE_STATIC;
 956              		.loc 2 221 5 view .LVU259
 957              		.loc 2 221 19 is_stmt 0 view .LVU260
 958 0010 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 959              	.LVL93:
 960              		.loc 2 221 19 view .LVU261
 961              	.LBE57:
 962              	.LBE56:
 193:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 963              		.loc 1 193 8 view .LVU262
 964 0012 012B     		cmp	r3, #1
 965 0014 02D0     		beq	.L65
 194:..//kernel/core/tos_priority_queue.c ****     }
 966              		.loc 1 194 16 view .LVU263
 967 0016 40F24E40 		movw	r0, #1102
 968              	.LVL94:
 194:..//kernel/core/tos_priority_queue.c ****     }
 969              		.loc 1 194 16 view .LVU264
 970 001a 14E0     		b	.L57
 971              	.LVL95:
 972              	.L65:
 197:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_deinit(&prio_q->prio_mgr);
 973              		.loc 1 197 5 is_stmt 1 view .LVU265
 974 001c 0430     		adds	r0, r0, #4
 975              	.LVL96:
 197:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_deinit(&prio_q->prio_mgr);
 976              		.loc 1 197 5 is_stmt 0 view .LVU266
 977 001e FFF7FEFF 		bl	prio_q_pool_mgr_deinit
 978              	.LVL97:
 198:..//kernel/core/tos_priority_queue.c **** 
 979              		.loc 1 198 5 is_stmt 1 view .LVU267
 980 0022 04F10C00 		add	r0, r4, #12
 981 0026 FFF7FEFF 		bl	prio_q_prio_mgr_deinit
 982              	.LVL98:
 200:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = 0;
 983              		.loc 1 200 5 view .LVU268
 200:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = 0;
 984              		.loc 1 200 25 is_stmt 0 view .LVU269
 985 002a 0020     		movs	r0, #0
 986 002c A062     		str	r0, [r4, #40]
 201:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = 0;
 987              		.loc 1 201 5 is_stmt 1 view .LVU270
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 30


 201:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = 0;
 988              		.loc 1 201 25 is_stmt 0 view .LVU271
 989 002e E062     		str	r0, [r4, #44]
 202:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = K_NULL;
 990              		.loc 1 202 5 is_stmt 1 view .LVU272
 202:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = K_NULL;
 991              		.loc 1 202 25 is_stmt 0 view .LVU273
 992 0030 2063     		str	r0, [r4, #48]
 203:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = K_NULL;
 993              		.loc 1 203 5 is_stmt 1 view .LVU274
 203:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = K_NULL;
 994              		.loc 1 203 25 is_stmt 0 view .LVU275
 995 0032 6063     		str	r0, [r4, #52]
 204:..//kernel/core/tos_priority_queue.c **** 
 996              		.loc 1 204 5 is_stmt 1 view .LVU276
 204:..//kernel/core/tos_priority_queue.c **** 
 997              		.loc 1 204 25 is_stmt 0 view .LVU277
 998 0034 A063     		str	r0, [r4, #56]
 206:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_reset(&prio_q->knl_obj);
 999              		.loc 1 206 5 is_stmt 1 view .LVU278
 1000              	.LVL99:
 1001              	.LBB58:
 1002              	.LBI58:
 192:..//kernel/core/include/tos_sys.h **** {
 1003              		.loc 2 192 32 view .LVU279
 1004              	.LBB59:
 194:..//kernel/core/include/tos_sys.h **** }
 1005              		.loc 2 194 5 view .LVU280
 194:..//kernel/core/include/tos_sys.h **** }
 1006              		.loc 2 194 19 is_stmt 0 view .LVU281
 1007 0036 6080     		strh	r0, [r4, #2]	@ movhi
 1008              	.LVL100:
 194:..//kernel/core/include/tos_sys.h **** }
 1009              		.loc 2 194 19 view .LVU282
 1010              	.LBE59:
 1011              	.LBE58:
 207:..//kernel/core/tos_priority_queue.c **** 
 1012              		.loc 1 207 5 is_stmt 1 view .LVU283
 1013              	.LBB60:
 1014              	.LBI60:
 199:..//kernel/core/include/tos_sys.h **** {
 1015              		.loc 2 199 32 view .LVU284
 1016              	.LBB61:
 201:..//kernel/core/include/tos_sys.h **** }
 1017              		.loc 2 201 5 view .LVU285
 201:..//kernel/core/include/tos_sys.h **** }
 1018              		.loc 2 201 25 is_stmt 0 view .LVU286
 1019 0038 2070     		strb	r0, [r4]
 1020              	.LVL101:
 201:..//kernel/core/include/tos_sys.h **** }
 1021              		.loc 2 201 25 view .LVU287
 1022              	.LBE61:
 1023              	.LBE60:
 209:..//kernel/core/tos_priority_queue.c **** }
 1024              		.loc 1 209 5 is_stmt 1 view .LVU288
 209:..//kernel/core/tos_priority_queue.c **** }
 1025              		.loc 1 209 12 is_stmt 0 view .LVU289
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 31


 1026 003a 04E0     		b	.L57
 1027              	.LVL102:
 1028              	.L58:
 1029              	.LCFI19:
 1030              		.cfi_def_cfa_offset 0
 1031              		.cfi_restore 4
 1032              		.cfi_restore 14
 190:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1033              		.loc 1 190 5 view .LVU290
 1034 003c 40F24C40 		movw	r0, #1100
 1035              	.LVL103:
 210:..//kernel/core/tos_priority_queue.c **** 
 1036              		.loc 1 210 1 view .LVU291
 1037 0040 7047     		bx	lr
 1038              	.LVL104:
 1039              	.L59:
 1040              	.LCFI20:
 1041              		.cfi_def_cfa_offset 8
 1042              		.cfi_offset 4, -8
 1043              		.cfi_offset 14, -4
 191:..//kernel/core/tos_priority_queue.c **** 
 1044              		.loc 1 191 5 view .LVU292
 1045 0042 40F24D40 		movw	r0, #1101
 1046              	.LVL105:
 1047              	.L57:
 210:..//kernel/core/tos_priority_queue.c **** 
 1048              		.loc 1 210 1 view .LVU293
 1049 0046 10BD     		pop	{r4, pc}
 210:..//kernel/core/tos_priority_queue.c **** 
 1050              		.loc 1 210 1 view .LVU294
 1051              		.cfi_endproc
 1052              	.LFE126:
 1054              		.section	.text.tos_prio_q_create_dyn,"ax",%progbits
 1055              		.align	1
 1056              		.global	tos_prio_q_create_dyn
 1057              		.syntax unified
 1058              		.thumb
 1059              		.thumb_func
 1060              		.fpu softvfp
 1062              	tos_prio_q_create_dyn:
 1063              	.LVL106:
 1064              	.LFB127:
 213:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
 1065              		.loc 1 213 1 is_stmt 1 view -0
 1066              		.cfi_startproc
 1067              		@ args = 0, pretend = 0, frame = 0
 1068              		@ frame_needed = 0, uses_anonymous_args = 0
 214:..//kernel/core/tos_priority_queue.c ****     void *mgr_pool, *data_pool;
 1069              		.loc 1 214 5 view .LVU296
 215:..//kernel/core/tos_priority_queue.c **** 
 1070              		.loc 1 215 5 view .LVU297
 217:..//kernel/core/tos_priority_queue.c **** 
 1071              		.loc 1 217 5 view .LVU298
 217:..//kernel/core/tos_priority_queue.c **** 
 1072              		.loc 1 217 5 view .LVU299
 1073 0000 68B3     		cbz	r0, .L70
 213:..//kernel/core/tos_priority_queue.c ****     k_err_t err;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 32


 1074              		.loc 1 213 1 is_stmt 0 view .LVU300
 1075 0002 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1076              	.LCFI21:
 1077              		.cfi_def_cfa_offset 24
 1078              		.cfi_offset 4, -24
 1079              		.cfi_offset 5, -20
 1080              		.cfi_offset 6, -16
 1081              		.cfi_offset 7, -12
 1082              		.cfi_offset 8, -8
 1083              		.cfi_offset 14, -4
 1084 0006 82B0     		sub	sp, sp, #8
 1085              	.LCFI22:
 1086              		.cfi_def_cfa_offset 32
 1087 0008 0646     		mov	r6, r0
 1088 000a 1546     		mov	r5, r2
 1089 000c 0C46     		mov	r4, r1
 219:..//kernel/core/tos_priority_queue.c ****     if (!mgr_pool) {
 1090              		.loc 1 219 5 is_stmt 1 view .LVU301
 219:..//kernel/core/tos_priority_queue.c ****     if (!mgr_pool) {
 1091              		.loc 1 219 16 is_stmt 0 view .LVU302
 1092 000e 01EB4103 		add	r3, r1, r1, lsl #1
 1093 0012 5800     		lsls	r0, r3, #1
 1094              	.LVL107:
 219:..//kernel/core/tos_priority_queue.c ****     if (!mgr_pool) {
 1095              		.loc 1 219 16 view .LVU303
 1096 0014 FFF7FEFF 		bl	tos_mmheap_alloc
 1097              	.LVL108:
 220:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 1098              		.loc 1 220 5 is_stmt 1 view .LVU304
 220:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 1099              		.loc 1 220 8 is_stmt 0 view .LVU305
 1100 0018 0746     		mov	r7, r0
 1101 001a 18B3     		cbz	r0, .L71
 224:..//kernel/core/tos_priority_queue.c ****     if (!data_pool) {
 1102              		.loc 1 224 5 is_stmt 1 view .LVU306
 224:..//kernel/core/tos_priority_queue.c ****     if (!data_pool) {
 1103              		.loc 1 224 17 is_stmt 0 view .LVU307
 1104 001c 05FB04F0 		mul	r0, r5, r4
 1105              	.LVL109:
 224:..//kernel/core/tos_priority_queue.c ****     if (!data_pool) {
 1106              		.loc 1 224 17 view .LVU308
 1107 0020 FFF7FEFF 		bl	tos_mmheap_alloc
 1108              	.LVL110:
 225:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(mgr_pool);
 1109              		.loc 1 225 5 is_stmt 1 view .LVU309
 225:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(mgr_pool);
 1110              		.loc 1 225 8 is_stmt 0 view .LVU310
 1111 0024 8046     		mov	r8, r0
 1112 0026 68B1     		cbz	r0, .L76
 230:..//kernel/core/tos_priority_queue.c ****     if (err != K_ERR_NONE) {
 1113              		.loc 1 230 5 is_stmt 1 view .LVU311
 230:..//kernel/core/tos_priority_queue.c ****     if (err != K_ERR_NONE) {
 1114              		.loc 1 230 11 is_stmt 0 view .LVU312
 1115 0028 0095     		str	r5, [sp]
 1116 002a 2346     		mov	r3, r4
 1117 002c 0246     		mov	r2, r0
 1118 002e 3946     		mov	r1, r7
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 33


 1119 0030 3046     		mov	r0, r6
 1120              	.LVL111:
 230:..//kernel/core/tos_priority_queue.c ****     if (err != K_ERR_NONE) {
 1121              		.loc 1 230 11 view .LVU313
 1122 0032 FFF7FEFF 		bl	tos_prio_q_create
 1123              	.LVL112:
 231:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(data_pool);
 1124              		.loc 1 231 5 is_stmt 1 view .LVU314
 231:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(data_pool);
 1125              		.loc 1 231 8 is_stmt 0 view .LVU315
 1126 0036 58B9     		cbnz	r0, .L77
 1127              	.LVL113:
 1128              	.L69:
 236:..//kernel/core/tos_priority_queue.c **** 
 1129              		.loc 1 236 5 is_stmt 1 view .LVU316
 1130              	.LBB62:
 1131              	.LBI62:
 204:..//kernel/core/include/tos_sys.h **** {
 1132              		.loc 2 204 32 view .LVU317
 1133              	.LBB63:
 206:..//kernel/core/include/tos_sys.h **** }
 1134              		.loc 2 206 5 view .LVU318
 206:..//kernel/core/include/tos_sys.h **** }
 1135              		.loc 2 206 25 is_stmt 0 view .LVU319
 1136 0038 0223     		movs	r3, #2
 1137 003a 3370     		strb	r3, [r6]
 1138              	.LVL114:
 206:..//kernel/core/include/tos_sys.h **** }
 1139              		.loc 2 206 25 view .LVU320
 1140              	.LBE63:
 1141              	.LBE62:
 238:..//kernel/core/tos_priority_queue.c **** }
 1142              		.loc 1 238 5 is_stmt 1 view .LVU321
 238:..//kernel/core/tos_priority_queue.c **** }
 1143              		.loc 1 238 12 is_stmt 0 view .LVU322
 1144 003c 0020     		movs	r0, #0
 1145              	.LVL115:
 1146              	.L67:
 239:..//kernel/core/tos_priority_queue.c **** 
 1147              		.loc 1 239 1 view .LVU323
 1148 003e 02B0     		add	sp, sp, #8
 1149              	.LCFI23:
 1150              		.cfi_remember_state
 1151              		.cfi_def_cfa_offset 24
 1152              		@ sp needed
 1153 0040 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1154              	.LVL116:
 1155              	.L76:
 1156              	.LCFI24:
 1157              		.cfi_restore_state
 226:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 1158              		.loc 1 226 9 is_stmt 1 view .LVU324
 1159 0044 3846     		mov	r0, r7
 1160              	.LVL117:
 226:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 1161              		.loc 1 226 9 is_stmt 0 view .LVU325
 1162 0046 FFF7FEFF 		bl	tos_mmheap_free
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 34


 1163              	.LVL118:
 227:..//kernel/core/tos_priority_queue.c ****     }
 1164              		.loc 1 227 9 is_stmt 1 view .LVU326
 227:..//kernel/core/tos_priority_queue.c ****     }
 1165              		.loc 1 227 16 is_stmt 0 view .LVU327
 1166 004a 40F27E40 		movw	r0, #1150
 1167 004e F6E7     		b	.L67
 1168              	.LVL119:
 1169              	.L77:
 232:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(mgr_pool);
 1170              		.loc 1 232 9 is_stmt 1 view .LVU328
 1171 0050 4046     		mov	r0, r8
 1172              	.LVL120:
 232:..//kernel/core/tos_priority_queue.c ****         tos_mmheap_free(mgr_pool);
 1173              		.loc 1 232 9 is_stmt 0 view .LVU329
 1174 0052 FFF7FEFF 		bl	tos_mmheap_free
 1175              	.LVL121:
 233:..//kernel/core/tos_priority_queue.c ****     }
 1176              		.loc 1 233 9 is_stmt 1 view .LVU330
 1177 0056 3846     		mov	r0, r7
 1178 0058 FFF7FEFF 		bl	tos_mmheap_free
 1179              	.LVL122:
 1180 005c ECE7     		b	.L69
 1181              	.LVL123:
 1182              	.L70:
 1183              	.LCFI25:
 1184              		.cfi_def_cfa_offset 0
 1185              		.cfi_restore 4
 1186              		.cfi_restore 5
 1187              		.cfi_restore 6
 1188              		.cfi_restore 7
 1189              		.cfi_restore 8
 1190              		.cfi_restore 14
 217:..//kernel/core/tos_priority_queue.c **** 
 1191              		.loc 1 217 5 is_stmt 0 view .LVU331
 1192 005e 40F24C40 		movw	r0, #1100
 1193              	.LVL124:
 239:..//kernel/core/tos_priority_queue.c **** 
 1194              		.loc 1 239 1 view .LVU332
 1195 0062 7047     		bx	lr
 1196              	.LVL125:
 1197              	.L71:
 1198              	.LCFI26:
 1199              		.cfi_def_cfa_offset 32
 1200              		.cfi_offset 4, -24
 1201              		.cfi_offset 5, -20
 1202              		.cfi_offset 6, -16
 1203              		.cfi_offset 7, -12
 1204              		.cfi_offset 8, -8
 1205              		.cfi_offset 14, -4
 221:..//kernel/core/tos_priority_queue.c ****     }
 1206              		.loc 1 221 16 view .LVU333
 1207 0064 40F27E40 		movw	r0, #1150
 1208              	.LVL126:
 221:..//kernel/core/tos_priority_queue.c ****     }
 1209              		.loc 1 221 16 view .LVU334
 1210 0068 E9E7     		b	.L67
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 35


 1211              		.cfi_endproc
 1212              	.LFE127:
 1214              		.section	.text.tos_prio_q_destroy_dyn,"ax",%progbits
 1215              		.align	1
 1216              		.global	tos_prio_q_destroy_dyn
 1217              		.syntax unified
 1218              		.thumb
 1219              		.thumb_func
 1220              		.fpu softvfp
 1222              	tos_prio_q_destroy_dyn:
 1223              	.LVL127:
 1224              	.LFB128:
 242:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 1225              		.loc 1 242 1 is_stmt 1 view -0
 1226              		.cfi_startproc
 1227              		@ args = 0, pretend = 0, frame = 0
 1228              		@ frame_needed = 0, uses_anonymous_args = 0
 243:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1229              		.loc 1 243 5 view .LVU336
 243:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1230              		.loc 1 243 5 view .LVU337
 1231 0000 10B3     		cbz	r0, .L80
 242:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 1232              		.loc 1 242 1 is_stmt 0 view .LVU338
 1233 0002 10B5     		push	{r4, lr}
 1234              	.LCFI27:
 1235              		.cfi_def_cfa_offset 8
 1236              		.cfi_offset 4, -8
 1237              		.cfi_offset 14, -4
 1238 0004 0446     		mov	r4, r0
 244:..//kernel/core/tos_priority_queue.c **** 
 1239              		.loc 1 244 5 is_stmt 1 view .LVU339
 244:..//kernel/core/tos_priority_queue.c **** 
 1240              		.loc 1 244 5 view .LVU340
 1241              	.LVL128:
 1242              	.LBB64:
 1243              	.LBI64:
 182:..//kernel/core/include/tos_sys.h **** {
 1244              		.loc 2 182 31 view .LVU341
 1245              	.LBB65:
 184:..//kernel/core/include/tos_sys.h **** }
 1246              		.loc 2 184 5 view .LVU342
 184:..//kernel/core/include/tos_sys.h **** }
 1247              		.loc 2 184 19 is_stmt 0 view .LVU343
 1248 0006 4288     		ldrh	r2, [r0, #2]
 1249              	.LVL129:
 184:..//kernel/core/include/tos_sys.h **** }
 1250              		.loc 2 184 19 view .LVU344
 1251              	.LBE65:
 1252              	.LBE64:
 244:..//kernel/core/tos_priority_queue.c **** 
 1253              		.loc 1 244 5 view .LVU345
 1254 0008 4DF6D523 		movw	r3, #56021
 1255 000c 9A42     		cmp	r2, r3
 1256 000e 1ED1     		bne	.L81
 246:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 1257              		.loc 1 246 5 is_stmt 1 view .LVU346
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 36


 1258              	.LVL130:
 1259              	.LBB66:
 1260              	.LBI66:
 214:..//kernel/core/include/tos_sys.h **** {
 1261              		.loc 2 214 31 view .LVU347
 1262              	.LBB67:
 216:..//kernel/core/include/tos_sys.h **** }
 1263              		.loc 2 216 5 view .LVU348
 216:..//kernel/core/include/tos_sys.h **** }
 1264              		.loc 2 216 19 is_stmt 0 view .LVU349
 1265 0010 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1266              	.LVL131:
 216:..//kernel/core/include/tos_sys.h **** }
 1267              		.loc 2 216 19 view .LVU350
 1268              	.LBE67:
 1269              	.LBE66:
 246:..//kernel/core/tos_priority_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 1270              		.loc 1 246 8 view .LVU351
 1271 0012 022B     		cmp	r3, #2
 1272 0014 02D0     		beq	.L87
 247:..//kernel/core/tos_priority_queue.c ****     }
 1273              		.loc 1 247 16 view .LVU352
 1274 0016 40F24E40 		movw	r0, #1102
 1275              	.LVL132:
 247:..//kernel/core/tos_priority_queue.c ****     }
 1276              		.loc 1 247 16 view .LVU353
 1277 001a 1AE0     		b	.L79
 1278              	.LVL133:
 1279              	.L87:
 250:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_deinit(&prio_q->prio_mgr);
 1280              		.loc 1 250 5 is_stmt 1 view .LVU354
 1281 001c 0430     		adds	r0, r0, #4
 1282              	.LVL134:
 250:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_deinit(&prio_q->prio_mgr);
 1283              		.loc 1 250 5 is_stmt 0 view .LVU355
 1284 001e FFF7FEFF 		bl	prio_q_pool_mgr_deinit
 1285              	.LVL135:
 251:..//kernel/core/tos_priority_queue.c **** 
 1286              		.loc 1 251 5 is_stmt 1 view .LVU356
 1287 0022 04F10C00 		add	r0, r4, #12
 1288 0026 FFF7FEFF 		bl	prio_q_prio_mgr_deinit
 1289              	.LVL136:
 253:..//kernel/core/tos_priority_queue.c ****     tos_mmheap_free(prio_q->data_pool);
 1290              		.loc 1 253 5 view .LVU357
 1291 002a 606B     		ldr	r0, [r4, #52]
 1292 002c FFF7FEFF 		bl	tos_mmheap_free
 1293              	.LVL137:
 254:..//kernel/core/tos_priority_queue.c **** 
 1294              		.loc 1 254 5 view .LVU358
 1295 0030 A06B     		ldr	r0, [r4, #56]
 1296 0032 FFF7FEFF 		bl	tos_mmheap_free
 1297              	.LVL138:
 256:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = 0;
 1298              		.loc 1 256 5 view .LVU359
 256:..//kernel/core/tos_priority_queue.c ****     prio_q->item_size   = 0;
 1299              		.loc 1 256 25 is_stmt 0 view .LVU360
 1300 0036 0020     		movs	r0, #0
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 37


 1301 0038 A062     		str	r0, [r4, #40]
 257:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = 0;
 1302              		.loc 1 257 5 is_stmt 1 view .LVU361
 257:..//kernel/core/tos_priority_queue.c ****     prio_q->item_cnt    = 0;
 1303              		.loc 1 257 25 is_stmt 0 view .LVU362
 1304 003a E062     		str	r0, [r4, #44]
 258:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = K_NULL;
 1305              		.loc 1 258 5 is_stmt 1 view .LVU363
 258:..//kernel/core/tos_priority_queue.c ****     prio_q->mgr_pool    = K_NULL;
 1306              		.loc 1 258 25 is_stmt 0 view .LVU364
 1307 003c 2063     		str	r0, [r4, #48]
 259:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = K_NULL;
 1308              		.loc 1 259 5 is_stmt 1 view .LVU365
 259:..//kernel/core/tos_priority_queue.c ****     prio_q->data_pool   = K_NULL;
 1309              		.loc 1 259 25 is_stmt 0 view .LVU366
 1310 003e 6063     		str	r0, [r4, #52]
 260:..//kernel/core/tos_priority_queue.c **** 
 1311              		.loc 1 260 5 is_stmt 1 view .LVU367
 260:..//kernel/core/tos_priority_queue.c **** 
 1312              		.loc 1 260 25 is_stmt 0 view .LVU368
 1313 0040 A063     		str	r0, [r4, #56]
 262:..//kernel/core/tos_priority_queue.c ****     knl_object_alloc_reset(&prio_q->knl_obj);
 1314              		.loc 1 262 5 is_stmt 1 view .LVU369
 1315              	.LVL139:
 1316              	.LBB68:
 1317              	.LBI68:
 192:..//kernel/core/include/tos_sys.h **** {
 1318              		.loc 2 192 32 view .LVU370
 1319              	.LBB69:
 194:..//kernel/core/include/tos_sys.h **** }
 1320              		.loc 2 194 5 view .LVU371
 194:..//kernel/core/include/tos_sys.h **** }
 1321              		.loc 2 194 19 is_stmt 0 view .LVU372
 1322 0042 6080     		strh	r0, [r4, #2]	@ movhi
 1323              	.LVL140:
 194:..//kernel/core/include/tos_sys.h **** }
 1324              		.loc 2 194 19 view .LVU373
 1325              	.LBE69:
 1326              	.LBE68:
 263:..//kernel/core/tos_priority_queue.c **** 
 1327              		.loc 1 263 5 is_stmt 1 view .LVU374
 1328              	.LBB70:
 1329              	.LBI70:
 199:..//kernel/core/include/tos_sys.h **** {
 1330              		.loc 2 199 32 view .LVU375
 1331              	.LBB71:
 201:..//kernel/core/include/tos_sys.h **** }
 1332              		.loc 2 201 5 view .LVU376
 201:..//kernel/core/include/tos_sys.h **** }
 1333              		.loc 2 201 25 is_stmt 0 view .LVU377
 1334 0044 2070     		strb	r0, [r4]
 1335              	.LVL141:
 201:..//kernel/core/include/tos_sys.h **** }
 1336              		.loc 2 201 25 view .LVU378
 1337              	.LBE71:
 1338              	.LBE70:
 265:..//kernel/core/tos_priority_queue.c **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 38


 1339              		.loc 1 265 5 is_stmt 1 view .LVU379
 265:..//kernel/core/tos_priority_queue.c **** }
 1340              		.loc 1 265 12 is_stmt 0 view .LVU380
 1341 0046 04E0     		b	.L79
 1342              	.LVL142:
 1343              	.L80:
 1344              	.LCFI28:
 1345              		.cfi_def_cfa_offset 0
 1346              		.cfi_restore 4
 1347              		.cfi_restore 14
 243:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1348              		.loc 1 243 5 view .LVU381
 1349 0048 40F24C40 		movw	r0, #1100
 1350              	.LVL143:
 266:..//kernel/core/tos_priority_queue.c **** 
 1351              		.loc 1 266 1 view .LVU382
 1352 004c 7047     		bx	lr
 1353              	.LVL144:
 1354              	.L81:
 1355              	.LCFI29:
 1356              		.cfi_def_cfa_offset 8
 1357              		.cfi_offset 4, -8
 1358              		.cfi_offset 14, -4
 244:..//kernel/core/tos_priority_queue.c **** 
 1359              		.loc 1 244 5 view .LVU383
 1360 004e 40F24D40 		movw	r0, #1101
 1361              	.LVL145:
 1362              	.L79:
 266:..//kernel/core/tos_priority_queue.c **** 
 1363              		.loc 1 266 1 view .LVU384
 1364 0052 10BD     		pop	{r4, pc}
 266:..//kernel/core/tos_priority_queue.c **** 
 1365              		.loc 1 266 1 view .LVU385
 1366              		.cfi_endproc
 1367              	.LFE128:
 1369              		.section	.text.tos_prio_q_flush,"ax",%progbits
 1370              		.align	1
 1371              		.global	tos_prio_q_flush
 1372              		.syntax unified
 1373              		.thumb
 1374              		.thumb_func
 1375              		.fpu softvfp
 1377              	tos_prio_q_flush:
 1378              	.LVL146:
 1379              	.LFB133:
 308:..//kernel/core/tos_priority_queue.c **** 
 309:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_dequeue(k_prio_q_t *prio_q, void *item, size_t *item_size, k_prio_t *pri
 310:..//kernel/core/tos_priority_queue.c **** {
 311:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 312:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t the_slot;
 313:..//kernel/core/tos_priority_queue.c **** 
 314:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 315:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 316:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 317:..//kernel/core/tos_priority_queue.c **** 
 318:..//kernel/core/tos_priority_queue.c ****     if (tos_prio_q_is_empty(prio_q)) {
 319:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_EMPTY;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 39


 320:..//kernel/core/tos_priority_queue.c ****     }
 321:..//kernel/core/tos_priority_queue.c **** 
 322:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_DISABLE();
 323:..//kernel/core/tos_priority_queue.c **** 
 324:..//kernel/core/tos_priority_queue.c ****     the_slot = prio_q_prio_mgr_slot_dequeue(&prio_q->prio_mgr, prio);
 325:..//kernel/core/tos_priority_queue.c ****     prio_q_do_dequeue(prio_q, item, item_size, the_slot);
 326:..//kernel/core/tos_priority_queue.c **** 
 327:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 328:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 329:..//kernel/core/tos_priority_queue.c **** }
 330:..//kernel/core/tos_priority_queue.c **** 
 331:..//kernel/core/tos_priority_queue.c **** __API__ k_err_t tos_prio_q_flush(k_prio_q_t *prio_q)
 332:..//kernel/core/tos_priority_queue.c **** {
 1380              		.loc 1 332 1 is_stmt 1 view -0
 1381              		.cfi_startproc
 1382              		@ args = 0, pretend = 0, frame = 0
 1383              		@ frame_needed = 0, uses_anonymous_args = 0
 333:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1384              		.loc 1 333 5 view .LVU387
 334:..//kernel/core/tos_priority_queue.c **** 
 335:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(prio_q);
 1385              		.loc 1 335 5 view .LVU388
 1386              		.loc 1 335 5 view .LVU389
 1387 0000 D8B1     		cbz	r0, .L90
 332:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1388              		.loc 1 332 1 is_stmt 0 view .LVU390
 1389 0002 70B5     		push	{r4, r5, r6, lr}
 1390              	.LCFI30:
 1391              		.cfi_def_cfa_offset 16
 1392              		.cfi_offset 4, -16
 1393              		.cfi_offset 5, -12
 1394              		.cfi_offset 6, -8
 1395              		.cfi_offset 14, -4
 1396 0004 0446     		mov	r4, r0
 336:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1397              		.loc 1 336 5 is_stmt 1 view .LVU391
 1398              		.loc 1 336 5 view .LVU392
 1399              	.LVL147:
 1400              	.LBB72:
 1401              	.LBI72:
 182:..//kernel/core/include/tos_sys.h **** {
 1402              		.loc 2 182 31 view .LVU393
 1403              	.LBB73:
 184:..//kernel/core/include/tos_sys.h **** }
 1404              		.loc 2 184 5 view .LVU394
 184:..//kernel/core/include/tos_sys.h **** }
 1405              		.loc 2 184 19 is_stmt 0 view .LVU395
 1406 0006 4188     		ldrh	r1, [r0, #2]
 1407              	.LVL148:
 184:..//kernel/core/include/tos_sys.h **** }
 1408              		.loc 2 184 19 view .LVU396
 1409              	.LBE73:
 1410              	.LBE72:
 1411              		.loc 1 336 5 view .LVU397
 1412 0008 4DF6D522 		movw	r2, #56021
 1413 000c 9142     		cmp	r1, r2
 1414 000e 02D0     		beq	.L96
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 40


 1415 0010 40F24D40 		movw	r0, #1101
 1416              	.LVL149:
 1417              	.L89:
 337:..//kernel/core/tos_priority_queue.c **** 
 338:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_DISABLE();
 339:..//kernel/core/tos_priority_queue.c **** 
 340:..//kernel/core/tos_priority_queue.c ****     prio_q_pool_mgr_reset(&prio_q->pool_mgr, prio_q->item_cnt);
 341:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_reset(&prio_q->prio_mgr);
 342:..//kernel/core/tos_priority_queue.c ****     prio_q->total = 0;
 343:..//kernel/core/tos_priority_queue.c **** 
 344:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 345:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 346:..//kernel/core/tos_priority_queue.c **** }
 1418              		.loc 1 346 1 view .LVU398
 1419 0014 70BD     		pop	{r4, r5, r6, pc}
 1420              	.LVL150:
 1421              	.L96:
 338:..//kernel/core/tos_priority_queue.c **** 
 1422              		.loc 1 338 5 is_stmt 1 view .LVU399
 338:..//kernel/core/tos_priority_queue.c **** 
 1423              		.loc 1 338 5 view .LVU400
 1424 0016 FFF7FEFF 		bl	tos_cpu_cpsr_save
 1425              	.LVL151:
 338:..//kernel/core/tos_priority_queue.c **** 
 1426              		.loc 1 338 5 is_stmt 0 view .LVU401
 1427 001a 0646     		mov	r6, r0
 1428              	.LVL152:
 340:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_reset(&prio_q->prio_mgr);
 1429              		.loc 1 340 5 is_stmt 1 view .LVU402
 1430 001c 216B     		ldr	r1, [r4, #48]
 1431 001e 201D     		adds	r0, r4, #4
 1432              	.LVL153:
 340:..//kernel/core/tos_priority_queue.c ****     prio_q_prio_mgr_reset(&prio_q->prio_mgr);
 1433              		.loc 1 340 5 is_stmt 0 view .LVU403
 1434 0020 FFF7FEFF 		bl	prio_q_pool_mgr_reset
 1435              	.LVL154:
 341:..//kernel/core/tos_priority_queue.c ****     prio_q->total = 0;
 1436              		.loc 1 341 5 is_stmt 1 view .LVU404
 1437 0024 04F10C00 		add	r0, r4, #12
 1438 0028 FFF7FEFF 		bl	prio_q_prio_mgr_reset
 1439              	.LVL155:
 342:..//kernel/core/tos_priority_queue.c **** 
 1440              		.loc 1 342 5 view .LVU405
 342:..//kernel/core/tos_priority_queue.c **** 
 1441              		.loc 1 342 19 is_stmt 0 view .LVU406
 1442 002c 0025     		movs	r5, #0
 1443 002e A562     		str	r5, [r4, #40]
 344:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 1444              		.loc 1 344 5 is_stmt 1 view .LVU407
 344:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 1445              		.loc 1 344 5 view .LVU408
 1446 0030 3046     		mov	r0, r6
 1447 0032 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1448              	.LVL156:
 345:..//kernel/core/tos_priority_queue.c **** }
 1449              		.loc 1 345 5 view .LVU409
 345:..//kernel/core/tos_priority_queue.c **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 41


 1450              		.loc 1 345 12 is_stmt 0 view .LVU410
 1451 0036 2846     		mov	r0, r5
 1452 0038 ECE7     		b	.L89
 1453              	.LVL157:
 1454              	.L90:
 1455              	.LCFI31:
 1456              		.cfi_def_cfa_offset 0
 1457              		.cfi_restore 4
 1458              		.cfi_restore 5
 1459              		.cfi_restore 6
 1460              		.cfi_restore 14
 335:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1461              		.loc 1 335 5 view .LVU411
 1462 003a 40F24C40 		movw	r0, #1100
 1463              	.LVL158:
 1464              		.loc 1 346 1 view .LVU412
 1465 003e 7047     		bx	lr
 1466              		.cfi_endproc
 1467              	.LFE133:
 1469              		.section	.text.tos_prio_q_is_empty,"ax",%progbits
 1470              		.align	1
 1471              		.global	tos_prio_q_is_empty
 1472              		.syntax unified
 1473              		.thumb
 1474              		.thumb_func
 1475              		.fpu softvfp
 1477              	tos_prio_q_is_empty:
 1478              	.LVL159:
 1479              	.LFB134:
 347:..//kernel/core/tos_priority_queue.c **** 
 348:..//kernel/core/tos_priority_queue.c **** __API__ int tos_prio_q_is_empty(k_prio_q_t *prio_q)
 349:..//kernel/core/tos_priority_queue.c **** {
 1480              		.loc 1 349 1 is_stmt 1 view -0
 1481              		.cfi_startproc
 1482              		@ args = 0, pretend = 0, frame = 0
 1483              		@ frame_needed = 0, uses_anonymous_args = 0
 1484              		.loc 1 349 1 is_stmt 0 view .LVU414
 1485 0000 10B5     		push	{r4, lr}
 1486              	.LCFI32:
 1487              		.cfi_def_cfa_offset 8
 1488              		.cfi_offset 4, -8
 1489              		.cfi_offset 14, -4
 350:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1490              		.loc 1 350 5 is_stmt 1 view .LVU415
 1491              	.LVL160:
 351:..//kernel/core/tos_priority_queue.c ****     int is_empty = K_FALSE;
 1492              		.loc 1 351 5 view .LVU416
 352:..//kernel/core/tos_priority_queue.c **** 
 353:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK_RC(prio_q, K_FALSE);
 1493              		.loc 1 353 5 view .LVU417
 1494              		.loc 1 353 5 view .LVU418
 1495 0002 B0FA80F4 		clz	r4, r0
 1496 0006 6409     		lsrs	r4, r4, #5
 1497 0008 84B9     		cbnz	r4, .L99
 354:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY_RC(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE, K_FALSE);
 1498              		.loc 1 354 5 view .LVU419
 1499              		.loc 1 354 5 view .LVU420
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 42


 1500              	.LVL161:
 1501              	.LBB74:
 1502              	.LBI74:
 182:..//kernel/core/include/tos_sys.h **** {
 1503              		.loc 2 182 31 view .LVU421
 1504              	.LBB75:
 184:..//kernel/core/include/tos_sys.h **** }
 1505              		.loc 2 184 5 view .LVU422
 184:..//kernel/core/include/tos_sys.h **** }
 1506              		.loc 2 184 19 is_stmt 0 view .LVU423
 1507 000a 4188     		ldrh	r1, [r0, #2]
 1508              	.LVL162:
 184:..//kernel/core/include/tos_sys.h **** }
 1509              		.loc 2 184 19 view .LVU424
 1510              	.LBE75:
 1511              	.LBE74:
 1512              		.loc 1 354 5 view .LVU425
 1513 000c 4DF6D522 		movw	r2, #56021
 1514 0010 9142     		cmp	r1, r2
 1515 0012 01D0     		beq	.L101
 1516              	.LVL163:
 1517              	.L97:
 355:..//kernel/core/tos_priority_queue.c **** 
 356:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_DISABLE();
 357:..//kernel/core/tos_priority_queue.c ****     is_empty = (prio_q->total == 0);
 358:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 359:..//kernel/core/tos_priority_queue.c **** 
 360:..//kernel/core/tos_priority_queue.c ****     return is_empty;
 361:..//kernel/core/tos_priority_queue.c **** }
 1518              		.loc 1 361 1 view .LVU426
 1519 0014 2046     		mov	r0, r4
 1520 0016 10BD     		pop	{r4, pc}
 1521              	.LVL164:
 1522              	.L101:
 1523              		.loc 1 361 1 view .LVU427
 1524 0018 0446     		mov	r4, r0
 356:..//kernel/core/tos_priority_queue.c ****     is_empty = (prio_q->total == 0);
 1525              		.loc 1 356 5 is_stmt 1 view .LVU428
 356:..//kernel/core/tos_priority_queue.c ****     is_empty = (prio_q->total == 0);
 1526              		.loc 1 356 5 view .LVU429
 1527 001a FFF7FEFF 		bl	tos_cpu_cpsr_save
 1528              	.LVL165:
 357:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1529              		.loc 1 357 5 view .LVU430
 357:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1530              		.loc 1 357 23 is_stmt 0 view .LVU431
 1531 001e A46A     		ldr	r4, [r4, #40]
 1532              	.LVL166:
 357:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1533              		.loc 1 357 31 view .LVU432
 1534 0020 B4FA84F4 		clz	r4, r4
 1535 0024 6409     		lsrs	r4, r4, #5
 1536              	.LVL167:
 358:..//kernel/core/tos_priority_queue.c **** 
 1537              		.loc 1 358 5 is_stmt 1 view .LVU433
 358:..//kernel/core/tos_priority_queue.c **** 
 1538              		.loc 1 358 5 view .LVU434
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 43


 1539 0026 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1540              	.LVL168:
 360:..//kernel/core/tos_priority_queue.c **** }
 1541              		.loc 1 360 5 view .LVU435
 360:..//kernel/core/tos_priority_queue.c **** }
 1542              		.loc 1 360 12 is_stmt 0 view .LVU436
 1543 002a F3E7     		b	.L97
 1544              	.LVL169:
 1545              	.L99:
 353:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY_RC(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE, K_FALSE);
 1546              		.loc 1 353 5 view .LVU437
 1547 002c 0024     		movs	r4, #0
 1548 002e F1E7     		b	.L97
 1549              		.cfi_endproc
 1550              	.LFE134:
 1552              		.section	.text.tos_prio_q_dequeue,"ax",%progbits
 1553              		.align	1
 1554              		.global	tos_prio_q_dequeue
 1555              		.syntax unified
 1556              		.thumb
 1557              		.thumb_func
 1558              		.fpu softvfp
 1560              	tos_prio_q_dequeue:
 1561              	.LVL170:
 1562              	.LFB132:
 310:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1563              		.loc 1 310 1 is_stmt 1 view -0
 1564              		.cfi_startproc
 1565              		@ args = 0, pretend = 0, frame = 0
 1566              		@ frame_needed = 0, uses_anonymous_args = 0
 311:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t the_slot;
 1567              		.loc 1 311 5 view .LVU439
 312:..//kernel/core/tos_priority_queue.c **** 
 1568              		.loc 1 312 5 view .LVU440
 314:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 1569              		.loc 1 314 5 view .LVU441
 314:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 1570              		.loc 1 314 5 view .LVU442
 1571 0000 30B3     		cbz	r0, .L104
 310:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1572              		.loc 1 310 1 is_stmt 0 view .LVU443
 1573 0002 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1574              	.LCFI33:
 1575              		.cfi_def_cfa_offset 24
 1576              		.cfi_offset 4, -24
 1577              		.cfi_offset 5, -20
 1578              		.cfi_offset 6, -16
 1579              		.cfi_offset 7, -12
 1580              		.cfi_offset 8, -8
 1581              		.cfi_offset 14, -4
 1582 0006 0446     		mov	r4, r0
 315:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1583              		.loc 1 315 5 is_stmt 1 view .LVU444
 315:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1584              		.loc 1 315 5 view .LVU445
 1585 0008 29B3     		cbz	r1, .L105
 316:..//kernel/core/tos_priority_queue.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 44


 1586              		.loc 1 316 5 view .LVU446
 316:..//kernel/core/tos_priority_queue.c **** 
 1587              		.loc 1 316 5 view .LVU447
 1588              	.LVL171:
 1589              	.LBB76:
 1590              	.LBI76:
 182:..//kernel/core/include/tos_sys.h **** {
 1591              		.loc 2 182 31 view .LVU448
 1592              	.LBB77:
 184:..//kernel/core/include/tos_sys.h **** }
 1593              		.loc 2 184 5 view .LVU449
 184:..//kernel/core/include/tos_sys.h **** }
 1594              		.loc 2 184 19 is_stmt 0 view .LVU450
 1595 000a 4588     		ldrh	r5, [r0, #2]
 1596              	.LVL172:
 184:..//kernel/core/include/tos_sys.h **** }
 1597              		.loc 2 184 19 view .LVU451
 1598              	.LBE77:
 1599              	.LBE76:
 316:..//kernel/core/tos_priority_queue.c **** 
 1600              		.loc 1 316 5 view .LVU452
 1601 000c 4DF6D520 		movw	r0, #56021
 1602              	.LVL173:
 316:..//kernel/core/tos_priority_queue.c **** 
 1603              		.loc 1 316 5 view .LVU453
 1604 0010 8542     		cmp	r5, r0
 1605 0012 03D0     		beq	.L112
 1606 0014 40F24D40 		movw	r0, #1101
 1607              	.LVL174:
 1608              	.L103:
 329:..//kernel/core/tos_priority_queue.c **** 
 1609              		.loc 1 329 1 view .LVU454
 1610 0018 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1611              	.LVL175:
 1612              	.L112:
 329:..//kernel/core/tos_priority_queue.c **** 
 1613              		.loc 1 329 1 view .LVU455
 1614 001c 1F46     		mov	r7, r3
 1615 001e 1646     		mov	r6, r2
 1616 0020 0D46     		mov	r5, r1
 318:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_EMPTY;
 1617              		.loc 1 318 5 is_stmt 1 view .LVU456
 318:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_EMPTY;
 1618              		.loc 1 318 9 is_stmt 0 view .LVU457
 1619 0022 2046     		mov	r0, r4
 1620 0024 FFF7FEFF 		bl	tos_prio_q_is_empty
 1621              	.LVL176:
 318:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_EMPTY;
 1622              		.loc 1 318 8 view .LVU458
 1623 0028 C0B9     		cbnz	r0, .L107
 322:..//kernel/core/tos_priority_queue.c **** 
 1624              		.loc 1 322 5 is_stmt 1 view .LVU459
 322:..//kernel/core/tos_priority_queue.c **** 
 1625              		.loc 1 322 5 view .LVU460
 1626 002a FFF7FEFF 		bl	tos_cpu_cpsr_save
 1627              	.LVL177:
 1628 002e 8046     		mov	r8, r0
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 45


 1629              	.LVL178:
 324:..//kernel/core/tos_priority_queue.c ****     prio_q_do_dequeue(prio_q, item, item_size, the_slot);
 1630              		.loc 1 324 5 view .LVU461
 324:..//kernel/core/tos_priority_queue.c ****     prio_q_do_dequeue(prio_q, item, item_size, the_slot);
 1631              		.loc 1 324 16 is_stmt 0 view .LVU462
 1632 0030 3946     		mov	r1, r7
 1633 0032 04F10C00 		add	r0, r4, #12
 1634              	.LVL179:
 324:..//kernel/core/tos_priority_queue.c ****     prio_q_do_dequeue(prio_q, item, item_size, the_slot);
 1635              		.loc 1 324 16 view .LVU463
 1636 0036 FFF7FEFF 		bl	prio_q_prio_mgr_slot_dequeue
 1637              	.LVL180:
 325:..//kernel/core/tos_priority_queue.c **** 
 1638              		.loc 1 325 5 is_stmt 1 view .LVU464
 1639 003a 0346     		mov	r3, r0
 1640 003c 3246     		mov	r2, r6
 1641 003e 2946     		mov	r1, r5
 1642 0040 2046     		mov	r0, r4
 1643              	.LVL181:
 325:..//kernel/core/tos_priority_queue.c **** 
 1644              		.loc 1 325 5 is_stmt 0 view .LVU465
 1645 0042 FFF7FEFF 		bl	prio_q_do_dequeue
 1646              	.LVL182:
 327:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 1647              		.loc 1 327 5 is_stmt 1 view .LVU466
 327:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 1648              		.loc 1 327 5 view .LVU467
 1649 0046 4046     		mov	r0, r8
 1650 0048 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1651              	.LVL183:
 328:..//kernel/core/tos_priority_queue.c **** }
 1652              		.loc 1 328 5 view .LVU468
 328:..//kernel/core/tos_priority_queue.c **** }
 1653              		.loc 1 328 12 is_stmt 0 view .LVU469
 1654 004c 0020     		movs	r0, #0
 1655 004e E3E7     		b	.L103
 1656              	.LVL184:
 1657              	.L104:
 1658              	.LCFI34:
 1659              		.cfi_def_cfa_offset 0
 1660              		.cfi_restore 4
 1661              		.cfi_restore 5
 1662              		.cfi_restore 6
 1663              		.cfi_restore 7
 1664              		.cfi_restore 8
 1665              		.cfi_restore 14
 314:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 1666              		.loc 1 314 5 view .LVU470
 1667 0050 40F24C40 		movw	r0, #1100
 1668              	.LVL185:
 329:..//kernel/core/tos_priority_queue.c **** 
 1669              		.loc 1 329 1 view .LVU471
 1670 0054 7047     		bx	lr
 1671              	.LVL186:
 1672              	.L105:
 1673              	.LCFI35:
 1674              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 46


 1675              		.cfi_offset 4, -24
 1676              		.cfi_offset 5, -20
 1677              		.cfi_offset 6, -16
 1678              		.cfi_offset 7, -12
 1679              		.cfi_offset 8, -8
 1680              		.cfi_offset 14, -4
 315:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1681              		.loc 1 315 5 view .LVU472
 1682 0056 40F24C40 		movw	r0, #1100
 1683              	.LVL187:
 315:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1684              		.loc 1 315 5 view .LVU473
 1685 005a DDE7     		b	.L103
 1686              	.LVL188:
 1687              	.L107:
 319:..//kernel/core/tos_priority_queue.c ****     }
 1688              		.loc 1 319 16 view .LVU474
 1689 005c 4FF4AF60 		mov	r0, #1400
 1690 0060 DAE7     		b	.L103
 1691              		.cfi_endproc
 1692              	.LFE132:
 1694              		.section	.text.tos_prio_q_is_full,"ax",%progbits
 1695              		.align	1
 1696              		.global	tos_prio_q_is_full
 1697              		.syntax unified
 1698              		.thumb
 1699              		.thumb_func
 1700              		.fpu softvfp
 1702              	tos_prio_q_is_full:
 1703              	.LVL189:
 1704              	.LFB135:
 362:..//kernel/core/tos_priority_queue.c **** 
 363:..//kernel/core/tos_priority_queue.c **** __API__ int tos_prio_q_is_full(k_prio_q_t *prio_q)
 364:..//kernel/core/tos_priority_queue.c **** {
 1705              		.loc 1 364 1 is_stmt 1 view -0
 1706              		.cfi_startproc
 1707              		@ args = 0, pretend = 0, frame = 0
 1708              		@ frame_needed = 0, uses_anonymous_args = 0
 1709              		.loc 1 364 1 is_stmt 0 view .LVU476
 1710 0000 38B5     		push	{r3, r4, r5, lr}
 1711              	.LCFI36:
 1712              		.cfi_def_cfa_offset 16
 1713              		.cfi_offset 3, -16
 1714              		.cfi_offset 4, -12
 1715              		.cfi_offset 5, -8
 1716              		.cfi_offset 14, -4
 365:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1717              		.loc 1 365 5 is_stmt 1 view .LVU477
 1718              	.LVL190:
 366:..//kernel/core/tos_priority_queue.c ****     int is_full = K_FALSE;
 1719              		.loc 1 366 5 view .LVU478
 367:..//kernel/core/tos_priority_queue.c **** 
 368:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK_RC(prio_q, K_FALSE);
 1720              		.loc 1 368 5 view .LVU479
 1721              		.loc 1 368 5 view .LVU480
 1722 0002 B0FA80F4 		clz	r4, r0
 1723 0006 6409     		lsrs	r4, r4, #5
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 47


 1724 0008 94B9     		cbnz	r4, .L115
 1725 000a 0546     		mov	r5, r0
 369:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY_RC(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE, K_FALSE);
 1726              		.loc 1 369 5 view .LVU481
 1727              		.loc 1 369 5 view .LVU482
 1728              	.LVL191:
 1729              	.LBB78:
 1730              	.LBI78:
 182:..//kernel/core/include/tos_sys.h **** {
 1731              		.loc 2 182 31 view .LVU483
 1732              	.LBB79:
 184:..//kernel/core/include/tos_sys.h **** }
 1733              		.loc 2 184 5 view .LVU484
 184:..//kernel/core/include/tos_sys.h **** }
 1734              		.loc 2 184 19 is_stmt 0 view .LVU485
 1735 000c 4188     		ldrh	r1, [r0, #2]
 1736              	.LVL192:
 184:..//kernel/core/include/tos_sys.h **** }
 1737              		.loc 2 184 19 view .LVU486
 1738              	.LBE79:
 1739              	.LBE78:
 1740              		.loc 1 369 5 view .LVU487
 1741 000e 4DF6D522 		movw	r2, #56021
 1742 0012 9142     		cmp	r1, r2
 1743 0014 01D0     		beq	.L117
 1744              	.LVL193:
 1745              	.L113:
 370:..//kernel/core/tos_priority_queue.c **** 
 371:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_DISABLE();
 372:..//kernel/core/tos_priority_queue.c ****     is_full = (prio_q->total == prio_q->item_cnt);
 373:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 374:..//kernel/core/tos_priority_queue.c **** 
 375:..//kernel/core/tos_priority_queue.c ****     return is_full;
 376:..//kernel/core/tos_priority_queue.c **** }
 1746              		.loc 1 376 1 view .LVU488
 1747 0016 2046     		mov	r0, r4
 1748 0018 38BD     		pop	{r3, r4, r5, pc}
 1749              	.LVL194:
 1750              	.L117:
 371:..//kernel/core/tos_priority_queue.c ****     is_full = (prio_q->total == prio_q->item_cnt);
 1751              		.loc 1 371 5 is_stmt 1 view .LVU489
 371:..//kernel/core/tos_priority_queue.c ****     is_full = (prio_q->total == prio_q->item_cnt);
 1752              		.loc 1 371 5 view .LVU490
 1753 001a FFF7FEFF 		bl	tos_cpu_cpsr_save
 1754              	.LVL195:
 372:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1755              		.loc 1 372 5 view .LVU491
 372:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1756              		.loc 1 372 22 is_stmt 0 view .LVU492
 1757 001e AC6A     		ldr	r4, [r5, #40]
 372:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1758              		.loc 1 372 39 view .LVU493
 1759 0020 2B6B     		ldr	r3, [r5, #48]
 372:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_INT_ENABLE();
 1760              		.loc 1 372 30 view .LVU494
 1761 0022 9C42     		cmp	r4, r3
 1762 0024 14BF     		ite	ne
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 48


 1763 0026 0024     		movne	r4, #0
 1764 0028 0124     		moveq	r4, #1
 1765              	.LVL196:
 373:..//kernel/core/tos_priority_queue.c **** 
 1766              		.loc 1 373 5 is_stmt 1 view .LVU495
 373:..//kernel/core/tos_priority_queue.c **** 
 1767              		.loc 1 373 5 view .LVU496
 1768 002a FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1769              	.LVL197:
 375:..//kernel/core/tos_priority_queue.c **** }
 1770              		.loc 1 375 5 view .LVU497
 375:..//kernel/core/tos_priority_queue.c **** }
 1771              		.loc 1 375 12 is_stmt 0 view .LVU498
 1772 002e F2E7     		b	.L113
 1773              	.LVL198:
 1774              	.L115:
 368:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY_RC(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE, K_FALSE);
 1775              		.loc 1 368 5 view .LVU499
 1776 0030 0024     		movs	r4, #0
 1777 0032 F0E7     		b	.L113
 1778              		.cfi_endproc
 1779              	.LFE135:
 1781              		.section	.text.tos_prio_q_enqueue,"ax",%progbits
 1782              		.align	1
 1783              		.global	tos_prio_q_enqueue
 1784              		.syntax unified
 1785              		.thumb
 1786              		.thumb_func
 1787              		.fpu softvfp
 1789              	tos_prio_q_enqueue:
 1790              	.LVL199:
 1791              	.LFB130:
 276:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1792              		.loc 1 276 1 is_stmt 1 view -0
 1793              		.cfi_startproc
 1794              		@ args = 0, pretend = 0, frame = 0
 1795              		@ frame_needed = 0, uses_anonymous_args = 0
 277:..//kernel/core/tos_priority_queue.c ****     prio_q_slot_t the_slot;
 1796              		.loc 1 277 5 view .LVU501
 278:..//kernel/core/tos_priority_queue.c **** 
 1797              		.loc 1 278 5 view .LVU502
 280:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 1798              		.loc 1 280 5 view .LVU503
 280:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 1799              		.loc 1 280 5 view .LVU504
 1800 0000 B0B3     		cbz	r0, .L122
 276:..//kernel/core/tos_priority_queue.c ****     TOS_CPU_CPSR_ALLOC();
 1801              		.loc 1 276 1 is_stmt 0 view .LVU505
 1802 0002 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1803              	.LCFI37:
 1804              		.cfi_def_cfa_offset 24
 1805              		.cfi_offset 3, -24
 1806              		.cfi_offset 4, -20
 1807              		.cfi_offset 5, -16
 1808              		.cfi_offset 6, -12
 1809              		.cfi_offset 7, -8
 1810              		.cfi_offset 14, -4
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 49


 1811 0004 0446     		mov	r4, r0
 281:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1812              		.loc 1 281 5 is_stmt 1 view .LVU506
 281:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1813              		.loc 1 281 5 view .LVU507
 1814 0006 B1B3     		cbz	r1, .L123
 282:..//kernel/core/tos_priority_queue.c **** 
 1815              		.loc 1 282 5 view .LVU508
 282:..//kernel/core/tos_priority_queue.c **** 
 1816              		.loc 1 282 5 view .LVU509
 1817              	.LVL200:
 1818              	.LBB80:
 1819              	.LBI80:
 182:..//kernel/core/include/tos_sys.h **** {
 1820              		.loc 2 182 31 view .LVU510
 1821              	.LBB81:
 184:..//kernel/core/include/tos_sys.h **** }
 1822              		.loc 2 184 5 view .LVU511
 184:..//kernel/core/include/tos_sys.h **** }
 1823              		.loc 2 184 19 is_stmt 0 view .LVU512
 1824 0008 4588     		ldrh	r5, [r0, #2]
 1825              	.LVL201:
 184:..//kernel/core/include/tos_sys.h **** }
 1826              		.loc 2 184 19 view .LVU513
 1827              	.LBE81:
 1828              	.LBE80:
 282:..//kernel/core/tos_priority_queue.c **** 
 1829              		.loc 1 282 5 view .LVU514
 1830 000a 4DF6D520 		movw	r0, #56021
 1831              	.LVL202:
 282:..//kernel/core/tos_priority_queue.c **** 
 1832              		.loc 1 282 5 view .LVU515
 1833 000e 8542     		cmp	r5, r0
 1834 0010 34D1     		bne	.L124
 284:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_ITEM_SIZE_NOT_MATCH;
 1835              		.loc 1 284 5 is_stmt 1 view .LVU516
 284:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_ITEM_SIZE_NOT_MATCH;
 1836              		.loc 1 284 28 is_stmt 0 view .LVU517
 1837 0012 E06A     		ldr	r0, [r4, #44]
 284:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_ITEM_SIZE_NOT_MATCH;
 1838              		.loc 1 284 8 view .LVU518
 1839 0014 9042     		cmp	r0, r2
 1840 0016 02D0     		beq	.L131
 285:..//kernel/core/tos_priority_queue.c ****     }
 1841              		.loc 1 285 16 view .LVU519
 1842 0018 40F27B50 		movw	r0, #1403
 1843 001c 30E0     		b	.L119
 1844              	.L131:
 1845 001e 1E46     		mov	r6, r3
 1846 0020 0D46     		mov	r5, r1
 288:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_FULL;
 1847              		.loc 1 288 5 is_stmt 1 view .LVU520
 288:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_FULL;
 1848              		.loc 1 288 9 is_stmt 0 view .LVU521
 1849 0022 2046     		mov	r0, r4
 1850 0024 FFF7FEFF 		bl	tos_prio_q_is_full
 1851              	.LVL203:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 50


 288:..//kernel/core/tos_priority_queue.c ****         return K_ERR_PRIO_Q_FULL;
 1852              		.loc 1 288 8 view .LVU522
 1853 0028 58BB     		cbnz	r0, .L126
 292:..//kernel/core/tos_priority_queue.c **** 
 1854              		.loc 1 292 5 is_stmt 1 view .LVU523
 292:..//kernel/core/tos_priority_queue.c **** 
 1855              		.loc 1 292 5 view .LVU524
 1856 002a FFF7FEFF 		bl	tos_cpu_cpsr_save
 1857              	.LVL204:
 1858 002e 0746     		mov	r7, r0
 1859              	.LVL205:
 294:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(the_slot != PRIO_Q_POOL_SLOT_INVALID);
 1860              		.loc 1 294 5 view .LVU525
 294:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(the_slot != PRIO_Q_POOL_SLOT_INVALID);
 1861              		.loc 1 294 16 is_stmt 0 view .LVU526
 1862 0030 201D     		adds	r0, r4, #4
 1863              	.LVL206:
 294:..//kernel/core/tos_priority_queue.c ****     TOS_ASSERT(the_slot != PRIO_Q_POOL_SLOT_INVALID);
 1864              		.loc 1 294 16 view .LVU527
 1865 0032 FFF7FEFF 		bl	prio_q_pool_mgr_slot_alloc
 1866              	.LVL207:
 1867 0036 0246     		mov	r2, r0
 1868              	.LVL208:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1869              		.loc 1 295 5 is_stmt 1 view .LVU528
 1870 0038 4FF6FF73 		movw	r3, #65535
 1871 003c 9842     		cmp	r0, r3
 1872 003e 09D0     		beq	.L132
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1873              		.loc 1 295 53 discriminator 2 view .LVU529
 296:..//kernel/core/tos_priority_queue.c **** 
 1874              		.loc 1 296 5 discriminator 2 view .LVU530
 1875 0040 3346     		mov	r3, r6
 1876 0042 2946     		mov	r1, r5
 1877 0044 2046     		mov	r0, r4
 1878              	.LVL209:
 296:..//kernel/core/tos_priority_queue.c **** 
 1879              		.loc 1 296 5 is_stmt 0 discriminator 2 view .LVU531
 1880 0046 FFF7FEFF 		bl	prio_q_do_enqueue
 1881              	.LVL210:
 298:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 1882              		.loc 1 298 5 is_stmt 1 discriminator 2 view .LVU532
 298:..//kernel/core/tos_priority_queue.c ****     return K_ERR_NONE;
 1883              		.loc 1 298 5 discriminator 2 view .LVU533
 1884 004a 3846     		mov	r0, r7
 1885 004c FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1886              	.LVL211:
 299:..//kernel/core/tos_priority_queue.c **** }
 1887              		.loc 1 299 5 discriminator 2 view .LVU534
 299:..//kernel/core/tos_priority_queue.c **** }
 1888              		.loc 1 299 12 is_stmt 0 discriminator 2 view .LVU535
 1889 0050 0020     		movs	r0, #0
 1890 0052 15E0     		b	.L119
 1891              	.LVL212:
 1892              	.L132:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1893              		.loc 1 295 5 is_stmt 1 discriminator 1 view .LVU536
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 51


 1894 0054 40F22712 		movw	r2, #295
 1895 0058 0B49     		ldr	r1, .L133
 1896 005a 0C48     		ldr	r0, .L133+4
 1897              	.LVL213:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1898              		.loc 1 295 5 is_stmt 0 discriminator 1 view .LVU537
 1899 005c FFF7FEFF 		bl	printf
 1900              	.LVL214:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1901              		.loc 1 295 5 is_stmt 1 discriminator 1 view .LVU538
 1902 0060 0A20     		movs	r0, #10
 1903 0062 FFF7FEFF 		bl	putchar
 1904              	.LVL215:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1905              		.loc 1 295 5 discriminator 1 view .LVU539
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1906              		.loc 1 295 5 discriminator 1 view .LVU540
 1907 0066 FFF7FEFF 		bl	tos_knl_sched_lock
 1908              	.LVL216:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1909              		.loc 1 295 5 discriminator 1 view .LVU541
 1910 006a FFF7FEFF 		bl	tos_cpu_int_disable
 1911              	.LVL217:
 1912              	.L121:
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1913              		.loc 1 295 5 discriminator 1 view .LVU542
 295:..//kernel/core/tos_priority_queue.c ****     prio_q_do_enqueue(prio_q, item, the_slot, prio);
 1914              		.loc 1 295 5 discriminator 1 view .LVU543
 1915 006e FEE7     		b	.L121
 1916              	.LVL218:
 1917              	.L122:
 1918              	.LCFI38:
 1919              		.cfi_def_cfa_offset 0
 1920              		.cfi_restore 3
 1921              		.cfi_restore 4
 1922              		.cfi_restore 5
 1923              		.cfi_restore 6
 1924              		.cfi_restore 7
 1925              		.cfi_restore 14
 280:..//kernel/core/tos_priority_queue.c ****     TOS_PTR_SANITY_CHECK(item);
 1926              		.loc 1 280 5 is_stmt 0 view .LVU544
 1927 0070 40F24C40 		movw	r0, #1100
 1928              	.LVL219:
 300:..//kernel/core/tos_priority_queue.c **** 
 1929              		.loc 1 300 1 view .LVU545
 1930 0074 7047     		bx	lr
 1931              	.LVL220:
 1932              	.L123:
 1933              	.LCFI39:
 1934              		.cfi_def_cfa_offset 24
 1935              		.cfi_offset 3, -24
 1936              		.cfi_offset 4, -20
 1937              		.cfi_offset 5, -16
 1938              		.cfi_offset 6, -12
 1939              		.cfi_offset 7, -8
 1940              		.cfi_offset 14, -4
 281:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 52


 1941              		.loc 1 281 5 view .LVU546
 1942 0076 40F24C40 		movw	r0, #1100
 1943              	.LVL221:
 281:..//kernel/core/tos_priority_queue.c ****     TOS_OBJ_VERIFY(prio_q, KNL_OBJ_TYPE_PRIORITY_QUEUE);
 1944              		.loc 1 281 5 view .LVU547
 1945 007a 01E0     		b	.L119
 1946              	.L124:
 282:..//kernel/core/tos_priority_queue.c **** 
 1947              		.loc 1 282 5 view .LVU548
 1948 007c 40F24D40 		movw	r0, #1101
 1949              	.LVL222:
 1950              	.L119:
 300:..//kernel/core/tos_priority_queue.c **** 
 1951              		.loc 1 300 1 view .LVU549
 1952 0080 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1953              	.LVL223:
 1954              	.L126:
 289:..//kernel/core/tos_priority_queue.c ****     }
 1955              		.loc 1 289 16 view .LVU550
 1956 0082 40F27950 		movw	r0, #1401
 1957 0086 FBE7     		b	.L119
 1958              	.L134:
 1959              		.align	2
 1960              	.L133:
 1961 0088 00000000 		.word	.LANCHOR2
 1962 008c 00000000 		.word	.LC0
 1963              		.cfi_endproc
 1964              	.LFE130:
 1966              		.section	.rodata.__FUNCTION__.8460,"a"
 1967              		.align	2
 1968              		.set	.LANCHOR0,. + 0
 1971              	__FUNCTION__.8460:
 1972 0000 7072696F 		.ascii	"prio_q_prio_mgr_slot_enqueue\000"
 1972      5F715F70 
 1972      72696F5F 
 1972      6D67725F 
 1972      736C6F74 
 1973              		.section	.rodata.__FUNCTION__.8469,"a"
 1974              		.align	2
 1975              		.set	.LANCHOR1,. + 0
 1978              	__FUNCTION__.8469:
 1979 0000 7072696F 		.ascii	"prio_q_prio_mgr_slot_dequeue\000"
 1979      5F715F70 
 1979      72696F5F 
 1979      6D67725F 
 1979      736C6F74 
 1980              		.section	.rodata.__FUNCTION__.8509,"a"
 1981              		.align	2
 1982              		.set	.LANCHOR2,. + 0
 1985              	__FUNCTION__.8509:
 1986 0000 746F735F 		.ascii	"tos_prio_q_enqueue\000"
 1986      7072696F 
 1986      5F715F65 
 1986      6E717565 
 1986      756500
 1987              		.section	.rodata.prio_q_prio_mgr_slot_enqueue.str1.4,"aMS",%progbits,1
 1988              		.align	2
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 53


 1989              	.LC0:
 1990 0000 61737365 		.ascii	"assert failed: %s %d\012\000"
 1990      72742066 
 1990      61696C65 
 1990      643A2025 
 1990      73202564 
 1991              		.text
 1992              	.Letext0:
 1993              		.file 3 "..//kernel/core/include/tos_kerr.h"
 1994              		.file 4 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 1995              		.file 5 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 1996              		.file 6 "Drivers/CMSIS/Include/core_cm3.h"
 1997              		.file 7 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1998              		.file 8 "d:\\arm_gcc\\8 2019-q3-update\\lib\\gcc\\arm-none-eabi\\8.3.1\\include\\stddef.h"
 1999              		.file 9 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\_types.h"
 2000              		.file 10 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\reent.h"
 2001              		.file 11 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\lock.h"
 2002              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 2003              		.file 13 "..//arch/arm/arm-v7m/common/include/tos_cpu_types.h"
 2004              		.file 14 "..//kernel/core/include/tos_ktypes.h"
 2005              		.file 15 "..//kernel/core/include/tos_task.h"
 2006              		.file 16 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\stdlib.h"
 2007              		.file 17 "..//kernel/core/include/tos_list.h"
 2008              		.file 18 "..//kernel/core/include/tos_pend.h"
 2009              		.file 19 "..//kernel/core/include/tos_binary_heap.h"
 2010              		.file 20 "..//kernel/core/include/tos_priority_queue.h"
 2011              		.file 21 "..//kernel/core/include/tos_timer.h"
 2012              		.file 22 "..//kernel/core/include/tos_mmheap.h"
 2013              		.file 23 "..//kernel/core/include/tos_sched.h"
 2014              		.file 24 "..//kernel/core/include/tos_global.h"
 2015              		.file 25 "..//arch/arm/arm-v7m/common/include/tos_cpu.h"
 2016              		.file 26 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\stdio.h"
 2017              		.file 27 "<built-in>"
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 54


DEFINED SYMBOLS
                            *ABS*:00000000 tos_priority_queue.c
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:16     .text.prio_q_pool_mgr_init:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:23     .text.prio_q_pool_mgr_init:00000000 prio_q_pool_mgr_init
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:78     .text.prio_q_pool_mgr_reset:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:84     .text.prio_q_pool_mgr_reset:00000000 prio_q_pool_mgr_reset
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:139    .text.prio_q_pool_mgr_deinit:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:145    .text.prio_q_pool_mgr_deinit:00000000 prio_q_pool_mgr_deinit
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:166    .text.prio_q_mgr_entry_cmp:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:172    .text.prio_q_mgr_entry_cmp:00000000 prio_q_mgr_entry_cmp
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:207    .text.prio_q_pool_mgr_slot_alloc:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:213    .text.prio_q_pool_mgr_slot_alloc:00000000 prio_q_pool_mgr_slot_alloc
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:254    .text.prio_q_pool_mgr_slot_free:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:260    .text.prio_q_pool_mgr_slot_free:00000000 prio_q_pool_mgr_slot_free
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:287    .text.prio_q_prio_mgr_init:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:293    .text.prio_q_prio_mgr_init:00000000 prio_q_prio_mgr_init
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:326    .text.prio_q_prio_mgr_init:00000018 $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:331    .text.prio_q_prio_mgr_deinit:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:337    .text.prio_q_prio_mgr_deinit:00000000 prio_q_prio_mgr_deinit
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:363    .text.prio_q_do_dequeue:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:369    .text.prio_q_do_dequeue:00000000 prio_q_do_dequeue
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:449    .text.prio_q_prio_mgr_slot_enqueue:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:455    .text.prio_q_prio_mgr_slot_enqueue:00000000 prio_q_prio_mgr_slot_enqueue
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:526    .text.prio_q_prio_mgr_slot_enqueue:00000038 $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:532    .text.prio_q_do_enqueue:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:538    .text.prio_q_do_enqueue:00000000 prio_q_do_enqueue
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:607    .text.prio_q_prio_mgr_slot_dequeue:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:613    .text.prio_q_prio_mgr_slot_dequeue:00000000 prio_q_prio_mgr_slot_dequeue
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:724    .text.prio_q_prio_mgr_slot_dequeue:0000005c $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:730    .text.prio_q_prio_mgr_reset:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:736    .text.prio_q_prio_mgr_reset:00000000 prio_q_prio_mgr_reset
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:758    .text.tos_prio_q_create:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:765    .text.tos_prio_q_create:00000000 tos_prio_q_create
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:908    .text.tos_prio_q_destroy:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:915    .text.tos_prio_q_destroy:00000000 tos_prio_q_destroy
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1055   .text.tos_prio_q_create_dyn:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1062   .text.tos_prio_q_create_dyn:00000000 tos_prio_q_create_dyn
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1215   .text.tos_prio_q_destroy_dyn:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1222   .text.tos_prio_q_destroy_dyn:00000000 tos_prio_q_destroy_dyn
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1370   .text.tos_prio_q_flush:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1377   .text.tos_prio_q_flush:00000000 tos_prio_q_flush
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1470   .text.tos_prio_q_is_empty:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1477   .text.tos_prio_q_is_empty:00000000 tos_prio_q_is_empty
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1553   .text.tos_prio_q_dequeue:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1560   .text.tos_prio_q_dequeue:00000000 tos_prio_q_dequeue
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1695   .text.tos_prio_q_is_full:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1702   .text.tos_prio_q_is_full:00000000 tos_prio_q_is_full
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1782   .text.tos_prio_q_enqueue:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1789   .text.tos_prio_q_enqueue:00000000 tos_prio_q_enqueue
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1961   .text.tos_prio_q_enqueue:00000088 $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1967   .rodata.__FUNCTION__.8460:00000000 $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1971   .rodata.__FUNCTION__.8460:00000000 __FUNCTION__.8460
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1974   .rodata.__FUNCTION__.8469:00000000 $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1978   .rodata.__FUNCTION__.8469:00000000 __FUNCTION__.8469
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1981   .rodata.__FUNCTION__.8509:00000000 $d
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1985   .rodata.__FUNCTION__.8509:00000000 __FUNCTION__.8509
C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s:1988   .rodata.prio_q_prio_mgr_slot_enqueue.str1.4:00000000 $d
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccb2E8GG.s 			page 55



UNDEFINED SYMBOLS
tos_bin_heap_create
tos_bin_heap_destroy
memcpy
tos_bin_heap_push
printf
putchar
tos_knl_sched_lock
tos_cpu_int_disable
tos_bin_heap_pop
tos_bin_heap_flush
tos_mmheap_alloc
tos_mmheap_free
tos_cpu_cpsr_save
tos_cpu_cpsr_restore
