ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"tos_priority_mail_queue.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.prio_mail_task_recv,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	prio_mail_task_recv:
  24              	.LVL0:
  25              	.LFB116:
  26              		.file 1 "..//kernel/core/tos_priority_mail_queue.c"
   1:..//kernel/core/tos_priority_mail_queue.c **** /*----------------------------------------------------------------------------
   2:..//kernel/core/tos_priority_mail_queue.c ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/tos_priority_mail_queue.c ****  * available.
   4:..//kernel/core/tos_priority_mail_queue.c ****  *
   5:..//kernel/core/tos_priority_mail_queue.c ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/tos_priority_mail_queue.c ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/tos_priority_mail_queue.c ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/tos_priority_mail_queue.c ****  *
   9:..//kernel/core/tos_priority_mail_queue.c ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/tos_priority_mail_queue.c ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/tos_priority_mail_queue.c ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/tos_priority_mail_queue.c ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/tos_priority_mail_queue.c ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/tos_priority_mail_queue.c ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/tos_priority_mail_queue.c ****  * within TencentOS.
  16:..//kernel/core/tos_priority_mail_queue.c ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/tos_priority_mail_queue.c **** 
  18:..//kernel/core/tos_priority_mail_queue.c **** #include "tos_k.h"
  19:..//kernel/core/tos_priority_mail_queue.c **** 
  20:..//kernel/core/tos_priority_mail_queue.c **** #if TOS_CFG_PRIORITY_MAIL_QUEUE_EN > 0u
  21:..//kernel/core/tos_priority_mail_queue.c **** 
  22:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_create(k_prio_mail_q_t *prio_mail_q, void *pool, size_t mail_cnt, s
  23:..//kernel/core/tos_priority_mail_queue.c **** {
  24:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
  25:..//kernel/core/tos_priority_mail_queue.c ****     void *prio_q_mgr_array = K_NULL;
  26:..//kernel/core/tos_priority_mail_queue.c **** 
  27:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
  28:..//kernel/core/tos_priority_mail_queue.c **** 
  29:..//kernel/core/tos_priority_mail_queue.c ****     prio_q_mgr_array = tos_mmheap_alloc(TOS_PRIO_Q_MGR_ARRAY_SIZE(mail_cnt));
  30:..//kernel/core/tos_priority_mail_queue.c ****     if (!prio_q_mgr_array) {
  31:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OUT_OF_MEMORY;
  32:..//kernel/core/tos_priority_mail_queue.c ****     }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 2


  33:..//kernel/core/tos_priority_mail_queue.c **** 
  34:..//kernel/core/tos_priority_mail_queue.c ****     err = tos_prio_q_create(&prio_mail_q->prio_q, prio_q_mgr_array, pool, mail_cnt, mail_size);
  35:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
  36:..//kernel/core/tos_priority_mail_queue.c ****         tos_mmheap_free(prio_q_mgr_array);
  37:..//kernel/core/tos_priority_mail_queue.c ****         return err;
  38:..//kernel/core/tos_priority_mail_queue.c ****     }
  39:..//kernel/core/tos_priority_mail_queue.c **** 
  40:..//kernel/core/tos_priority_mail_queue.c ****     prio_mail_q->prio_q_mgr_array = prio_q_mgr_array;
  41:..//kernel/core/tos_priority_mail_queue.c ****     pend_object_init(&prio_mail_q->pend_obj);
  42:..//kernel/core/tos_priority_mail_queue.c **** 
  43:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_INIT(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
  44:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_set_static(&prio_mail_q->knl_obj);
  45:..//kernel/core/tos_priority_mail_queue.c **** 
  46:..//kernel/core/tos_priority_mail_queue.c ****     return K_ERR_NONE;
  47:..//kernel/core/tos_priority_mail_queue.c **** }
  48:..//kernel/core/tos_priority_mail_queue.c **** 
  49:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_destroy(k_prio_mail_q_t *prio_mail_q)
  50:..//kernel/core/tos_priority_mail_queue.c **** {
  51:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
  52:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
  53:..//kernel/core/tos_priority_mail_queue.c **** 
  54:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
  55:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
  56:..//kernel/core/tos_priority_mail_queue.c **** 
  57:..//kernel/core/tos_priority_mail_queue.c ****     if (!knl_object_alloc_is_static(&prio_mail_q->knl_obj)) {
  58:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
  59:..//kernel/core/tos_priority_mail_queue.c ****     }
  60:..//kernel/core/tos_priority_mail_queue.c **** 
  61:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_DISABLE();
  62:..//kernel/core/tos_priority_mail_queue.c **** 
  63:..//kernel/core/tos_priority_mail_queue.c ****     err = tos_prio_q_destroy(&prio_mail_q->prio_q);
  64:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
  65:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
  66:..//kernel/core/tos_priority_mail_queue.c ****         return err;
  67:..//kernel/core/tos_priority_mail_queue.c ****     }
  68:..//kernel/core/tos_priority_mail_queue.c **** 
  69:..//kernel/core/tos_priority_mail_queue.c ****     pend_wakeup_all(&prio_mail_q->pend_obj, PEND_STATE_DESTROY);
  70:..//kernel/core/tos_priority_mail_queue.c **** 
  71:..//kernel/core/tos_priority_mail_queue.c ****     tos_mmheap_free(prio_mail_q->prio_q_mgr_array);
  72:..//kernel/core/tos_priority_mail_queue.c ****     prio_mail_q->prio_q_mgr_array = K_NULL;
  73:..//kernel/core/tos_priority_mail_queue.c **** 
  74:..//kernel/core/tos_priority_mail_queue.c ****     pend_object_deinit(&prio_mail_q->pend_obj);
  75:..//kernel/core/tos_priority_mail_queue.c **** 
  76:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_DEINIT(prio_mail_q);
  77:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_reset(&prio_mail_q->knl_obj);
  78:..//kernel/core/tos_priority_mail_queue.c **** 
  79:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_ENABLE();
  80:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
  81:..//kernel/core/tos_priority_mail_queue.c **** 
  82:..//kernel/core/tos_priority_mail_queue.c ****     return K_ERR_NONE;
  83:..//kernel/core/tos_priority_mail_queue.c **** }
  84:..//kernel/core/tos_priority_mail_queue.c **** 
  85:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_create_dyn(k_prio_mail_q_t *prio_mail_q, size_t mail_cnt, size_t ma
  86:..//kernel/core/tos_priority_mail_queue.c **** {
  87:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
  88:..//kernel/core/tos_priority_mail_queue.c **** 
  89:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 3


  90:..//kernel/core/tos_priority_mail_queue.c **** 
  91:..//kernel/core/tos_priority_mail_queue.c ****     err = tos_prio_q_create_dyn(&prio_mail_q->prio_q, mail_cnt, mail_size);
  92:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
  93:..//kernel/core/tos_priority_mail_queue.c ****         return err;
  94:..//kernel/core/tos_priority_mail_queue.c ****     }
  95:..//kernel/core/tos_priority_mail_queue.c **** 
  96:..//kernel/core/tos_priority_mail_queue.c ****     pend_object_init(&prio_mail_q->pend_obj);
  97:..//kernel/core/tos_priority_mail_queue.c **** 
  98:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_INIT(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
  99:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_set_dynamic(&prio_mail_q->knl_obj);
 100:..//kernel/core/tos_priority_mail_queue.c **** 
 101:..//kernel/core/tos_priority_mail_queue.c ****     return K_ERR_NONE;
 102:..//kernel/core/tos_priority_mail_queue.c **** }
 103:..//kernel/core/tos_priority_mail_queue.c **** 
 104:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_destroy_dyn(k_prio_mail_q_t *prio_mail_q)
 105:..//kernel/core/tos_priority_mail_queue.c **** {
 106:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 107:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 108:..//kernel/core/tos_priority_mail_queue.c **** 
 109:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 110:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 111:..//kernel/core/tos_priority_mail_queue.c **** 
 112:..//kernel/core/tos_priority_mail_queue.c ****     if (!knl_object_alloc_is_dynamic(&prio_mail_q->knl_obj)) {
 113:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 114:..//kernel/core/tos_priority_mail_queue.c ****     }
 115:..//kernel/core/tos_priority_mail_queue.c **** 
 116:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_DISABLE();
 117:..//kernel/core/tos_priority_mail_queue.c **** 
 118:..//kernel/core/tos_priority_mail_queue.c ****     err = tos_prio_q_destroy_dyn(&prio_mail_q->prio_q);
 119:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 120:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 121:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 122:..//kernel/core/tos_priority_mail_queue.c ****     }
 123:..//kernel/core/tos_priority_mail_queue.c **** 
 124:..//kernel/core/tos_priority_mail_queue.c ****     pend_wakeup_all(&prio_mail_q->pend_obj, PEND_STATE_DESTROY);
 125:..//kernel/core/tos_priority_mail_queue.c **** 
 126:..//kernel/core/tos_priority_mail_queue.c ****     pend_object_deinit(&prio_mail_q->pend_obj);
 127:..//kernel/core/tos_priority_mail_queue.c **** 
 128:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_DEINIT(prio_mail_q);
 129:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_reset(&prio_mail_q->knl_obj);
 130:..//kernel/core/tos_priority_mail_queue.c **** 
 131:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_ENABLE();
 132:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 133:..//kernel/core/tos_priority_mail_queue.c **** 
 134:..//kernel/core/tos_priority_mail_queue.c ****     return K_ERR_NONE;
 135:..//kernel/core/tos_priority_mail_queue.c **** }
 136:..//kernel/core/tos_priority_mail_queue.c **** 
 137:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_flush(k_prio_mail_q_t *prio_mail_q)
 138:..//kernel/core/tos_priority_mail_queue.c **** {
 139:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 140:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 141:..//kernel/core/tos_priority_mail_queue.c **** 
 142:..//kernel/core/tos_priority_mail_queue.c ****     return tos_prio_q_flush(&prio_mail_q->prio_q);
 143:..//kernel/core/tos_priority_mail_queue.c **** }
 144:..//kernel/core/tos_priority_mail_queue.c **** 
 145:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_pend(k_prio_mail_q_t *prio_mail_q, void *mail_buf, size_t *mail_siz
 146:..//kernel/core/tos_priority_mail_queue.c **** {
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 4


 147:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 148:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 149:..//kernel/core/tos_priority_mail_queue.c **** 
 150:..//kernel/core/tos_priority_mail_queue.c ****     TOS_IN_IRQ_CHECK();
 151:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 152:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(mail_buf);
 153:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 154:..//kernel/core/tos_priority_mail_queue.c **** 
 155:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_DISABLE();
 156:..//kernel/core/tos_priority_mail_queue.c **** 
 157:..//kernel/core/tos_priority_mail_queue.c ****     if (tos_prio_q_dequeue(&prio_mail_q->prio_q, mail_buf, mail_size, K_NULL) == K_ERR_NONE) {
 158:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 159:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 160:..//kernel/core/tos_priority_mail_queue.c ****     }
 161:..//kernel/core/tos_priority_mail_queue.c **** 
 162:..//kernel/core/tos_priority_mail_queue.c ****     if (timeout == TOS_TIME_NOWAIT) {
 163:..//kernel/core/tos_priority_mail_queue.c ****         *mail_size = 0;
 164:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 165:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_PEND_NOWAIT;
 166:..//kernel/core/tos_priority_mail_queue.c ****     }
 167:..//kernel/core/tos_priority_mail_queue.c **** 
 168:..//kernel/core/tos_priority_mail_queue.c ****     if (knl_is_sched_locked()) {
 169:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 170:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_PEND_SCHED_LOCKED;
 171:..//kernel/core/tos_priority_mail_queue.c ****     }
 172:..//kernel/core/tos_priority_mail_queue.c **** 
 173:..//kernel/core/tos_priority_mail_queue.c ****     k_curr_task->mail = mail_buf;
 174:..//kernel/core/tos_priority_mail_queue.c ****     pend_task_block(k_curr_task, &prio_mail_q->pend_obj, timeout);
 175:..//kernel/core/tos_priority_mail_queue.c **** 
 176:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_ENABLE();
 177:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 178:..//kernel/core/tos_priority_mail_queue.c **** 
 179:..//kernel/core/tos_priority_mail_queue.c ****     err = pend_state2errno(k_curr_task->pend_state);
 180:..//kernel/core/tos_priority_mail_queue.c ****     if (err == K_ERR_NONE) {
 181:..//kernel/core/tos_priority_mail_queue.c ****         *mail_size              = k_curr_task->mail_size;
 182:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail       = K_NULL;
 183:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail_size  = 0;
 184:..//kernel/core/tos_priority_mail_queue.c ****     }
 185:..//kernel/core/tos_priority_mail_queue.c **** 
 186:..//kernel/core/tos_priority_mail_queue.c ****     return err;
 187:..//kernel/core/tos_priority_mail_queue.c **** }
 188:..//kernel/core/tos_priority_mail_queue.c **** 
 189:..//kernel/core/tos_priority_mail_queue.c **** __STATIC__ void prio_mail_task_recv(k_task_t *task, void *mail_buf, size_t mail_size)
 190:..//kernel/core/tos_priority_mail_queue.c **** {
  27              		.loc 1 190 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		.loc 1 190 1 is_stmt 0 view .LVU1
  32 0000 38B5     		push	{r3, r4, r5, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 16
  35              		.cfi_offset 3, -16
  36              		.cfi_offset 4, -12
  37              		.cfi_offset 5, -8
  38              		.cfi_offset 14, -4
  39 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 5


  40 0004 1546     		mov	r5, r2
 191:..//kernel/core/tos_priority_mail_queue.c ****     memcpy(task->mail, mail_buf, mail_size);
  41              		.loc 1 191 5 is_stmt 1 view .LVU2
  42 0006 006F     		ldr	r0, [r0, #112]
  43              	.LVL1:
  44              		.loc 1 191 5 is_stmt 0 view .LVU3
  45 0008 FFF7FEFF 		bl	memcpy
  46              	.LVL2:
 192:..//kernel/core/tos_priority_mail_queue.c ****     task->mail_size = mail_size;
  47              		.loc 1 192 5 is_stmt 1 view .LVU4
  48              		.loc 1 192 21 is_stmt 0 view .LVU5
  49 000c 6567     		str	r5, [r4, #116]
 193:..//kernel/core/tos_priority_mail_queue.c ****     pend_task_wakeup(task, PEND_STATE_POST);
  50              		.loc 1 193 5 is_stmt 1 view .LVU6
  51 000e 0121     		movs	r1, #1
  52 0010 2046     		mov	r0, r4
  53 0012 FFF7FEFF 		bl	pend_task_wakeup
  54              	.LVL3:
 194:..//kernel/core/tos_priority_mail_queue.c **** }
  55              		.loc 1 194 1 is_stmt 0 view .LVU7
  56 0016 38BD     		pop	{r3, r4, r5, pc}
  57              		.loc 1 194 1 view .LVU8
  58              		.cfi_endproc
  59              	.LFE116:
  61              		.section	.text.prio_mail_q_do_post,"ax",%progbits
  62              		.align	1
  63              		.syntax unified
  64              		.thumb
  65              		.thumb_func
  66              		.fpu softvfp
  68              	prio_mail_q_do_post:
  69              	.LVL4:
  70              	.LFB117:
 195:..//kernel/core/tos_priority_mail_queue.c **** 
 196:..//kernel/core/tos_priority_mail_queue.c **** __STATIC__ k_err_t prio_mail_q_do_post(k_prio_mail_q_t *prio_mail_q, void *mail_buf, size_t mail_si
 197:..//kernel/core/tos_priority_mail_queue.c **** {
  71              		.loc 1 197 1 is_stmt 1 view -0
  72              		.cfi_startproc
  73              		@ args = 4, pretend = 0, frame = 0
  74              		@ frame_needed = 0, uses_anonymous_args = 0
  75              		.loc 1 197 1 is_stmt 0 view .LVU10
  76 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
  77              	.LCFI1:
  78              		.cfi_def_cfa_offset 32
  79              		.cfi_offset 3, -32
  80              		.cfi_offset 4, -28
  81              		.cfi_offset 5, -24
  82              		.cfi_offset 6, -20
  83              		.cfi_offset 7, -16
  84              		.cfi_offset 8, -12
  85              		.cfi_offset 9, -8
  86              		.cfi_offset 14, -4
  87 0004 9DF82050 		ldrb	r5, [sp, #32]	@ zero_extendqisi2
 198:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
  88              		.loc 1 198 5 is_stmt 1 view .LVU11
  89              	.LVL5:
 199:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 6


  90              		.loc 1 199 5 view .LVU12
 200:..//kernel/core/tos_priority_mail_queue.c ****     k_task_t *task, *tmp;
  91              		.loc 1 200 5 view .LVU13
 201:..//kernel/core/tos_priority_mail_queue.c **** 
 202:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
  92              		.loc 1 202 5 view .LVU14
  93              		.loc 1 202 5 view .LVU15
  94 0008 0028     		cmp	r0, #0
  95 000a 47D0     		beq	.L11
  96 000c 0446     		mov	r4, r0
 203:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(mail_buf);
  97              		.loc 1 203 5 view .LVU16
  98              		.loc 1 203 5 view .LVU17
  99 000e 0029     		cmp	r1, #0
 100 0010 47D0     		beq	.L12
 204:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 101              		.loc 1 204 5 view .LVU18
 102              		.loc 1 204 5 view .LVU19
 103              	.LVL6:
 104              	.LBB32:
 105              	.LBI32:
 106              		.file 2 "..//kernel/core/include/tos_sys.h"
   1:..//kernel/core/include/tos_sys.h **** /*----------------------------------------------------------------------------
   2:..//kernel/core/include/tos_sys.h ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/include/tos_sys.h ****  * available.
   4:..//kernel/core/include/tos_sys.h ****  *
   5:..//kernel/core/include/tos_sys.h ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/include/tos_sys.h ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/include/tos_sys.h ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/include/tos_sys.h ****  *
   9:..//kernel/core/include/tos_sys.h ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/include/tos_sys.h ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/include/tos_sys.h ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/include/tos_sys.h ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/include/tos_sys.h ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/include/tos_sys.h ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/include/tos_sys.h ****  * within TencentOS.
  16:..//kernel/core/include/tos_sys.h ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/include/tos_sys.h **** 
  18:..//kernel/core/include/tos_sys.h **** #ifndef _TOS_SYS_H_
  19:..//kernel/core/include/tos_sys.h **** #define  _TOS_SYS_H_
  20:..//kernel/core/include/tos_sys.h **** 
  21:..//kernel/core/include/tos_sys.h **** __CDECLS_BEGIN
  22:..//kernel/core/include/tos_sys.h **** 
  23:..//kernel/core/include/tos_sys.h **** #define K_NESTING_LIMIT_IRQ             (k_nesting_t)250u
  24:..//kernel/core/include/tos_sys.h **** #define K_NESTING_LIMIT_SCHED_LOCK      (k_nesting_t)250u
  25:..//kernel/core/include/tos_sys.h **** 
  26:..//kernel/core/include/tos_sys.h **** typedef enum knl_state_en {
  27:..//kernel/core/include/tos_sys.h ****     KNL_STATE_STOPPED,
  28:..//kernel/core/include/tos_sys.h ****     KNL_STATE_RUNNING,
  29:..//kernel/core/include/tos_sys.h **** } knl_state_t;
  30:..//kernel/core/include/tos_sys.h **** 
  31:..//kernel/core/include/tos_sys.h **** // some kind of magic number, mainly for identifing whether the object is initialized, or whether u
  32:..//kernel/core/include/tos_sys.h **** typedef enum knl_obj_type_en {
  33:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_NONE                           = 0x0000,
  34:..//kernel/core/include/tos_sys.h **** 
  35:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BINARY_HEAP                    = 0xDAD0,
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 7


  36:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BITMAP                         = 0xDAD1,
  37:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_CHAR_FIFO                      = 0xDAD2,
  38:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MMBLK_POOL                     = 0xDAD3,
  39:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MSG_QUEUE                      = 0xDAD4,
  40:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_QUEUE                 = 0xDAD5,
  41:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_RING_QUEUE                     = 0xDAD6,
  42:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_STOPWATCH                      = 0xDAD7,
  43:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_TASK                           = 0xDAD8,
  44:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_TIMER                          = 0xDAD9,
  45:..//kernel/core/include/tos_sys.h **** 
  46:..//kernel/core/include/tos_sys.h ****     // ipc object
  47:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BARRIER                        = 0x0BEE,
  48:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_COMPLETION                     = 0x1BEE,
  49:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_COUNTDOWNLATCH                 = 0x2BEE,
  50:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_EVENT                          = 0x3BEE,
  51:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MAIL_QUEUE                     = 0x4BEE,
  52:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MESSAGE_QUEUE                  = 0x5BEE,
  53:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MUTEX                          = 0x6BEE,
  54:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE            = 0x7BEE,
  55:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_MESSAGE_QUEUE         = 0x8BEE,
  56:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_RWLOCK                         = 0x9BEE,
  57:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_SEMAPHORE                      = 0xABEE,
  58:..//kernel/core/include/tos_sys.h **** } knl_obj_type_t;
  59:..//kernel/core/include/tos_sys.h **** 
  60:..//kernel/core/include/tos_sys.h **** typedef enum knl_obj_alloc_type_en {
  61:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_NONE,
  62:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_STATIC,
  63:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_DYNAMIC,
  64:..//kernel/core/include/tos_sys.h **** } knl_obj_alloc_type_t;
  65:..//kernel/core/include/tos_sys.h **** 
  66:..//kernel/core/include/tos_sys.h **** typedef struct knl_object_st {
  67:..//kernel/core/include/tos_sys.h ****     knl_obj_alloc_type_t    alloc_type; /* is dynamic allocated(using tos_mmheap) or static memory?
  68:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_OBJECT_VERIFY_EN > 0u
  69:..//kernel/core/include/tos_sys.h ****     knl_obj_type_t          type;
  70:..//kernel/core/include/tos_sys.h **** #endif
  71:..//kernel/core/include/tos_sys.h **** } knl_obj_t;
  72:..//kernel/core/include/tos_sys.h **** 
  73:..//kernel/core/include/tos_sys.h **** /**
  74:..//kernel/core/include/tos_sys.h ****  * @brief Initialize the kernel.
  75:..//kernel/core/include/tos_sys.h ****  * initialize the tos tiny kernel.
  76:..//kernel/core/include/tos_sys.h ****  *
  77:..//kernel/core/include/tos_sys.h ****  * @attention None
  78:..//kernel/core/include/tos_sys.h ****  *
  79:..//kernel/core/include/tos_sys.h ****  * @param   None
  80:..//kernel/core/include/tos_sys.h ****  *
  81:..//kernel/core/include/tos_sys.h ****  * @return  errcode
  82:..//kernel/core/include/tos_sys.h ****  * @retval  Non-#K_ERR_NONE               return failed.
  83:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_NONE                   return successfully.
  84:..//kernel/core/include/tos_sys.h ****  */
  85:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_init(void);
  86:..//kernel/core/include/tos_sys.h **** 
  87:..//kernel/core/include/tos_sys.h **** /**
  88:..//kernel/core/include/tos_sys.h ****  * @brief Start the kernel.
  89:..//kernel/core/include/tos_sys.h ****  * get the kernel start to run, which means start the multitask scheduling.
  90:..//kernel/core/include/tos_sys.h ****  *
  91:..//kernel/core/include/tos_sys.h ****  * @attention None
  92:..//kernel/core/include/tos_sys.h ****  *
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 8


  93:..//kernel/core/include/tos_sys.h ****  * @param   None
  94:..//kernel/core/include/tos_sys.h ****  *
  95:..//kernel/core/include/tos_sys.h ****  * @return  errcode
  96:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_KNL_RUNNING            the kernel is already running.
  97:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_NONE                   return successfully.
  98:..//kernel/core/include/tos_sys.h ****  */
  99:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_start(void);
 100:..//kernel/core/include/tos_sys.h **** 
 101:..//kernel/core/include/tos_sys.h **** /**
 102:..//kernel/core/include/tos_sys.h ****  * @brief Get the kernel state.
 103:..//kernel/core/include/tos_sys.h ****  * whether the kernel is running.
 104:..//kernel/core/include/tos_sys.h ****  *
 105:..//kernel/core/include/tos_sys.h ****  * @attention None
 106:..//kernel/core/include/tos_sys.h ****  *
 107:..//kernel/core/include/tos_sys.h ****  * @param   None
 108:..//kernel/core/include/tos_sys.h ****  *
 109:..//kernel/core/include/tos_sys.h ****  * @return  whether the kernel is running.
 110:..//kernel/core/include/tos_sys.h ****  * @retval  Non-0                           the kernel is running.
 111:..//kernel/core/include/tos_sys.h ****  * @retval  0                               the kernel is not running.
 112:..//kernel/core/include/tos_sys.h ****  */
 113:..//kernel/core/include/tos_sys.h **** __API__ int     tos_knl_is_running(void);
 114:..//kernel/core/include/tos_sys.h **** 
 115:..//kernel/core/include/tos_sys.h **** /**
 116:..//kernel/core/include/tos_sys.h ****  * @brief Kernel enter the interrupt.
 117:..//kernel/core/include/tos_sys.h ****  * this function should be called in the entrance of a interrupt handler.
 118:..//kernel/core/include/tos_sys.h ****  *
 119:..//kernel/core/include/tos_sys.h ****  * @attention None
 120:..//kernel/core/include/tos_sys.h ****  *
 121:..//kernel/core/include/tos_sys.h ****  * @param   None
 122:..//kernel/core/include/tos_sys.h ****  *
 123:..//kernel/core/include/tos_sys.h ****  * @return  None
 124:..//kernel/core/include/tos_sys.h ****  */
 125:..//kernel/core/include/tos_sys.h **** __API__ void    tos_knl_irq_enter(void);
 126:..//kernel/core/include/tos_sys.h **** 
 127:..//kernel/core/include/tos_sys.h **** /**
 128:..//kernel/core/include/tos_sys.h ****  * @brief Kernel exit the interrupt.
 129:..//kernel/core/include/tos_sys.h ****  * this function should be called in the exit of a interrupt handler.
 130:..//kernel/core/include/tos_sys.h ****  *
 131:..//kernel/core/include/tos_sys.h ****  * @attention None
 132:..//kernel/core/include/tos_sys.h ****  *
 133:..//kernel/core/include/tos_sys.h ****  * @param   None
 134:..//kernel/core/include/tos_sys.h ****  *
 135:..//kernel/core/include/tos_sys.h ****  * @return  None
 136:..//kernel/core/include/tos_sys.h ****  */
 137:..//kernel/core/include/tos_sys.h **** __API__ void    tos_knl_irq_leave(void);
 138:..//kernel/core/include/tos_sys.h **** 
 139:..//kernel/core/include/tos_sys.h **** /**
 140:..//kernel/core/include/tos_sys.h ****  * @brief Lock the scheduler.
 141:..//kernel/core/include/tos_sys.h ****  * prevent the kernel from performing task schedule.
 142:..//kernel/core/include/tos_sys.h ****  *
 143:..//kernel/core/include/tos_sys.h ****  * @attention None
 144:..//kernel/core/include/tos_sys.h ****  *
 145:..//kernel/core/include/tos_sys.h ****  * @param   None
 146:..//kernel/core/include/tos_sys.h ****  *
 147:..//kernel/core/include/tos_sys.h ****  * @return  errcode
 148:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_KNL_NOT_RUNNING         the kernel is not running.
 149:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_LOCK_NESTING_OVERFLOW   the schedule lock nesting is overflow.
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 9


 150:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_NONE                    return successfully.
 151:..//kernel/core/include/tos_sys.h ****  */
 152:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_sched_lock(void);
 153:..//kernel/core/include/tos_sys.h **** 
 154:..//kernel/core/include/tos_sys.h **** /**
 155:..//kernel/core/include/tos_sys.h ****  * @brief Unlock the scheduler.
 156:..//kernel/core/include/tos_sys.h ****  * re-enable the task schedule.
 157:..//kernel/core/include/tos_sys.h ****  *
 158:..//kernel/core/include/tos_sys.h ****  * @attention None
 159:..//kernel/core/include/tos_sys.h ****  *
 160:..//kernel/core/include/tos_sys.h ****  * @param   None
 161:..//kernel/core/include/tos_sys.h ****  *
 162:..//kernel/core/include/tos_sys.h ****  * @return  errcode
 163:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_KNL_NOT_RUNNING         the kernel is not running.
 164:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_SCHED_NOT_LOCKED        the scheduler is not locked.
 165:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_NONE                    return successfully.
 166:..//kernel/core/include/tos_sys.h ****  */
 167:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_sched_unlock(void);
 168:..//kernel/core/include/tos_sys.h **** 
 169:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_TICKLESS_EN > 0u
 170:..//kernel/core/include/tos_sys.h **** __KNL__ k_tick_t knl_next_expires_get(void);
 171:..//kernel/core/include/tos_sys.h **** #endif
 172:..//kernel/core/include/tos_sys.h **** 
 173:..//kernel/core/include/tos_sys.h **** __KNL__ void    knl_sched(void);
 174:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_sched_locked(void);
 175:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_inirq(void);
 176:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_idle(k_task_t *task);
 177:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_self(k_task_t *task);
 178:..//kernel/core/include/tos_sys.h **** __KNL__ k_err_t knl_idle_init(void);
 179:..//kernel/core/include/tos_sys.h **** 
 180:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_OBJECT_VERIFY_EN > 0u
 181:..//kernel/core/include/tos_sys.h **** 
 182:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_verify(knl_obj_t *knl_obj, knl_obj_type_t type)
 107              		.loc 2 182 31 view .LVU20
 108              	.LBB33:
 183:..//kernel/core/include/tos_sys.h **** {
 184:..//kernel/core/include/tos_sys.h ****     return knl_obj->type == type;
 109              		.loc 2 184 5 view .LVU21
 110              		.loc 2 184 19 is_stmt 0 view .LVU22
 111 0012 4688     		ldrh	r6, [r0, #2]
 112              	.LVL7:
 113              		.loc 2 184 19 view .LVU23
 114              	.LBE33:
 115              	.LBE32:
 116              		.loc 1 204 5 view .LVU24
 117 0014 47F6EE30 		movw	r0, #31726
 118              	.LVL8:
 119              		.loc 1 204 5 view .LVU25
 120 0018 8642     		cmp	r6, r0
 121 001a 04D0     		beq	.L15
 122 001c 40F24D44 		movw	r4, #1101
 123              	.LVL9:
 124              	.L4:
 205:..//kernel/core/tos_priority_mail_queue.c **** 
 206:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_DISABLE();
 207:..//kernel/core/tos_priority_mail_queue.c **** 
 208:..//kernel/core/tos_priority_mail_queue.c ****     if (pend_is_nopending(&prio_mail_q->pend_obj)) {
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 10


 209:..//kernel/core/tos_priority_mail_queue.c ****         err = tos_prio_q_enqueue(&prio_mail_q->prio_q, mail_buf, mail_size, prio);
 210:..//kernel/core/tos_priority_mail_queue.c ****         if (err != K_ERR_NONE) {
 211:..//kernel/core/tos_priority_mail_queue.c ****             TOS_CPU_INT_ENABLE();
 212:..//kernel/core/tos_priority_mail_queue.c ****             return err;
 213:..//kernel/core/tos_priority_mail_queue.c ****         }
 214:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 215:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 216:..//kernel/core/tos_priority_mail_queue.c ****     }
 217:..//kernel/core/tos_priority_mail_queue.c **** 
 218:..//kernel/core/tos_priority_mail_queue.c ****     if (opt == OPT_POST_ONE) {
 219:..//kernel/core/tos_priority_mail_queue.c ****         prio_mail_task_recv(TOS_LIST_FIRST_ENTRY(&prio_mail_q->pend_obj.list, k_task_t, pend_list),
 220:..//kernel/core/tos_priority_mail_queue.c ****                                 mail_buf, mail_size);
 221:..//kernel/core/tos_priority_mail_queue.c ****     } else { // OPT_POST_ALL
 222:..//kernel/core/tos_priority_mail_queue.c ****         TOS_LIST_FOR_EACH_ENTRY_SAFE(task, tmp, k_task_t, pend_list, &prio_mail_q->pend_obj.list) {
 223:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 224:..//kernel/core/tos_priority_mail_queue.c ****         }
 225:..//kernel/core/tos_priority_mail_queue.c ****     }
 226:..//kernel/core/tos_priority_mail_queue.c **** 
 227:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_INT_ENABLE();
 228:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 229:..//kernel/core/tos_priority_mail_queue.c **** 
 230:..//kernel/core/tos_priority_mail_queue.c ****     return K_ERR_NONE;
 231:..//kernel/core/tos_priority_mail_queue.c **** }
 125              		.loc 1 231 1 view .LVU26
 126 0020 2046     		mov	r0, r4
 127 0022 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 128              	.LVL10:
 129              	.L15:
 130              		.loc 1 231 1 view .LVU27
 131 0026 9946     		mov	r9, r3
 132 0028 1746     		mov	r7, r2
 133 002a 0E46     		mov	r6, r1
 206:..//kernel/core/tos_priority_mail_queue.c **** 
 134              		.loc 1 206 5 is_stmt 1 view .LVU28
 206:..//kernel/core/tos_priority_mail_queue.c **** 
 135              		.loc 1 206 5 view .LVU29
 136 002c FFF7FEFF 		bl	tos_cpu_cpsr_save
 137              	.LVL11:
 206:..//kernel/core/tos_priority_mail_queue.c **** 
 138              		.loc 1 206 5 is_stmt 0 view .LVU30
 139 0030 8046     		mov	r8, r0
 140              	.LVL12:
 208:..//kernel/core/tos_priority_mail_queue.c ****         err = tos_prio_q_enqueue(&prio_mail_q->prio_q, mail_buf, mail_size, prio);
 141              		.loc 1 208 5 is_stmt 1 view .LVU31
 208:..//kernel/core/tos_priority_mail_queue.c ****         err = tos_prio_q_enqueue(&prio_mail_q->prio_q, mail_buf, mail_size, prio);
 142              		.loc 1 208 9 is_stmt 0 view .LVU32
 143 0032 201D     		adds	r0, r4, #4
 144              	.LVL13:
 208:..//kernel/core/tos_priority_mail_queue.c ****         err = tos_prio_q_enqueue(&prio_mail_q->prio_q, mail_buf, mail_size, prio);
 145              		.loc 1 208 9 view .LVU33
 146 0034 FFF7FEFF 		bl	pend_is_nopending
 147              	.LVL14:
 208:..//kernel/core/tos_priority_mail_queue.c ****         err = tos_prio_q_enqueue(&prio_mail_q->prio_q, mail_buf, mail_size, prio);
 148              		.loc 1 208 8 view .LVU34
 149 0038 90B9     		cbnz	r0, .L16
 218:..//kernel/core/tos_priority_mail_queue.c ****         prio_mail_task_recv(TOS_LIST_FIRST_ENTRY(&prio_mail_q->pend_obj.list, k_task_t, pend_list),
 150              		.loc 1 218 5 is_stmt 1 view .LVU35
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 11


 218:..//kernel/core/tos_priority_mail_queue.c ****         prio_mail_task_recv(TOS_LIST_FIRST_ENTRY(&prio_mail_q->pend_obj.list, k_task_t, pend_list),
 151              		.loc 1 218 8 is_stmt 0 view .LVU36
 152 003a 15B3     		cbz	r5, .L17
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 153              		.loc 1 222 9 is_stmt 1 view .LVU37
 154 003c 6068     		ldr	r0, [r4, #4]
 155              	.LVL15:
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 156              		.loc 1 222 9 is_stmt 0 view .LVU38
 157 003e 50F85059 		ldr	r5, [r0], #-80
 158              	.LVL16:
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 159              		.loc 1 222 9 view .LVU39
 160 0042 503D     		subs	r5, r5, #80
 161              	.LVL17:
 162              	.L9:
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 163              		.loc 1 222 9 discriminator 1 view .LVU40
 164 0044 00F15003 		add	r3, r0, #80
 165 0048 221D     		adds	r2, r4, #4
 166 004a 9342     		cmp	r3, r2
 167 004c 1FD0     		beq	.L8
 223:..//kernel/core/tos_priority_mail_queue.c ****         }
 168              		.loc 1 223 13 is_stmt 1 discriminator 3 view .LVU41
 169 004e 3A46     		mov	r2, r7
 170 0050 3146     		mov	r1, r6
 171 0052 FFF7FEFF 		bl	prio_mail_task_recv
 172              	.LVL18:
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 173              		.loc 1 222 9 is_stmt 0 discriminator 3 view .LVU42
 174 0056 2B6D     		ldr	r3, [r5, #80]
 175              	.LVL19:
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 176              		.loc 1 222 9 discriminator 3 view .LVU43
 177 0058 2846     		mov	r0, r5
 178 005a A3F15005 		sub	r5, r3, #80
 179              	.LVL20:
 222:..//kernel/core/tos_priority_mail_queue.c ****             prio_mail_task_recv(task, mail_buf, mail_size);
 180              		.loc 1 222 9 discriminator 3 view .LVU44
 181 005e F1E7     		b	.L9
 182              	.LVL21:
 183              	.L16:
 209:..//kernel/core/tos_priority_mail_queue.c ****         if (err != K_ERR_NONE) {
 184              		.loc 1 209 9 is_stmt 1 view .LVU45
 209:..//kernel/core/tos_priority_mail_queue.c ****         if (err != K_ERR_NONE) {
 185              		.loc 1 209 15 is_stmt 0 view .LVU46
 186 0060 4B46     		mov	r3, r9
 187 0062 3A46     		mov	r2, r7
 188 0064 3146     		mov	r1, r6
 189 0066 04F11000 		add	r0, r4, #16
 190 006a FFF7FEFF 		bl	tos_prio_q_enqueue
 191              	.LVL22:
 210:..//kernel/core/tos_priority_mail_queue.c ****             TOS_CPU_INT_ENABLE();
 192              		.loc 1 210 9 is_stmt 1 view .LVU47
 210:..//kernel/core/tos_priority_mail_queue.c ****             TOS_CPU_INT_ENABLE();
 193              		.loc 1 210 12 is_stmt 0 view .LVU48
 194 006e 0446     		mov	r4, r0
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 12


 195              	.LVL23:
 210:..//kernel/core/tos_priority_mail_queue.c ****             TOS_CPU_INT_ENABLE();
 196              		.loc 1 210 12 view .LVU49
 197 0070 18B1     		cbz	r0, .L6
 211:..//kernel/core/tos_priority_mail_queue.c ****             return err;
 198              		.loc 1 211 13 is_stmt 1 view .LVU50
 211:..//kernel/core/tos_priority_mail_queue.c ****             return err;
 199              		.loc 1 211 13 view .LVU51
 200 0072 4046     		mov	r0, r8
 201              	.LVL24:
 211:..//kernel/core/tos_priority_mail_queue.c ****             return err;
 202              		.loc 1 211 13 is_stmt 0 view .LVU52
 203 0074 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 204              	.LVL25:
 212:..//kernel/core/tos_priority_mail_queue.c ****         }
 205              		.loc 1 212 13 is_stmt 1 view .LVU53
 212:..//kernel/core/tos_priority_mail_queue.c ****         }
 206              		.loc 1 212 20 is_stmt 0 view .LVU54
 207 0078 D2E7     		b	.L4
 208              	.LVL26:
 209              	.L6:
 214:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 210              		.loc 1 214 9 is_stmt 1 view .LVU55
 214:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 211              		.loc 1 214 9 view .LVU56
 212 007a 4046     		mov	r0, r8
 213              	.LVL27:
 214:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 214              		.loc 1 214 9 is_stmt 0 view .LVU57
 215 007c FFF7FEFF 		bl	tos_cpu_cpsr_restore
 216              	.LVL28:
 215:..//kernel/core/tos_priority_mail_queue.c ****     }
 217              		.loc 1 215 9 is_stmt 1 view .LVU58
 215:..//kernel/core/tos_priority_mail_queue.c ****     }
 218              		.loc 1 215 16 is_stmt 0 view .LVU59
 219 0080 CEE7     		b	.L4
 220              	.LVL29:
 221              	.L17:
 219:..//kernel/core/tos_priority_mail_queue.c ****                                 mail_buf, mail_size);
 222              		.loc 1 219 9 is_stmt 1 view .LVU60
 219:..//kernel/core/tos_priority_mail_queue.c ****                                 mail_buf, mail_size);
 223              		.loc 1 219 29 is_stmt 0 view .LVU61
 224 0082 6068     		ldr	r0, [r4, #4]
 219:..//kernel/core/tos_priority_mail_queue.c ****                                 mail_buf, mail_size);
 225              		.loc 1 219 9 view .LVU62
 226 0084 3A46     		mov	r2, r7
 227 0086 3146     		mov	r1, r6
 228 0088 5038     		subs	r0, r0, #80
 229 008a FFF7FEFF 		bl	prio_mail_task_recv
 230              	.LVL30:
 231              	.L8:
 227:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 232              		.loc 1 227 5 is_stmt 1 view .LVU63
 227:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 233              		.loc 1 227 5 view .LVU64
 234 008e 4046     		mov	r0, r8
 235 0090 FFF7FEFF 		bl	tos_cpu_cpsr_restore
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 13


 236              	.LVL31:
 228:..//kernel/core/tos_priority_mail_queue.c **** 
 237              		.loc 1 228 5 view .LVU65
 238 0094 FFF7FEFF 		bl	knl_sched
 239              	.LVL32:
 230:..//kernel/core/tos_priority_mail_queue.c **** }
 240              		.loc 1 230 5 view .LVU66
 230:..//kernel/core/tos_priority_mail_queue.c **** }
 241              		.loc 1 230 12 is_stmt 0 view .LVU67
 242 0098 0024     		movs	r4, #0
 243              	.LVL33:
 230:..//kernel/core/tos_priority_mail_queue.c **** }
 244              		.loc 1 230 12 view .LVU68
 245 009a C1E7     		b	.L4
 246              	.LVL34:
 247              	.L11:
 202:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(mail_buf);
 248              		.loc 1 202 5 view .LVU69
 249 009c 40F24C44 		movw	r4, #1100
 250 00a0 BEE7     		b	.L4
 251              	.L12:
 203:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 252              		.loc 1 203 5 view .LVU70
 253 00a2 40F24C44 		movw	r4, #1100
 254 00a6 BBE7     		b	.L4
 255              		.cfi_endproc
 256              	.LFE117:
 258              		.section	.text.tos_prio_mail_q_create,"ax",%progbits
 259              		.align	1
 260              		.global	tos_prio_mail_q_create
 261              		.syntax unified
 262              		.thumb
 263              		.thumb_func
 264              		.fpu softvfp
 266              	tos_prio_mail_q_create:
 267              	.LVL35:
 268              	.LFB110:
  23:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 269              		.loc 1 23 1 is_stmt 1 view -0
 270              		.cfi_startproc
 271              		@ args = 0, pretend = 0, frame = 0
 272              		@ frame_needed = 0, uses_anonymous_args = 0
  23:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 273              		.loc 1 23 1 is_stmt 0 view .LVU72
 274 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 275              	.LCFI2:
 276              		.cfi_def_cfa_offset 24
 277              		.cfi_offset 4, -24
 278              		.cfi_offset 5, -20
 279              		.cfi_offset 6, -16
 280              		.cfi_offset 7, -12
 281              		.cfi_offset 8, -8
 282              		.cfi_offset 14, -4
 283 0004 82B0     		sub	sp, sp, #8
 284              	.LCFI3:
 285              		.cfi_def_cfa_offset 32
  24:..//kernel/core/tos_priority_mail_queue.c ****     void *prio_q_mgr_array = K_NULL;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 14


 286              		.loc 1 24 5 is_stmt 1 view .LVU73
  25:..//kernel/core/tos_priority_mail_queue.c **** 
 287              		.loc 1 25 5 view .LVU74
 288              	.LVL36:
  27:..//kernel/core/tos_priority_mail_queue.c **** 
 289              		.loc 1 27 5 view .LVU75
  27:..//kernel/core/tos_priority_mail_queue.c **** 
 290              		.loc 1 27 5 view .LVU76
 291 0006 30B3     		cbz	r0, .L21
 292 0008 0446     		mov	r4, r0
 293 000a 1F46     		mov	r7, r3
 294 000c 1546     		mov	r5, r2
 295 000e 0E46     		mov	r6, r1
  29:..//kernel/core/tos_priority_mail_queue.c ****     if (!prio_q_mgr_array) {
 296              		.loc 1 29 5 view .LVU77
  29:..//kernel/core/tos_priority_mail_queue.c ****     if (!prio_q_mgr_array) {
 297              		.loc 1 29 24 is_stmt 0 view .LVU78
 298 0010 02EB4203 		add	r3, r2, r2, lsl #1
 299              	.LVL37:
  29:..//kernel/core/tos_priority_mail_queue.c ****     if (!prio_q_mgr_array) {
 300              		.loc 1 29 24 view .LVU79
 301 0014 5800     		lsls	r0, r3, #1
 302              	.LVL38:
  29:..//kernel/core/tos_priority_mail_queue.c ****     if (!prio_q_mgr_array) {
 303              		.loc 1 29 24 view .LVU80
 304 0016 FFF7FEFF 		bl	tos_mmheap_alloc
 305              	.LVL39:
  30:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 306              		.loc 1 30 5 is_stmt 1 view .LVU81
  30:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OUT_OF_MEMORY;
 307              		.loc 1 30 8 is_stmt 0 view .LVU82
 308 001a 8046     		mov	r8, r0
 309 001c F0B1     		cbz	r0, .L22
  34:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 310              		.loc 1 34 5 is_stmt 1 view .LVU83
  34:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 311              		.loc 1 34 11 is_stmt 0 view .LVU84
 312 001e 0097     		str	r7, [sp]
 313 0020 2B46     		mov	r3, r5
 314 0022 3246     		mov	r2, r6
 315 0024 0146     		mov	r1, r0
 316 0026 04F11000 		add	r0, r4, #16
 317              	.LVL40:
  34:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 318              		.loc 1 34 11 view .LVU85
 319 002a FFF7FEFF 		bl	tos_prio_q_create
 320              	.LVL41:
  35:..//kernel/core/tos_priority_mail_queue.c ****         tos_mmheap_free(prio_q_mgr_array);
 321              		.loc 1 35 5 is_stmt 1 view .LVU86
  35:..//kernel/core/tos_priority_mail_queue.c ****         tos_mmheap_free(prio_q_mgr_array);
 322              		.loc 1 35 8 is_stmt 0 view .LVU87
 323 002e 0546     		mov	r5, r0
 324              	.LVL42:
  35:..//kernel/core/tos_priority_mail_queue.c ****         tos_mmheap_free(prio_q_mgr_array);
 325              		.loc 1 35 8 view .LVU88
 326 0030 68B9     		cbnz	r0, .L24
  40:..//kernel/core/tos_priority_mail_queue.c ****     pend_object_init(&prio_mail_q->pend_obj);
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 15


 327              		.loc 1 40 5 is_stmt 1 view .LVU89
  40:..//kernel/core/tos_priority_mail_queue.c ****     pend_object_init(&prio_mail_q->pend_obj);
 328              		.loc 1 40 35 is_stmt 0 view .LVU90
 329 0032 C4F80C80 		str	r8, [r4, #12]
  41:..//kernel/core/tos_priority_mail_queue.c **** 
 330              		.loc 1 41 5 is_stmt 1 view .LVU91
 331 0036 201D     		adds	r0, r4, #4
 332              	.LVL43:
  41:..//kernel/core/tos_priority_mail_queue.c **** 
 333              		.loc 1 41 5 is_stmt 0 view .LVU92
 334 0038 FFF7FEFF 		bl	pend_object_init
 335              	.LVL44:
  43:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_set_static(&prio_mail_q->knl_obj);
 336              		.loc 1 43 5 is_stmt 1 view .LVU93
 337              	.LBB34:
 338              	.LBI34:
 185:..//kernel/core/include/tos_sys.h **** }
 186:..//kernel/core/include/tos_sys.h **** 
 187:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_init(knl_obj_t *knl_obj, knl_obj_type_t type)
 339              		.loc 2 187 32 view .LVU94
 340              	.LBB35:
 188:..//kernel/core/include/tos_sys.h **** {
 189:..//kernel/core/include/tos_sys.h ****     knl_obj->type = type;
 341              		.loc 2 189 5 view .LVU95
 342              		.loc 2 189 19 is_stmt 0 view .LVU96
 343 003c 47F6EE33 		movw	r3, #31726
 344 0040 6380     		strh	r3, [r4, #2]	@ movhi
 345              	.LVL45:
 346              		.loc 2 189 19 view .LVU97
 347              	.LBE35:
 348              	.LBE34:
  44:..//kernel/core/tos_priority_mail_queue.c **** 
 349              		.loc 1 44 5 is_stmt 1 view .LVU98
 350              	.LBB36:
 351              	.LBI36:
 190:..//kernel/core/include/tos_sys.h **** }
 191:..//kernel/core/include/tos_sys.h **** 
 192:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_deinit(knl_obj_t *knl_obj)
 193:..//kernel/core/include/tos_sys.h **** {
 194:..//kernel/core/include/tos_sys.h ****     knl_obj->type = KNL_OBJ_TYPE_NONE;
 195:..//kernel/core/include/tos_sys.h **** }
 196:..//kernel/core/include/tos_sys.h **** 
 197:..//kernel/core/include/tos_sys.h **** #endif
 198:..//kernel/core/include/tos_sys.h **** 
 199:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_alloc_reset(knl_obj_t *knl_obj)
 200:..//kernel/core/include/tos_sys.h **** {
 201:..//kernel/core/include/tos_sys.h ****     knl_obj->alloc_type = KNL_OBJ_ALLOC_TYPE_NONE;
 202:..//kernel/core/include/tos_sys.h **** }
 203:..//kernel/core/include/tos_sys.h **** 
 204:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_alloc_set_dynamic(knl_obj_t *knl_obj)
 205:..//kernel/core/include/tos_sys.h **** {
 206:..//kernel/core/include/tos_sys.h ****     knl_obj->alloc_type = KNL_OBJ_ALLOC_TYPE_DYNAMIC;
 207:..//kernel/core/include/tos_sys.h **** }
 208:..//kernel/core/include/tos_sys.h **** 
 209:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_alloc_set_static(knl_obj_t *knl_obj)
 352              		.loc 2 209 32 view .LVU99
 353              	.LBB37:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 16


 210:..//kernel/core/include/tos_sys.h **** {
 211:..//kernel/core/include/tos_sys.h ****     knl_obj->alloc_type = KNL_OBJ_ALLOC_TYPE_STATIC;
 354              		.loc 2 211 5 view .LVU100
 355              		.loc 2 211 25 is_stmt 0 view .LVU101
 356 0042 0123     		movs	r3, #1
 357 0044 2370     		strb	r3, [r4]
 358              	.LVL46:
 359              		.loc 2 211 25 view .LVU102
 360              	.LBE37:
 361              	.LBE36:
  46:..//kernel/core/tos_priority_mail_queue.c **** }
 362              		.loc 1 46 5 is_stmt 1 view .LVU103
 363              	.L19:
  47:..//kernel/core/tos_priority_mail_queue.c **** 
 364              		.loc 1 47 1 is_stmt 0 view .LVU104
 365 0046 2846     		mov	r0, r5
 366 0048 02B0     		add	sp, sp, #8
 367              	.LCFI4:
 368              		.cfi_remember_state
 369              		.cfi_def_cfa_offset 24
 370              		@ sp needed
 371 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 372              	.LVL47:
 373              	.L24:
 374              	.LCFI5:
 375              		.cfi_restore_state
  36:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 376              		.loc 1 36 9 is_stmt 1 view .LVU105
 377 004e 4046     		mov	r0, r8
 378              	.LVL48:
  36:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 379              		.loc 1 36 9 is_stmt 0 view .LVU106
 380 0050 FFF7FEFF 		bl	tos_mmheap_free
 381              	.LVL49:
  37:..//kernel/core/tos_priority_mail_queue.c ****     }
 382              		.loc 1 37 9 is_stmt 1 view .LVU107
  37:..//kernel/core/tos_priority_mail_queue.c ****     }
 383              		.loc 1 37 16 is_stmt 0 view .LVU108
 384 0054 F7E7     		b	.L19
 385              	.LVL50:
 386              	.L21:
  27:..//kernel/core/tos_priority_mail_queue.c **** 
 387              		.loc 1 27 5 view .LVU109
 388 0056 40F24C45 		movw	r5, #1100
 389 005a F4E7     		b	.L19
 390              	.LVL51:
 391              	.L22:
  31:..//kernel/core/tos_priority_mail_queue.c ****     }
 392              		.loc 1 31 16 view .LVU110
 393 005c 40F27E45 		movw	r5, #1150
 394              	.LVL52:
  31:..//kernel/core/tos_priority_mail_queue.c ****     }
 395              		.loc 1 31 16 view .LVU111
 396 0060 F1E7     		b	.L19
 397              		.cfi_endproc
 398              	.LFE110:
 400              		.section	.text.tos_prio_mail_q_destroy,"ax",%progbits
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 17


 401              		.align	1
 402              		.global	tos_prio_mail_q_destroy
 403              		.syntax unified
 404              		.thumb
 405              		.thumb_func
 406              		.fpu softvfp
 408              	tos_prio_mail_q_destroy:
 409              	.LVL53:
 410              	.LFB111:
  50:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 411              		.loc 1 50 1 is_stmt 1 view -0
 412              		.cfi_startproc
 413              		@ args = 0, pretend = 0, frame = 0
 414              		@ frame_needed = 0, uses_anonymous_args = 0
  50:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 415              		.loc 1 50 1 is_stmt 0 view .LVU113
 416 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 417              	.LCFI6:
 418              		.cfi_def_cfa_offset 24
 419              		.cfi_offset 4, -24
 420              		.cfi_offset 5, -20
 421              		.cfi_offset 6, -16
 422              		.cfi_offset 7, -12
 423              		.cfi_offset 8, -8
 424              		.cfi_offset 14, -4
  51:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 425              		.loc 1 51 5 is_stmt 1 view .LVU114
 426              	.LVL54:
  52:..//kernel/core/tos_priority_mail_queue.c **** 
 427              		.loc 1 52 5 view .LVU115
  54:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 428              		.loc 1 54 5 view .LVU116
  54:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 429              		.loc 1 54 5 view .LVU117
 430 0004 70B3     		cbz	r0, .L28
 431 0006 0446     		mov	r4, r0
  55:..//kernel/core/tos_priority_mail_queue.c **** 
 432              		.loc 1 55 5 view .LVU118
  55:..//kernel/core/tos_priority_mail_queue.c **** 
 433              		.loc 1 55 5 view .LVU119
 434              	.LVL55:
 435              	.LBB38:
 436              	.LBI38:
 182:..//kernel/core/include/tos_sys.h **** {
 437              		.loc 2 182 31 view .LVU120
 438              	.LBB39:
 184:..//kernel/core/include/tos_sys.h **** }
 439              		.loc 2 184 5 view .LVU121
 184:..//kernel/core/include/tos_sys.h **** }
 440              		.loc 2 184 19 is_stmt 0 view .LVU122
 441 0008 4188     		ldrh	r1, [r0, #2]
 442              	.LVL56:
 184:..//kernel/core/include/tos_sys.h **** }
 443              		.loc 2 184 19 view .LVU123
 444              	.LBE39:
 445              	.LBE38:
  55:..//kernel/core/tos_priority_mail_queue.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 18


 446              		.loc 1 55 5 view .LVU124
 447 000a 47F6EE32 		movw	r2, #31726
 448 000e 9142     		cmp	r1, r2
 449 0010 2BD1     		bne	.L29
  57:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 450              		.loc 1 57 5 is_stmt 1 view .LVU125
 451              	.LVL57:
 452              	.LBB40:
 453              	.LBI40:
 212:..//kernel/core/include/tos_sys.h **** }
 213:..//kernel/core/include/tos_sys.h **** 
 214:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_alloc_is_dynamic(knl_obj_t *knl_obj)
 215:..//kernel/core/include/tos_sys.h **** {
 216:..//kernel/core/include/tos_sys.h ****     return knl_obj->alloc_type == KNL_OBJ_ALLOC_TYPE_DYNAMIC;
 217:..//kernel/core/include/tos_sys.h **** }
 218:..//kernel/core/include/tos_sys.h **** 
 219:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_alloc_is_static(knl_obj_t *knl_obj)
 454              		.loc 2 219 31 view .LVU126
 455              	.LBB41:
 220:..//kernel/core/include/tos_sys.h **** {
 221:..//kernel/core/include/tos_sys.h ****     return knl_obj->alloc_type == KNL_OBJ_ALLOC_TYPE_STATIC;
 456              		.loc 2 221 5 view .LVU127
 457              		.loc 2 221 19 is_stmt 0 view .LVU128
 458 0012 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 459              	.LVL58:
 460              		.loc 2 221 19 view .LVU129
 461              	.LBE41:
 462              	.LBE40:
  57:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 463              		.loc 1 57 8 view .LVU130
 464 0014 012A     		cmp	r2, #1
 465 0016 02D0     		beq	.L32
  58:..//kernel/core/tos_priority_mail_queue.c ****     }
 466              		.loc 1 58 16 view .LVU131
 467 0018 40F24E45 		movw	r5, #1102
 468 001c 27E0     		b	.L26
 469              	.L32:
  61:..//kernel/core/tos_priority_mail_queue.c **** 
 470              		.loc 1 61 5 is_stmt 1 view .LVU132
  61:..//kernel/core/tos_priority_mail_queue.c **** 
 471              		.loc 1 61 5 view .LVU133
 472 001e FFF7FEFF 		bl	tos_cpu_cpsr_save
 473              	.LVL59:
  61:..//kernel/core/tos_priority_mail_queue.c **** 
 474              		.loc 1 61 5 is_stmt 0 view .LVU134
 475 0022 0746     		mov	r7, r0
 476              	.LVL60:
  63:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 477              		.loc 1 63 5 is_stmt 1 view .LVU135
  63:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 478              		.loc 1 63 11 is_stmt 0 view .LVU136
 479 0024 04F11000 		add	r0, r4, #16
 480              	.LVL61:
  63:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 481              		.loc 1 63 11 view .LVU137
 482 0028 FFF7FEFF 		bl	tos_prio_q_destroy
 483              	.LVL62:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 19


  64:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 484              		.loc 1 64 5 is_stmt 1 view .LVU138
  64:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 485              		.loc 1 64 8 is_stmt 0 view .LVU139
 486 002c 0546     		mov	r5, r0
 487 002e A8B9     		cbnz	r0, .L33
  69:..//kernel/core/tos_priority_mail_queue.c **** 
 488              		.loc 1 69 5 is_stmt 1 view .LVU140
 489 0030 04F10408 		add	r8, r4, #4
 490 0034 0321     		movs	r1, #3
 491 0036 4046     		mov	r0, r8
 492              	.LVL63:
  69:..//kernel/core/tos_priority_mail_queue.c **** 
 493              		.loc 1 69 5 is_stmt 0 view .LVU141
 494 0038 FFF7FEFF 		bl	pend_wakeup_all
 495              	.LVL64:
  71:..//kernel/core/tos_priority_mail_queue.c ****     prio_mail_q->prio_q_mgr_array = K_NULL;
 496              		.loc 1 71 5 is_stmt 1 view .LVU142
 497 003c E068     		ldr	r0, [r4, #12]
 498 003e FFF7FEFF 		bl	tos_mmheap_free
 499              	.LVL65:
  72:..//kernel/core/tos_priority_mail_queue.c **** 
 500              		.loc 1 72 5 view .LVU143
  72:..//kernel/core/tos_priority_mail_queue.c **** 
 501              		.loc 1 72 35 is_stmt 0 view .LVU144
 502 0042 0026     		movs	r6, #0
 503 0044 E660     		str	r6, [r4, #12]
  74:..//kernel/core/tos_priority_mail_queue.c **** 
 504              		.loc 1 74 5 is_stmt 1 view .LVU145
 505 0046 4046     		mov	r0, r8
 506 0048 FFF7FEFF 		bl	pend_object_deinit
 507              	.LVL66:
  76:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_reset(&prio_mail_q->knl_obj);
 508              		.loc 1 76 5 view .LVU146
 509              	.LBB42:
 510              	.LBI42:
 192:..//kernel/core/include/tos_sys.h **** {
 511              		.loc 2 192 32 view .LVU147
 512              	.LBB43:
 194:..//kernel/core/include/tos_sys.h **** }
 513              		.loc 2 194 5 view .LVU148
 194:..//kernel/core/include/tos_sys.h **** }
 514              		.loc 2 194 19 is_stmt 0 view .LVU149
 515 004c 6680     		strh	r6, [r4, #2]	@ movhi
 516              	.LVL67:
 194:..//kernel/core/include/tos_sys.h **** }
 517              		.loc 2 194 19 view .LVU150
 518              	.LBE43:
 519              	.LBE42:
  77:..//kernel/core/tos_priority_mail_queue.c **** 
 520              		.loc 1 77 5 is_stmt 1 view .LVU151
 521              	.LBB44:
 522              	.LBI44:
 199:..//kernel/core/include/tos_sys.h **** {
 523              		.loc 2 199 32 view .LVU152
 524              	.LBB45:
 201:..//kernel/core/include/tos_sys.h **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 20


 525              		.loc 2 201 5 view .LVU153
 201:..//kernel/core/include/tos_sys.h **** }
 526              		.loc 2 201 25 is_stmt 0 view .LVU154
 527 004e 2670     		strb	r6, [r4]
 528              	.LVL68:
 201:..//kernel/core/include/tos_sys.h **** }
 529              		.loc 2 201 25 view .LVU155
 530              	.LBE45:
 531              	.LBE44:
  79:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 532              		.loc 1 79 5 is_stmt 1 view .LVU156
  79:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 533              		.loc 1 79 5 view .LVU157
 534 0050 3846     		mov	r0, r7
 535 0052 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 536              	.LVL69:
  80:..//kernel/core/tos_priority_mail_queue.c **** 
 537              		.loc 1 80 5 view .LVU158
 538 0056 FFF7FEFF 		bl	knl_sched
 539              	.LVL70:
  82:..//kernel/core/tos_priority_mail_queue.c **** }
 540              		.loc 1 82 5 view .LVU159
  82:..//kernel/core/tos_priority_mail_queue.c **** }
 541              		.loc 1 82 12 is_stmt 0 view .LVU160
 542 005a 08E0     		b	.L26
 543              	.LVL71:
 544              	.L33:
  65:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 545              		.loc 1 65 9 is_stmt 1 view .LVU161
  65:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 546              		.loc 1 65 9 view .LVU162
 547 005c 3846     		mov	r0, r7
 548              	.LVL72:
  65:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 549              		.loc 1 65 9 is_stmt 0 view .LVU163
 550 005e FFF7FEFF 		bl	tos_cpu_cpsr_restore
 551              	.LVL73:
  66:..//kernel/core/tos_priority_mail_queue.c ****     }
 552              		.loc 1 66 9 is_stmt 1 view .LVU164
  66:..//kernel/core/tos_priority_mail_queue.c ****     }
 553              		.loc 1 66 16 is_stmt 0 view .LVU165
 554 0062 04E0     		b	.L26
 555              	.LVL74:
 556              	.L28:
  54:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 557              		.loc 1 54 5 view .LVU166
 558 0064 40F24C45 		movw	r5, #1100
 559 0068 01E0     		b	.L26
 560              	.L29:
  55:..//kernel/core/tos_priority_mail_queue.c **** 
 561              		.loc 1 55 5 view .LVU167
 562 006a 40F24D45 		movw	r5, #1101
 563              	.LVL75:
 564              	.L26:
  83:..//kernel/core/tos_priority_mail_queue.c **** 
 565              		.loc 1 83 1 view .LVU168
 566 006e 2846     		mov	r0, r5
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 21


 567 0070 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 568              		.cfi_endproc
 569              	.LFE111:
 571              		.section	.text.tos_prio_mail_q_create_dyn,"ax",%progbits
 572              		.align	1
 573              		.global	tos_prio_mail_q_create_dyn
 574              		.syntax unified
 575              		.thumb
 576              		.thumb_func
 577              		.fpu softvfp
 579              	tos_prio_mail_q_create_dyn:
 580              	.LVL76:
 581              	.LFB112:
  86:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 582              		.loc 1 86 1 is_stmt 1 view -0
 583              		.cfi_startproc
 584              		@ args = 0, pretend = 0, frame = 0
 585              		@ frame_needed = 0, uses_anonymous_args = 0
  86:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 586              		.loc 1 86 1 is_stmt 0 view .LVU170
 587 0000 38B5     		push	{r3, r4, r5, lr}
 588              	.LCFI7:
 589              		.cfi_def_cfa_offset 16
 590              		.cfi_offset 3, -16
 591              		.cfi_offset 4, -12
 592              		.cfi_offset 5, -8
 593              		.cfi_offset 14, -4
  87:..//kernel/core/tos_priority_mail_queue.c **** 
 594              		.loc 1 87 5 is_stmt 1 view .LVU171
  89:..//kernel/core/tos_priority_mail_queue.c **** 
 595              		.loc 1 89 5 view .LVU172
  89:..//kernel/core/tos_priority_mail_queue.c **** 
 596              		.loc 1 89 5 view .LVU173
 597 0002 80B1     		cbz	r0, .L36
 598 0004 0446     		mov	r4, r0
  91:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 599              		.loc 1 91 5 view .LVU174
  91:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 600              		.loc 1 91 11 is_stmt 0 view .LVU175
 601 0006 1030     		adds	r0, r0, #16
 602              	.LVL77:
  91:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 603              		.loc 1 91 11 view .LVU176
 604 0008 FFF7FEFF 		bl	tos_prio_q_create_dyn
 605              	.LVL78:
  92:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 606              		.loc 1 92 5 is_stmt 1 view .LVU177
  92:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 607              		.loc 1 92 8 is_stmt 0 view .LVU178
 608 000c 0546     		mov	r5, r0
 609 000e 08B1     		cbz	r0, .L38
 610              	.LVL79:
 611              	.L35:
 102:..//kernel/core/tos_priority_mail_queue.c **** 
 612              		.loc 1 102 1 view .LVU179
 613 0010 2846     		mov	r0, r5
 614 0012 38BD     		pop	{r3, r4, r5, pc}
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 22


 615              	.LVL80:
 616              	.L38:
  96:..//kernel/core/tos_priority_mail_queue.c **** 
 617              		.loc 1 96 5 is_stmt 1 view .LVU180
 618 0014 201D     		adds	r0, r4, #4
 619              	.LVL81:
  96:..//kernel/core/tos_priority_mail_queue.c **** 
 620              		.loc 1 96 5 is_stmt 0 view .LVU181
 621 0016 FFF7FEFF 		bl	pend_object_init
 622              	.LVL82:
  98:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_set_dynamic(&prio_mail_q->knl_obj);
 623              		.loc 1 98 5 is_stmt 1 view .LVU182
 624              	.LBB46:
 625              	.LBI46:
 187:..//kernel/core/include/tos_sys.h **** {
 626              		.loc 2 187 32 view .LVU183
 627              	.LBB47:
 189:..//kernel/core/include/tos_sys.h **** }
 628              		.loc 2 189 5 view .LVU184
 189:..//kernel/core/include/tos_sys.h **** }
 629              		.loc 2 189 19 is_stmt 0 view .LVU185
 630 001a 47F6EE33 		movw	r3, #31726
 631 001e 6380     		strh	r3, [r4, #2]	@ movhi
 632              	.LVL83:
 189:..//kernel/core/include/tos_sys.h **** }
 633              		.loc 2 189 19 view .LVU186
 634              	.LBE47:
 635              	.LBE46:
  99:..//kernel/core/tos_priority_mail_queue.c **** 
 636              		.loc 1 99 5 is_stmt 1 view .LVU187
 637              	.LBB48:
 638              	.LBI48:
 204:..//kernel/core/include/tos_sys.h **** {
 639              		.loc 2 204 32 view .LVU188
 640              	.LBB49:
 206:..//kernel/core/include/tos_sys.h **** }
 641              		.loc 2 206 5 view .LVU189
 206:..//kernel/core/include/tos_sys.h **** }
 642              		.loc 2 206 25 is_stmt 0 view .LVU190
 643 0020 0223     		movs	r3, #2
 644 0022 2370     		strb	r3, [r4]
 645              	.LVL84:
 206:..//kernel/core/include/tos_sys.h **** }
 646              		.loc 2 206 25 view .LVU191
 647              	.LBE49:
 648              	.LBE48:
 101:..//kernel/core/tos_priority_mail_queue.c **** }
 649              		.loc 1 101 5 is_stmt 1 view .LVU192
 101:..//kernel/core/tos_priority_mail_queue.c **** }
 650              		.loc 1 101 12 is_stmt 0 view .LVU193
 651 0024 F4E7     		b	.L35
 652              	.LVL85:
 653              	.L36:
  89:..//kernel/core/tos_priority_mail_queue.c **** 
 654              		.loc 1 89 5 view .LVU194
 655 0026 40F24C45 		movw	r5, #1100
 656 002a F1E7     		b	.L35
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 23


 657              		.cfi_endproc
 658              	.LFE112:
 660              		.section	.text.tos_prio_mail_q_destroy_dyn,"ax",%progbits
 661              		.align	1
 662              		.global	tos_prio_mail_q_destroy_dyn
 663              		.syntax unified
 664              		.thumb
 665              		.thumb_func
 666              		.fpu softvfp
 668              	tos_prio_mail_q_destroy_dyn:
 669              	.LVL86:
 670              	.LFB113:
 105:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 671              		.loc 1 105 1 is_stmt 1 view -0
 672              		.cfi_startproc
 673              		@ args = 0, pretend = 0, frame = 0
 674              		@ frame_needed = 0, uses_anonymous_args = 0
 105:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 675              		.loc 1 105 1 is_stmt 0 view .LVU196
 676 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 677              	.LCFI8:
 678              		.cfi_def_cfa_offset 24
 679              		.cfi_offset 3, -24
 680              		.cfi_offset 4, -20
 681              		.cfi_offset 5, -16
 682              		.cfi_offset 6, -12
 683              		.cfi_offset 7, -8
 684              		.cfi_offset 14, -4
 106:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 685              		.loc 1 106 5 is_stmt 1 view .LVU197
 686              	.LVL87:
 107:..//kernel/core/tos_priority_mail_queue.c **** 
 687              		.loc 1 107 5 view .LVU198
 109:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 688              		.loc 1 109 5 view .LVU199
 109:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 689              		.loc 1 109 5 view .LVU200
 690 0002 48B3     		cbz	r0, .L42
 691 0004 0446     		mov	r4, r0
 110:..//kernel/core/tos_priority_mail_queue.c **** 
 692              		.loc 1 110 5 view .LVU201
 110:..//kernel/core/tos_priority_mail_queue.c **** 
 693              		.loc 1 110 5 view .LVU202
 694              	.LVL88:
 695              	.LBB50:
 696              	.LBI50:
 182:..//kernel/core/include/tos_sys.h **** {
 697              		.loc 2 182 31 view .LVU203
 698              	.LBB51:
 184:..//kernel/core/include/tos_sys.h **** }
 699              		.loc 2 184 5 view .LVU204
 184:..//kernel/core/include/tos_sys.h **** }
 700              		.loc 2 184 19 is_stmt 0 view .LVU205
 701 0006 4188     		ldrh	r1, [r0, #2]
 702              	.LVL89:
 184:..//kernel/core/include/tos_sys.h **** }
 703              		.loc 2 184 19 view .LVU206
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 24


 704              	.LBE51:
 705              	.LBE50:
 110:..//kernel/core/tos_priority_mail_queue.c **** 
 706              		.loc 1 110 5 view .LVU207
 707 0008 47F6EE32 		movw	r2, #31726
 708 000c 9142     		cmp	r1, r2
 709 000e 26D1     		bne	.L43
 112:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 710              		.loc 1 112 5 is_stmt 1 view .LVU208
 711              	.LVL90:
 712              	.LBB52:
 713              	.LBI52:
 214:..//kernel/core/include/tos_sys.h **** {
 714              		.loc 2 214 31 view .LVU209
 715              	.LBB53:
 216:..//kernel/core/include/tos_sys.h **** }
 716              		.loc 2 216 5 view .LVU210
 216:..//kernel/core/include/tos_sys.h **** }
 717              		.loc 2 216 19 is_stmt 0 view .LVU211
 718 0010 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 719              	.LVL91:
 216:..//kernel/core/include/tos_sys.h **** }
 720              		.loc 2 216 19 view .LVU212
 721              	.LBE53:
 722              	.LBE52:
 112:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_OBJ_INVALID_ALLOC_TYPE;
 723              		.loc 1 112 8 view .LVU213
 724 0012 022A     		cmp	r2, #2
 725 0014 02D0     		beq	.L46
 113:..//kernel/core/tos_priority_mail_queue.c ****     }
 726              		.loc 1 113 16 view .LVU214
 727 0016 40F24E45 		movw	r5, #1102
 728 001a 22E0     		b	.L40
 729              	.L46:
 116:..//kernel/core/tos_priority_mail_queue.c **** 
 730              		.loc 1 116 5 is_stmt 1 view .LVU215
 116:..//kernel/core/tos_priority_mail_queue.c **** 
 731              		.loc 1 116 5 view .LVU216
 732 001c FFF7FEFF 		bl	tos_cpu_cpsr_save
 733              	.LVL92:
 116:..//kernel/core/tos_priority_mail_queue.c **** 
 734              		.loc 1 116 5 is_stmt 0 view .LVU217
 735 0020 0646     		mov	r6, r0
 736              	.LVL93:
 118:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 737              		.loc 1 118 5 is_stmt 1 view .LVU218
 118:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 738              		.loc 1 118 11 is_stmt 0 view .LVU219
 739 0022 04F11000 		add	r0, r4, #16
 740              	.LVL94:
 118:..//kernel/core/tos_priority_mail_queue.c ****     if (err != K_ERR_NONE) {
 741              		.loc 1 118 11 view .LVU220
 742 0026 FFF7FEFF 		bl	tos_prio_q_destroy_dyn
 743              	.LVL95:
 119:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 744              		.loc 1 119 5 is_stmt 1 view .LVU221
 119:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 25


 745              		.loc 1 119 8 is_stmt 0 view .LVU222
 746 002a 0546     		mov	r5, r0
 747 002c 80B9     		cbnz	r0, .L47
 124:..//kernel/core/tos_priority_mail_queue.c **** 
 748              		.loc 1 124 5 is_stmt 1 view .LVU223
 749 002e 271D     		adds	r7, r4, #4
 750 0030 0321     		movs	r1, #3
 751 0032 3846     		mov	r0, r7
 752              	.LVL96:
 124:..//kernel/core/tos_priority_mail_queue.c **** 
 753              		.loc 1 124 5 is_stmt 0 view .LVU224
 754 0034 FFF7FEFF 		bl	pend_wakeup_all
 755              	.LVL97:
 126:..//kernel/core/tos_priority_mail_queue.c **** 
 756              		.loc 1 126 5 is_stmt 1 view .LVU225
 757 0038 3846     		mov	r0, r7
 758 003a FFF7FEFF 		bl	pend_object_deinit
 759              	.LVL98:
 128:..//kernel/core/tos_priority_mail_queue.c ****     knl_object_alloc_reset(&prio_mail_q->knl_obj);
 760              		.loc 1 128 5 view .LVU226
 761              	.LBB54:
 762              	.LBI54:
 192:..//kernel/core/include/tos_sys.h **** {
 763              		.loc 2 192 32 view .LVU227
 764              	.LBB55:
 194:..//kernel/core/include/tos_sys.h **** }
 765              		.loc 2 194 5 view .LVU228
 194:..//kernel/core/include/tos_sys.h **** }
 766              		.loc 2 194 19 is_stmt 0 view .LVU229
 767 003e 0023     		movs	r3, #0
 768 0040 6380     		strh	r3, [r4, #2]	@ movhi
 769              	.LVL99:
 194:..//kernel/core/include/tos_sys.h **** }
 770              		.loc 2 194 19 view .LVU230
 771              	.LBE55:
 772              	.LBE54:
 129:..//kernel/core/tos_priority_mail_queue.c **** 
 773              		.loc 1 129 5 is_stmt 1 view .LVU231
 774              	.LBB56:
 775              	.LBI56:
 199:..//kernel/core/include/tos_sys.h **** {
 776              		.loc 2 199 32 view .LVU232
 777              	.LBB57:
 201:..//kernel/core/include/tos_sys.h **** }
 778              		.loc 2 201 5 view .LVU233
 201:..//kernel/core/include/tos_sys.h **** }
 779              		.loc 2 201 25 is_stmt 0 view .LVU234
 780 0042 2370     		strb	r3, [r4]
 781              	.LVL100:
 201:..//kernel/core/include/tos_sys.h **** }
 782              		.loc 2 201 25 view .LVU235
 783              	.LBE57:
 784              	.LBE56:
 131:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 785              		.loc 1 131 5 is_stmt 1 view .LVU236
 131:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 786              		.loc 1 131 5 view .LVU237
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 26


 787 0044 3046     		mov	r0, r6
 788 0046 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 789              	.LVL101:
 132:..//kernel/core/tos_priority_mail_queue.c **** 
 790              		.loc 1 132 5 view .LVU238
 791 004a FFF7FEFF 		bl	knl_sched
 792              	.LVL102:
 134:..//kernel/core/tos_priority_mail_queue.c **** }
 793              		.loc 1 134 5 view .LVU239
 134:..//kernel/core/tos_priority_mail_queue.c **** }
 794              		.loc 1 134 12 is_stmt 0 view .LVU240
 795 004e 08E0     		b	.L40
 796              	.LVL103:
 797              	.L47:
 120:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 798              		.loc 1 120 9 is_stmt 1 view .LVU241
 120:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 799              		.loc 1 120 9 view .LVU242
 800 0050 3046     		mov	r0, r6
 801              	.LVL104:
 120:..//kernel/core/tos_priority_mail_queue.c ****         return err;
 802              		.loc 1 120 9 is_stmt 0 view .LVU243
 803 0052 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 804              	.LVL105:
 121:..//kernel/core/tos_priority_mail_queue.c ****     }
 805              		.loc 1 121 9 is_stmt 1 view .LVU244
 121:..//kernel/core/tos_priority_mail_queue.c ****     }
 806              		.loc 1 121 16 is_stmt 0 view .LVU245
 807 0056 04E0     		b	.L40
 808              	.LVL106:
 809              	.L42:
 109:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 810              		.loc 1 109 5 view .LVU246
 811 0058 40F24C45 		movw	r5, #1100
 812 005c 01E0     		b	.L40
 813              	.L43:
 110:..//kernel/core/tos_priority_mail_queue.c **** 
 814              		.loc 1 110 5 view .LVU247
 815 005e 40F24D45 		movw	r5, #1101
 816              	.LVL107:
 817              	.L40:
 135:..//kernel/core/tos_priority_mail_queue.c **** 
 818              		.loc 1 135 1 view .LVU248
 819 0062 2846     		mov	r0, r5
 820 0064 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 821              		.cfi_endproc
 822              	.LFE113:
 824              		.section	.text.tos_prio_mail_q_flush,"ax",%progbits
 825              		.align	1
 826              		.global	tos_prio_mail_q_flush
 827              		.syntax unified
 828              		.thumb
 829              		.thumb_func
 830              		.fpu softvfp
 832              	tos_prio_mail_q_flush:
 833              	.LVL108:
 834              	.LFB114:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 27


 138:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 835              		.loc 1 138 1 is_stmt 1 view -0
 836              		.cfi_startproc
 837              		@ args = 0, pretend = 0, frame = 0
 838              		@ frame_needed = 0, uses_anonymous_args = 0
 139:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 839              		.loc 1 139 5 view .LVU250
 139:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 840              		.loc 1 139 5 view .LVU251
 841 0000 60B1     		cbz	r0, .L50
 138:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 842              		.loc 1 138 1 is_stmt 0 view .LVU252
 843 0002 08B5     		push	{r3, lr}
 844              	.LCFI9:
 845              		.cfi_def_cfa_offset 8
 846              		.cfi_offset 3, -8
 847              		.cfi_offset 14, -4
 140:..//kernel/core/tos_priority_mail_queue.c **** 
 848              		.loc 1 140 5 is_stmt 1 view .LVU253
 140:..//kernel/core/tos_priority_mail_queue.c **** 
 849              		.loc 1 140 5 view .LVU254
 850              	.LVL109:
 851              	.LBB58:
 852              	.LBI58:
 182:..//kernel/core/include/tos_sys.h **** {
 853              		.loc 2 182 31 view .LVU255
 854              	.LBB59:
 184:..//kernel/core/include/tos_sys.h **** }
 855              		.loc 2 184 5 view .LVU256
 184:..//kernel/core/include/tos_sys.h **** }
 856              		.loc 2 184 19 is_stmt 0 view .LVU257
 857 0004 4188     		ldrh	r1, [r0, #2]
 858              	.LVL110:
 184:..//kernel/core/include/tos_sys.h **** }
 859              		.loc 2 184 19 view .LVU258
 860              	.LBE59:
 861              	.LBE58:
 140:..//kernel/core/tos_priority_mail_queue.c **** 
 862              		.loc 1 140 5 view .LVU259
 863 0006 47F6EE32 		movw	r2, #31726
 864 000a 9142     		cmp	r1, r2
 865 000c 02D0     		beq	.L56
 866 000e 40F24D40 		movw	r0, #1101
 867              	.LVL111:
 868              	.L49:
 143:..//kernel/core/tos_priority_mail_queue.c **** 
 869              		.loc 1 143 1 view .LVU260
 870 0012 08BD     		pop	{r3, pc}
 871              	.LVL112:
 872              	.L56:
 142:..//kernel/core/tos_priority_mail_queue.c **** }
 873              		.loc 1 142 5 is_stmt 1 view .LVU261
 142:..//kernel/core/tos_priority_mail_queue.c **** }
 874              		.loc 1 142 12 is_stmt 0 view .LVU262
 875 0014 1030     		adds	r0, r0, #16
 876              	.LVL113:
 142:..//kernel/core/tos_priority_mail_queue.c **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 28


 877              		.loc 1 142 12 view .LVU263
 878 0016 FFF7FEFF 		bl	tos_prio_q_flush
 879              	.LVL114:
 142:..//kernel/core/tos_priority_mail_queue.c **** }
 880              		.loc 1 142 12 view .LVU264
 881 001a FAE7     		b	.L49
 882              	.LVL115:
 883              	.L50:
 884              	.LCFI10:
 885              		.cfi_def_cfa_offset 0
 886              		.cfi_restore 3
 887              		.cfi_restore 14
 139:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 888              		.loc 1 139 5 view .LVU265
 889 001c 40F24C40 		movw	r0, #1100
 890              	.LVL116:
 143:..//kernel/core/tos_priority_mail_queue.c **** 
 891              		.loc 1 143 1 view .LVU266
 892 0020 7047     		bx	lr
 893              		.cfi_endproc
 894              	.LFE114:
 896              		.section	.text.tos_prio_mail_q_pend,"ax",%progbits
 897              		.align	1
 898              		.global	tos_prio_mail_q_pend
 899              		.syntax unified
 900              		.thumb
 901              		.thumb_func
 902              		.fpu softvfp
 904              	tos_prio_mail_q_pend:
 905              	.LVL117:
 906              	.LFB115:
 146:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 907              		.loc 1 146 1 is_stmt 1 view -0
 908              		.cfi_startproc
 909              		@ args = 8, pretend = 0, frame = 0
 910              		@ frame_needed = 0, uses_anonymous_args = 0
 146:..//kernel/core/tos_priority_mail_queue.c ****     TOS_CPU_CPSR_ALLOC();
 911              		.loc 1 146 1 is_stmt 0 view .LVU268
 912 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 913              	.LCFI11:
 914              		.cfi_def_cfa_offset 24
 915              		.cfi_offset 4, -24
 916              		.cfi_offset 5, -20
 917              		.cfi_offset 6, -16
 918              		.cfi_offset 7, -12
 919              		.cfi_offset 8, -8
 920              		.cfi_offset 14, -4
 921 0004 0446     		mov	r4, r0
 922 0006 0D46     		mov	r5, r1
 923 0008 1746     		mov	r7, r2
 147:..//kernel/core/tos_priority_mail_queue.c ****     k_err_t err;
 924              		.loc 1 147 5 is_stmt 1 view .LVU269
 925              	.LVL118:
 148:..//kernel/core/tos_priority_mail_queue.c **** 
 926              		.loc 1 148 5 view .LVU270
 150:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 927              		.loc 1 150 5 view .LVU271
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 29


 150:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 928              		.loc 1 150 5 view .LVU272
 929 000a FFF7FEFF 		bl	knl_is_inirq
 930              	.LVL119:
 150:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 931              		.loc 1 150 5 is_stmt 0 view .LVU273
 932 000e 0028     		cmp	r0, #0
 933 0010 50D1     		bne	.L62
 151:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(mail_buf);
 934              		.loc 1 151 5 is_stmt 1 view .LVU274
 151:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(mail_buf);
 935              		.loc 1 151 5 view .LVU275
 936 0012 002C     		cmp	r4, #0
 937 0014 51D0     		beq	.L63
 152:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 938              		.loc 1 152 5 view .LVU276
 152:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 939              		.loc 1 152 5 view .LVU277
 940 0016 002D     		cmp	r5, #0
 941 0018 52D0     		beq	.L64
 153:..//kernel/core/tos_priority_mail_queue.c **** 
 942              		.loc 1 153 5 view .LVU278
 153:..//kernel/core/tos_priority_mail_queue.c **** 
 943              		.loc 1 153 5 view .LVU279
 944              	.LVL120:
 945              	.LBB60:
 946              	.LBI60:
 182:..//kernel/core/include/tos_sys.h **** {
 947              		.loc 2 182 31 view .LVU280
 948              	.LBB61:
 184:..//kernel/core/include/tos_sys.h **** }
 949              		.loc 2 184 5 view .LVU281
 184:..//kernel/core/include/tos_sys.h **** }
 950              		.loc 2 184 19 is_stmt 0 view .LVU282
 951 001a 6288     		ldrh	r2, [r4, #2]
 952              	.LVL121:
 184:..//kernel/core/include/tos_sys.h **** }
 953              		.loc 2 184 19 view .LVU283
 954              	.LBE61:
 955              	.LBE60:
 153:..//kernel/core/tos_priority_mail_queue.c **** 
 956              		.loc 1 153 5 view .LVU284
 957 001c 47F6EE33 		movw	r3, #31726
 958 0020 9A42     		cmp	r2, r3
 959 0022 04D0     		beq	.L67
 960 0024 40F24D46 		movw	r6, #1101
 961              	.LVL122:
 962              	.L58:
 187:..//kernel/core/tos_priority_mail_queue.c **** 
 963              		.loc 1 187 1 view .LVU285
 964 0028 3046     		mov	r0, r6
 965 002a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 966              	.LVL123:
 967              	.L67:
 155:..//kernel/core/tos_priority_mail_queue.c **** 
 968              		.loc 1 155 5 is_stmt 1 view .LVU286
 155:..//kernel/core/tos_priority_mail_queue.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 30


 969              		.loc 1 155 5 view .LVU287
 970 002e FFF7FEFF 		bl	tos_cpu_cpsr_save
 971              	.LVL124:
 972 0032 8046     		mov	r8, r0
 973              	.LVL125:
 157:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 974              		.loc 1 157 5 view .LVU288
 157:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 975              		.loc 1 157 9 is_stmt 0 view .LVU289
 976 0034 0023     		movs	r3, #0
 977 0036 3A46     		mov	r2, r7
 978 0038 2946     		mov	r1, r5
 979 003a 04F11000 		add	r0, r4, #16
 980              	.LVL126:
 157:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 981              		.loc 1 157 9 view .LVU290
 982 003e FFF7FEFF 		bl	tos_prio_q_dequeue
 983              	.LVL127:
 157:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 984              		.loc 1 157 8 view .LVU291
 985 0042 0646     		mov	r6, r0
 986 0044 20B3     		cbz	r0, .L68
 162:..//kernel/core/tos_priority_mail_queue.c ****         *mail_size = 0;
 987              		.loc 1 162 5 is_stmt 1 view .LVU292
 162:..//kernel/core/tos_priority_mail_queue.c ****         *mail_size = 0;
 988              		.loc 1 162 8 is_stmt 0 view .LVU293
 989 0046 DDE90623 		ldrd	r2, [sp, #24]
 990 004a 1343     		orrs	r3, r2, r3
 991 004c 24D0     		beq	.L69
 168:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 992              		.loc 1 168 5 is_stmt 1 view .LVU294
 168:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 993              		.loc 1 168 9 is_stmt 0 view .LVU295
 994 004e FFF7FEFF 		bl	knl_is_sched_locked
 995              	.LVL128:
 168:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 996              		.loc 1 168 8 view .LVU296
 997 0052 48BB     		cbnz	r0, .L70
 173:..//kernel/core/tos_priority_mail_queue.c ****     pend_task_block(k_curr_task, &prio_mail_q->pend_obj, timeout);
 998              		.loc 1 173 5 is_stmt 1 view .LVU297
 173:..//kernel/core/tos_priority_mail_queue.c ****     pend_task_block(k_curr_task, &prio_mail_q->pend_obj, timeout);
 999              		.loc 1 173 16 is_stmt 0 view .LVU298
 1000 0054 1C4E     		ldr	r6, .L71
 1001 0056 3068     		ldr	r0, [r6]
 173:..//kernel/core/tos_priority_mail_queue.c ****     pend_task_block(k_curr_task, &prio_mail_q->pend_obj, timeout);
 1002              		.loc 1 173 23 view .LVU299
 1003 0058 0567     		str	r5, [r0, #112]
 174:..//kernel/core/tos_priority_mail_queue.c **** 
 1004              		.loc 1 174 5 is_stmt 1 view .LVU300
 1005 005a DDE90623 		ldrd	r2, [sp, #24]
 1006 005e 211D     		adds	r1, r4, #4
 1007 0060 FFF7FEFF 		bl	pend_task_block
 1008              	.LVL129:
 176:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 1009              		.loc 1 176 5 view .LVU301
 176:..//kernel/core/tos_priority_mail_queue.c ****     knl_sched();
 1010              		.loc 1 176 5 view .LVU302
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 31


 1011 0064 4046     		mov	r0, r8
 1012 0066 FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1013              	.LVL130:
 177:..//kernel/core/tos_priority_mail_queue.c **** 
 1014              		.loc 1 177 5 view .LVU303
 1015 006a FFF7FEFF 		bl	knl_sched
 1016              	.LVL131:
 179:..//kernel/core/tos_priority_mail_queue.c ****     if (err == K_ERR_NONE) {
 1017              		.loc 1 179 5 view .LVU304
 179:..//kernel/core/tos_priority_mail_queue.c ****     if (err == K_ERR_NONE) {
 1018              		.loc 1 179 39 is_stmt 0 view .LVU305
 1019 006e 3368     		ldr	r3, [r6]
 179:..//kernel/core/tos_priority_mail_queue.c ****     if (err == K_ERR_NONE) {
 1020              		.loc 1 179 11 view .LVU306
 1021 0070 93F86800 		ldrb	r0, [r3, #104]	@ zero_extendqisi2
 1022 0074 FFF7FEFF 		bl	pend_state2errno
 1023              	.LVL132:
 180:..//kernel/core/tos_priority_mail_queue.c ****         *mail_size              = k_curr_task->mail_size;
 1024              		.loc 1 180 5 is_stmt 1 view .LVU307
 180:..//kernel/core/tos_priority_mail_queue.c ****         *mail_size              = k_curr_task->mail_size;
 1025              		.loc 1 180 8 is_stmt 0 view .LVU308
 1026 0078 0646     		mov	r6, r0
 1027 007a 0028     		cmp	r0, #0
 1028 007c D4D1     		bne	.L58
 181:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail       = K_NULL;
 1029              		.loc 1 181 9 is_stmt 1 view .LVU309
 181:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail       = K_NULL;
 1030              		.loc 1 181 46 is_stmt 0 view .LVU310
 1031 007e 124B     		ldr	r3, .L71
 1032 0080 1A68     		ldr	r2, [r3]
 1033 0082 526F     		ldr	r2, [r2, #116]
 181:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail       = K_NULL;
 1034              		.loc 1 181 33 view .LVU311
 1035 0084 3A60     		str	r2, [r7]
 182:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail_size  = 0;
 1036              		.loc 1 182 9 is_stmt 1 view .LVU312
 182:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail_size  = 0;
 1037              		.loc 1 182 20 is_stmt 0 view .LVU313
 1038 0086 1B68     		ldr	r3, [r3]
 182:..//kernel/core/tos_priority_mail_queue.c ****         k_curr_task->mail_size  = 0;
 1039              		.loc 1 182 33 view .LVU314
 1040 0088 0022     		movs	r2, #0
 1041 008a 1A67     		str	r2, [r3, #112]
 183:..//kernel/core/tos_priority_mail_queue.c ****     }
 1042              		.loc 1 183 9 is_stmt 1 view .LVU315
 183:..//kernel/core/tos_priority_mail_queue.c ****     }
 1043              		.loc 1 183 33 is_stmt 0 view .LVU316
 1044 008c 5A67     		str	r2, [r3, #116]
 1045 008e CBE7     		b	.L58
 1046              	.LVL133:
 1047              	.L68:
 158:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 1048              		.loc 1 158 9 is_stmt 1 view .LVU317
 158:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_NONE;
 1049              		.loc 1 158 9 view .LVU318
 1050 0090 4046     		mov	r0, r8
 1051 0092 FFF7FEFF 		bl	tos_cpu_cpsr_restore
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 32


 1052              	.LVL134:
 159:..//kernel/core/tos_priority_mail_queue.c ****     }
 1053              		.loc 1 159 9 view .LVU319
 159:..//kernel/core/tos_priority_mail_queue.c ****     }
 1054              		.loc 1 159 16 is_stmt 0 view .LVU320
 1055 0096 C7E7     		b	.L58
 1056              	.L69:
 163:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 1057              		.loc 1 163 9 is_stmt 1 view .LVU321
 163:..//kernel/core/tos_priority_mail_queue.c ****         TOS_CPU_INT_ENABLE();
 1058              		.loc 1 163 20 is_stmt 0 view .LVU322
 1059 0098 0023     		movs	r3, #0
 1060 009a 3B60     		str	r3, [r7]
 164:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_PEND_NOWAIT;
 1061              		.loc 1 164 9 is_stmt 1 view .LVU323
 164:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_PEND_NOWAIT;
 1062              		.loc 1 164 9 view .LVU324
 1063 009c 4046     		mov	r0, r8
 1064 009e FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1065              	.LVL135:
 165:..//kernel/core/tos_priority_mail_queue.c ****     }
 1066              		.loc 1 165 9 view .LVU325
 165:..//kernel/core/tos_priority_mail_queue.c ****     }
 1067              		.loc 1 165 16 is_stmt 0 view .LVU326
 1068 00a2 4FF49666 		mov	r6, #1200
 1069 00a6 BFE7     		b	.L58
 1070              	.L70:
 169:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_PEND_SCHED_LOCKED;
 1071              		.loc 1 169 9 is_stmt 1 view .LVU327
 169:..//kernel/core/tos_priority_mail_queue.c ****         return K_ERR_PEND_SCHED_LOCKED;
 1072              		.loc 1 169 9 view .LVU328
 1073 00a8 4046     		mov	r0, r8
 1074 00aa FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1075              	.LVL136:
 170:..//kernel/core/tos_priority_mail_queue.c ****     }
 1076              		.loc 1 170 9 view .LVU329
 170:..//kernel/core/tos_priority_mail_queue.c ****     }
 1077              		.loc 1 170 16 is_stmt 0 view .LVU330
 1078 00ae 40F2B146 		movw	r6, #1201
 1079 00b2 B9E7     		b	.L58
 1080              	.LVL137:
 1081              	.L62:
 150:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(prio_mail_q);
 1082              		.loc 1 150 5 view .LVU331
 1083 00b4 4FF4C876 		mov	r6, #400
 1084 00b8 B6E7     		b	.L58
 1085              	.L63:
 151:..//kernel/core/tos_priority_mail_queue.c ****     TOS_PTR_SANITY_CHECK(mail_buf);
 1086              		.loc 1 151 5 view .LVU332
 1087 00ba 40F24C46 		movw	r6, #1100
 1088 00be B3E7     		b	.L58
 1089              	.L64:
 152:..//kernel/core/tos_priority_mail_queue.c ****     TOS_OBJ_VERIFY(prio_mail_q, KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE);
 1090              		.loc 1 152 5 view .LVU333
 1091 00c0 40F24C46 		movw	r6, #1100
 1092 00c4 B0E7     		b	.L58
 1093              	.L72:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 33


 1094 00c6 00BF     		.align	2
 1095              	.L71:
 1096 00c8 00000000 		.word	k_curr_task
 1097              		.cfi_endproc
 1098              	.LFE115:
 1100              		.section	.text.tos_prio_mail_q_post,"ax",%progbits
 1101              		.align	1
 1102              		.global	tos_prio_mail_q_post
 1103              		.syntax unified
 1104              		.thumb
 1105              		.thumb_func
 1106              		.fpu softvfp
 1108              	tos_prio_mail_q_post:
 1109              	.LVL138:
 1110              	.LFB118:
 232:..//kernel/core/tos_priority_mail_queue.c **** 
 233:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_post(k_prio_mail_q_t *prio_mail_q, void *mail_buf, size_t mail_size
 234:..//kernel/core/tos_priority_mail_queue.c **** {
 1111              		.loc 1 234 1 is_stmt 1 view -0
 1112              		.cfi_startproc
 1113              		@ args = 0, pretend = 0, frame = 0
 1114              		@ frame_needed = 0, uses_anonymous_args = 0
 1115              		.loc 1 234 1 is_stmt 0 view .LVU335
 1116 0000 10B5     		push	{r4, lr}
 1117              	.LCFI12:
 1118              		.cfi_def_cfa_offset 8
 1119              		.cfi_offset 4, -8
 1120              		.cfi_offset 14, -4
 1121 0002 82B0     		sub	sp, sp, #8
 1122              	.LCFI13:
 1123              		.cfi_def_cfa_offset 16
 235:..//kernel/core/tos_priority_mail_queue.c ****     return prio_mail_q_do_post(prio_mail_q, mail_buf, mail_size, prio, OPT_POST_ONE);
 1124              		.loc 1 235 5 is_stmt 1 view .LVU336
 1125              		.loc 1 235 12 is_stmt 0 view .LVU337
 1126 0004 0024     		movs	r4, #0
 1127 0006 0094     		str	r4, [sp]
 1128 0008 FFF7FEFF 		bl	prio_mail_q_do_post
 1129              	.LVL139:
 236:..//kernel/core/tos_priority_mail_queue.c **** }
 1130              		.loc 1 236 1 view .LVU338
 1131 000c 02B0     		add	sp, sp, #8
 1132              	.LCFI14:
 1133              		.cfi_def_cfa_offset 8
 1134              		@ sp needed
 1135 000e 10BD     		pop	{r4, pc}
 1136              		.cfi_endproc
 1137              	.LFE118:
 1139              		.section	.text.tos_prio_mail_q_post_all,"ax",%progbits
 1140              		.align	1
 1141              		.global	tos_prio_mail_q_post_all
 1142              		.syntax unified
 1143              		.thumb
 1144              		.thumb_func
 1145              		.fpu softvfp
 1147              	tos_prio_mail_q_post_all:
 1148              	.LVL140:
 1149              	.LFB119:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 34


 237:..//kernel/core/tos_priority_mail_queue.c **** 
 238:..//kernel/core/tos_priority_mail_queue.c **** __API__ k_err_t tos_prio_mail_q_post_all(k_prio_mail_q_t *prio_mail_q, void *mail_buf, size_t mail_
 239:..//kernel/core/tos_priority_mail_queue.c **** {
 1150              		.loc 1 239 1 is_stmt 1 view -0
 1151              		.cfi_startproc
 1152              		@ args = 0, pretend = 0, frame = 0
 1153              		@ frame_needed = 0, uses_anonymous_args = 0
 1154              		.loc 1 239 1 is_stmt 0 view .LVU340
 1155 0000 10B5     		push	{r4, lr}
 1156              	.LCFI15:
 1157              		.cfi_def_cfa_offset 8
 1158              		.cfi_offset 4, -8
 1159              		.cfi_offset 14, -4
 1160 0002 82B0     		sub	sp, sp, #8
 1161              	.LCFI16:
 1162              		.cfi_def_cfa_offset 16
 240:..//kernel/core/tos_priority_mail_queue.c ****     return prio_mail_q_do_post(prio_mail_q, mail_buf, mail_size, prio, OPT_POST_ALL);
 1163              		.loc 1 240 5 is_stmt 1 view .LVU341
 1164              		.loc 1 240 12 is_stmt 0 view .LVU342
 1165 0004 0124     		movs	r4, #1
 1166 0006 0094     		str	r4, [sp]
 1167 0008 FFF7FEFF 		bl	prio_mail_q_do_post
 1168              	.LVL141:
 241:..//kernel/core/tos_priority_mail_queue.c **** }
 1169              		.loc 1 241 1 view .LVU343
 1170 000c 02B0     		add	sp, sp, #8
 1171              	.LCFI17:
 1172              		.cfi_def_cfa_offset 8
 1173              		@ sp needed
 1174 000e 10BD     		pop	{r4, pc}
 1175              		.cfi_endproc
 1176              	.LFE119:
 1178              		.text
 1179              	.Letext0:
 1180              		.file 3 "..//kernel/core/include/tos_kerr.h"
 1181              		.file 4 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 1182              		.file 5 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 1183              		.file 6 "Drivers/CMSIS/Include/core_cm3.h"
 1184              		.file 7 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1185              		.file 8 "d:\\arm_gcc\\8 2019-q3-update\\lib\\gcc\\arm-none-eabi\\8.3.1\\include\\stddef.h"
 1186              		.file 9 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\_types.h"
 1187              		.file 10 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\reent.h"
 1188              		.file 11 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\lock.h"
 1189              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1190              		.file 13 "..//arch/arm/arm-v7m/common/include/tos_cpu_types.h"
 1191              		.file 14 "..//kernel/core/include/tos_ktypes.h"
 1192              		.file 15 "..//kernel/core/include/tos_task.h"
 1193              		.file 16 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\stdlib.h"
 1194              		.file 17 "..//kernel/core/include/tos_list.h"
 1195              		.file 18 "..//kernel/core/include/tos_pend.h"
 1196              		.file 19 "..//kernel/core/include/tos_binary_heap.h"
 1197              		.file 20 "..//kernel/core/include/tos_priority_queue.h"
 1198              		.file 21 "..//kernel/core/include/tos_priority_mail_queue.h"
 1199              		.file 22 "..//kernel/core/include/tos_timer.h"
 1200              		.file 23 "..//kernel/core/include/tos_mmheap.h"
 1201              		.file 24 "..//kernel/core/include/tos_sched.h"
 1202              		.file 25 "..//kernel/core/include/tos_global.h"
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 35


 1203              		.file 26 "..//arch/arm/arm-v7m/common/include/tos_cpu.h"
 1204              		.file 27 "<built-in>"
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 tos_priority_mail_queue.c
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:16     .text.prio_mail_task_recv:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:23     .text.prio_mail_task_recv:00000000 prio_mail_task_recv
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:62     .text.prio_mail_q_do_post:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:68     .text.prio_mail_q_do_post:00000000 prio_mail_q_do_post
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:259    .text.tos_prio_mail_q_create:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:266    .text.tos_prio_mail_q_create:00000000 tos_prio_mail_q_create
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:401    .text.tos_prio_mail_q_destroy:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:408    .text.tos_prio_mail_q_destroy:00000000 tos_prio_mail_q_destroy
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:572    .text.tos_prio_mail_q_create_dyn:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:579    .text.tos_prio_mail_q_create_dyn:00000000 tos_prio_mail_q_create_dyn
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:661    .text.tos_prio_mail_q_destroy_dyn:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:668    .text.tos_prio_mail_q_destroy_dyn:00000000 tos_prio_mail_q_destroy_dyn
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:825    .text.tos_prio_mail_q_flush:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:832    .text.tos_prio_mail_q_flush:00000000 tos_prio_mail_q_flush
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:897    .text.tos_prio_mail_q_pend:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:904    .text.tos_prio_mail_q_pend:00000000 tos_prio_mail_q_pend
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:1096   .text.tos_prio_mail_q_pend:000000c8 $d
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:1101   .text.tos_prio_mail_q_post:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:1108   .text.tos_prio_mail_q_post:00000000 tos_prio_mail_q_post
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:1140   .text.tos_prio_mail_q_post_all:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccodOU3L.s:1147   .text.tos_prio_mail_q_post_all:00000000 tos_prio_mail_q_post_all

UNDEFINED SYMBOLS
memcpy
pend_task_wakeup
tos_cpu_cpsr_save
pend_is_nopending
tos_prio_q_enqueue
tos_cpu_cpsr_restore
knl_sched
tos_mmheap_alloc
tos_prio_q_create
pend_object_init
tos_mmheap_free
tos_prio_q_destroy
pend_wakeup_all
pend_object_deinit
tos_prio_q_create_dyn
tos_prio_q_destroy_dyn
tos_prio_q_flush
knl_is_inirq
tos_prio_q_dequeue
knl_is_sched_locked
pend_task_block
pend_state2errno
k_curr_task
